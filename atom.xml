<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Tragic Master&#39;s Blog</title>
  
  
  <link href="http://jerry20000730.github.io/atom.xml" rel="self"/>
  
  <link href="http://jerry20000730.github.io/"/>
  <updated>2025-03-08T13:23:20.434Z</updated>
  <id>http://jerry20000730.github.io/</id>
  
  <author>
    <name>Tragic Master</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Go Programming Languages - Extra Settings</title>
    <link href="http://jerry20000730.github.io/wiki/%E7%A8%8B%E5%BA%8F%E8%AF%AD%E8%A8%80/Go/Go_extra/"/>
    <id>http://jerry20000730.github.io/wiki/%E7%A8%8B%E5%BA%8F%E8%AF%AD%E8%A8%80/Go/Go_extra/</id>
    <published>2025-03-08T12:14:25.550Z</published>
    <updated>2025-03-08T13:23:20.434Z</updated>
    
    <content type="html"><![CDATA[<h1 id="go-module">Go module</h1><h2 id="go-module的原理">Go module的原理</h2><p>go module 根据官网定义</p><blockquote><p>A Go module is a collection of Go packages stored in a file tree witha go.mod file at its root</p></blockquote><p>在Go Module没有出现之前，所有依赖距均从<code>$GOPATH/src/</code> 或<code>$GOROOT/src/</code> 中进行查找导入，Go Modules是为了提升使用其他开发者代码，即添加<strong>依赖项（模块、包）</strong>时的体验，也是为了让代码的正确性、安全性得到保障。</p><p>在 Go 支持 Go Modules之后，编译时编译器会从工作目录（当前所在目录）开始并逐级向上查找是否具有go.mod 文件。</p><h2 id="如何开启">如何开启？</h2><p>用环境变量 GO111MODULE开启或关闭模块支持，它有三个可选值：off、on、auto，默认值是 auto。</p><ul><li><code>GO111MODULE=off</code> 无模块支持，Go 会从 GOPATH 和 vendor文件夹寻找包。</li><li><code>GO111MODULE=on</code> 模块支持，Go 会忽略 GOPATH 和 vendor文件夹，只根据 go.mod 下载依赖。</li><li><code>GO111MODULE=auto</code> 在 <code>$GOPATH/src</code>外面且根目录有 go.mod 文件时，开启模块支持。</li></ul><p>注意：在使用模块的时候，GOPATH是无意义的，不过它还是会把下载的依赖储存在 <code>$GOPATH/src/mod</code>中，也会把 go install 的结果放在 <code>$GOPATH/bin</code> 中</p><h2 id="如何初始化一个module">如何初始化一个module</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">go mod init $&#123;module_name&#125;</span><br></pre></td></tr></table></figure><h2 id="go-module-名称">Go module 名称</h2><p>module名称有模块路径标识，模块路径就是模块的规范名称，为了规范，很多公司会将确保模块名称加上<code>https://</code>的前缀就是源码仓库的地址。</p><p>举例： <img src="/images/ProgrammingLanguages/Go/go_extra/module.png"alt="module名称与实际github地址相同" /></p><p>这样做的目的是为了方便其他公司/组织的人下载依赖时使用</p><p>注意： 1. 模块名可以不是源码仓库地址 2. 模块名称可以包含子目录</p><p>下面讨论如何下载，已经如果模块名称不为实际下载地址的时候Gomodule是如何解决的。</p><h2 id="如何下载go-module下载自己项目的依赖项">如何下载GoModule（下载自己项目的依赖项）？</h2><p>一般来说，只需要知道你需要下载的module名称即可，比如我需要下载上图testify的包，我只需要：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">go get github.com/stretchr/testify</span><br></pre></td></tr></table></figure><p>但有的时候，一些module的名称与源码仓库地址不一样，比如下图： <imgsrc="/images/ProgrammingLanguages/Go/go_extra/module2.png"alt="module名称与实际github地址不相同" /></p><p>当执行get命令的时候： <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">go get go.uber.org/zap</span><br></pre></td></tr></table></figure></p><p>会先向https://go.uber.org/zap?go-get=1发送一个<code>GET</code>请求<img src="/images/ProgrammingLanguages/Go/go_extra/module3.png"alt="postman显示发送get请求后的响应体" /></p><p>此时，响应体里会有一个meta标签，name为<code>go-import</code>，对应的content由三部分组成：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># 1. 模块名称</span><br><span class="line"># 2. 版本控制工具（git还是svn）</span><br><span class="line"># 3. 实际的源码仓库地址</span><br><span class="line">go.uber.org/zap git https://github.com/uber-go/zap</span><br></pre></td></tr></table></figure><h2id="如何下载模块中的子模块下载自己项目的依赖项中的其中一个模块">如何下载模块中的子模块（下载自己项目的依赖项中的其中一个模块）？</h2><p>假设我需要的不是<code>zap</code>这个项目的所有源码，而是其中一个模块，比如<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">go get go.uber.org/zap/tools</span><br></pre></td></tr></table></figure> 他的查找顺序如下： 1.先发送<code>GET</code>请求<code>https://go.uber.org/zap/tools?go-get=1</code>，发现查不到源码地址2. 再回溯一级目录，请求<code>https://go.uber/org/zap?go-get=1</code></p><h2 id="公司里面的做法">公司里面的做法</h2><ol type="1"><li>公司里面一般我们会直接<code>go get xxxx/repo.git</code>，这个时候就会直接克隆这个git地址的目录，无需再发送<code>go-get=1</code>的请求</li><li>一般来说，公司里面实际上会使用ssh的方式解决权限问题，比如使用git的时候我们会在$HOME/.gitconfig文件中追加<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[url &quot;ssh://git@xxx.com&quot;]</span><br><span class="line">    insteadOf = https://xxx.com</span><br></pre></td></tr></table></figure> 通过在git平台上传ssh公钥的方式解决权限问题</li></ol><h1 id="goproxy">GOPROXY</h1><h2 id="goproxy原理">GOPROXY原理</h2><p>几个问题： 1.互联网上的源码仓库除了github还有很多，在各种不同的网络环境下，如何保证下载速度？2. 默认情况下，goget不是直接去源码仓库上下载代码，而是通过代理<code>https://proxy.golang.org</code>(谷歌维护)去下载，代理对源码镜像进行了缓存并提供了CDN加速，但是源码更新几分钟后，代理里的镜像才会更新会有一定延迟。</p><p>国内代理有： <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">https://goproxy.cn</span><br><span class="line">https://goproxy.io</span><br></pre></td></tr></table></figure></p><p>我们可以在GOPROXY环境变量下进行更改，以确保当谷歌的下载不下来的时候，可以使用国内代理下载。</p><h2 id="模块缓存">模块缓存</h2><p>下载的谋爱会保存在环境变量<code>GOMODCACHE</code>指定的目录下，默认为<code>$GOPATH/pkg/mod</code></p><h2 id="gosumdb">GOSUMDB</h2><p>sum.golang.org(由谷歌运行)提供了一个checksum数据库，用来存储源代码的哈希值，以防止goget从任何源头（包括代理）拉取了被篡改的源码。</p><ol type="1"><li>第一次用goget下载某个模块的时候，会计算其哈希值，与checksum数据库里的值进行对比，</li><li>如果一致，则把模块存入本地缓存目录，并将哈希值写入go.sum文件。后续使用该模块时通过go.sum文件来校验该模块自下载以来未曾被修改过。</li><li>如果设置环境变量<code>GOSUMDB=off</code>，或者goget的时候使用-insecure标志，标识不需要验证合法性。</li></ol><h2 id="如何使用公司内部私有的go-module">如何使用公司内部私有的Gomodule</h2><ol type="1"><li>GOPROXY的默认值（<code>https://proxy.golang.org,direct</code>），其中direct表示不走代理，直接从源码库下载（先发送go-get=1请求）</li><li>所有代理都不会访问私有仓库，所以goget私有模块的时候会命中direct，所有代理都不会访问私有仓库，所以goget私有模块的时候会命中direct。为避免下载私有模块的时候访问代理，可以把私有模块的前缀赋给<code>GONOPROXY</code>，如<code>GONOPROXY=xxx.xxx.com</code></li><li>私有模块不需要使用公共的checksum数据库，所以需要设置<code>GONOSUMDB=xxx.xxx.com</code></li><li>GOPRIVATE是<code>GONOPROXY</code>和<code>GONOSUMDB</code>的默认值，所以设置GOPRIVATE之后就不需要再设置<code>GONOPROXY</code>和<code>GONOSUMDB</code></li></ol><h2 id="如何部署公司私有的goproxy">如何部署公司私有的GOPROXY</h2><p><code>goproxy.io</code>除了提供国内可用的gomodule代理之外，还提供了部署私有go proxy的能力：</p><p><a href=""></a></p>]]></content>
    
    
    <summary type="html">Go需要知道的一些配置信息</summary>
    
    
    
    <category term="Programming Languages" scheme="http://jerry20000730.github.io/categories/Programming-Languages/"/>
    
    
    <category term="Go" scheme="http://jerry20000730.github.io/tags/Go/"/>
    
  </entry>
  
  <entry>
    <title>CICD流水线搭建流程 [GitLab + Ubuntu]</title>
    <link href="http://jerry20000730.github.io/wiki/%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE/CICD/"/>
    <id>http://jerry20000730.github.io/wiki/%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE/CICD/</id>
    <published>2024-10-27T21:51:49.000Z</published>
    <updated>2024-10-27T21:51:49.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="prerequisite">Prerequisite</h1><ol type="1"><li>GitLab 仓库</li><li>Ubuntu (18.04/20.04/22.04) 服务器</li><li>编程语言runtime</li></ol><h1 id="创建gitlab仓库">1. 创建GitLab仓库</h1><figure><img src="/images/CICD/gitlab-new-project.png"alt="create gitlab repo" /><figcaption aria-hidden="true">create gitlab repo</figcaption></figure><h1 id="创建gitlab-runner">2. 创建GitLab Runner</h1><p>服务器上先安装<code>gitlab-runner</code>服务 <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install gitlab-runner</span><br></pre></td></tr></table></figure></p><p>检查安装是否成功 <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl status gitlab-runner</span><br></pre></td></tr></table></figure></p><p>会显示 <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">● gitlab-runner.service - GitLab Runner</span><br><span class="line">   Loaded: loaded (/etc/systemd/system/gitlab-runner.service; enabled; vendor preset: enabled)</span><br><span class="line">   Active: active (running) since Mon 2020-06-01 09:01:49 UTC; 4s ago</span><br><span class="line"> Main PID: 16653 (gitlab-runner)</span><br><span class="line">    Tasks: 6 (limit: 1152)</span><br><span class="line">   CGroup: /system.slice/gitlab-runner.service</span><br><span class="line">           └─16653 /usr/lib/gitlab-runner/gitlab-runner run --working-directory /home/gitlab-runner --config /etc/gitlab</span><br></pre></td></tr></table></figure></p><p>其次在GitLab上进行绑定，进入仓库 - Settings - CICD - Runners</p><figure><img src="/images/CICD/gitlab-runner.png"alt="gitlab runner location" /><figcaption aria-hidden="true">gitlab runner location</figcaption></figure><p>点击 <code>New Project Runner</code>,然后写一下tag和description（确保你知道这个是那个服务器和干什么的），然后选中<code>Run untagged project</code>，确保你不会因为该项目没有tag而无法在runner上跑</p><figure><img src="/images/CICD/gitlab-runner-configure.png"alt="gitlab runner configure" /><figcaption aria-hidden="true">gitlab runner configure</figcaption></figure><h1 id="绑定gitlab-runner和服务器">3. 绑定gitlab-runner和服务器</h1><p>当 <code>gitlab-runner</code>注册之后，需要在服务器上进行token绑定</p><figure><img src="/images/CICD/new-runner-created.png"alt="gitlab runner binding" /><figcaption aria-hidden="true">gitlab runner binding</figcaption></figure><p>输入基础命令 <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gitlab-runner register --url [project_URL] --token [runner_token]</span><br></pre></td></tr></table></figure> 然后可能会让你输入几个关键信息</p><ol type="1"><li>executor: 参照gitlab官方给出的<ahref="https://docs.gitlab.com/runner/executors/">executor类型</a>，我们因为是个小项目，暂时没有使用docker，所以选择shell</li><li>docker-image:如果选择docker作为executor的话，就会要求配置docker镜像</li><li>description: 描述一下 等信息，其它我没遇到，遇到了再记录</li></ol><h1 id="编写-.gitlab-ci.yml">4. 编写 <code>.gitlab-ci.yml</code></h1><p>首先是要填写流水线的阶段 <figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">stages:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">build</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">test</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">deploy</span></span><br></pre></td></tr></table></figure></p><p>其次是各阶段所需要的命令和生成的文件单独列举出来，因为我们这个是个springboot项目，每次推送main分支之后就会进行maven编译，生成target文件夹下的jar包，然后在javaruntime运行，流水线思路简单。</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">build:</span></span><br><span class="line">  <span class="attr">stage:</span> <span class="string">build</span></span><br><span class="line">  <span class="attr">script:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">mvn</span> <span class="string">clean</span> <span class="string">package</span></span><br><span class="line">  <span class="attr">artifacts:</span></span><br><span class="line">    <span class="attr">paths:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">target/*.jar</span></span><br><span class="line">    <span class="attr">expire_in:</span> <span class="number">1</span> <span class="string">week</span></span><br><span class="line"></span><br><span class="line"><span class="attr">test:</span></span><br><span class="line">  <span class="attr">stage:</span> <span class="string">test</span></span><br><span class="line">  <span class="attr">script:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">mvn</span> <span class="string">test</span></span><br><span class="line"></span><br><span class="line"><span class="attr">deploy:</span></span><br><span class="line">  <span class="attr">stage:</span> <span class="string">deploy</span></span><br><span class="line">  <span class="attr">script:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">mkdir</span> <span class="string">-p</span> <span class="string">$DEPLOY_PATH</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">cp</span> <span class="string">target/$APP_NAME</span> <span class="string">$DEPLOY_PATH/</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">|</span></span><br><span class="line"><span class="string">      while pgrep -f &quot;$APP_NAME&quot; &gt; /dev/null; do</span></span><br><span class="line"><span class="string">        pkill -f &quot;$APP_NAME&quot;</span></span><br><span class="line"><span class="string">        sleep 1</span></span><br><span class="line"><span class="string">      done</span></span><br><span class="line"><span class="string"></span>    <span class="bullet">-</span> <span class="string">nohup</span> <span class="string">java</span> <span class="string">-jar</span> <span class="string">$DEPLOY_PATH/$APP_NAME</span> <span class="string">--spring.profiles.active=prod</span> <span class="string">&gt;</span> <span class="string">$DEPLOY_PATH/app.log</span> <span class="number">2</span><span class="string">&gt;&amp;1</span> <span class="string">&amp;</span></span><br></pre></td></tr></table></figure><p>其中 <figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">-</span> <span class="string">|</span></span><br><span class="line"><span class="string">  while pgrep -f &quot;$APP_NAME&quot; &gt; /dev/null; do</span></span><br><span class="line"><span class="string">    pkill -f &quot;$APP_NAME&quot;</span></span><br><span class="line"><span class="string">    sleep 1</span></span><br><span class="line"><span class="string">  done</span></span><br><span class="line"><span class="string"></span><span class="bullet">-</span> <span class="string">nohup</span> <span class="string">java</span> <span class="string">-jar</span> <span class="string">$DEPLOY_PATH/$APP_NAME</span> <span class="string">--spring.profiles.active=prod</span> <span class="string">&gt;</span> <span class="string">$DEPLOY_PATH/app.log</span> <span class="number">2</span><span class="string">&gt;&amp;1</span> <span class="string">&amp;</span></span><br></pre></td></tr></table></figure> 是为了保证能够确保关掉上一次跑的进程。</p><h1 id="reference">Reference</h1><ol type="1"><li>How To Set Up a Continuous Deployment Pipeline with GitLab CI/CD onUbuntu <ahref="https://www.digitalocean.com/community/tutorials/how-to-set-up-a-continuous-deployment-pipeline-with-gitlab-on-ubuntu">https://www.digitalocean.com/community/tutorials/how-to-set-up-a-continuous-deployment-pipeline-with-gitlab-on-ubuntu</a></li><li>Use CI/CD to build your application <ahref="https://docs.gitlab.com/ee/topics/build_your_application.html">https://docs.gitlab.com/ee/topics/build_your_application.html</a></li></ol>]]></content>
    
    
    <summary type="html">记录一下在ubuntu服务器上搭建CICD (未使用Docker)</summary>
    
    
    
    <category term="环境配置" scheme="http://jerry20000730.github.io/categories/%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE/"/>
    
    
    <category term="CICD" scheme="http://jerry20000730.github.io/tags/CICD/"/>
    
  </entry>
  
  <entry>
    <title>部署SSL证书</title>
    <link href="http://jerry20000730.github.io/wiki/%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE/SSLBuild/"/>
    <id>http://jerry20000730.github.io/wiki/%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE/SSLBuild/</id>
    <published>2024-10-27T07:00:47.000Z</published>
    <updated>2024-10-27T07:00:47.000Z</updated>
    
    <content type="html"><![CDATA[<!-- toc --><ul><li><a href="#prerequisite">Prerequisite</a></li><li><a href="#------------">申请免费证书 (腾讯云)</a></li><li><a href="#--ssl---nginx-">安装SSL证书（Nginx）</a><ul><li><a href="#--ssl--">下载SSL文件</a></li><li><a href="#-------">登录远程服务器</a></li></ul></li><li><a href="#reference">Reference</a></li></ul><!-- tocstop --><h1 id="prerequisite">Prerequisite</h1><ol type="1"><li>一个域名</li><li>Nginx服务器</li></ol><h1 id="申请免费证书-腾讯云">申请免费证书 (腾讯云)</h1><ol type="1"><li>登录 <a href="https://console.cloud.tencent.com/ssl">SSL证书控制台</a>，进入<strong>我的证书</strong>页面，并单击<strong>申请免费证书</strong>。</li><li>填写证书申请表单，如下图所示： <imgsrc="/images/SSL/free_certificate.png"alt="apply for free certificate at Tencent Cloud" /> 其中：</li></ol><ul><li>证书绑定域名：网站域名</li><li>域名验证方式：一般选手动就可以，然后到域名解析商配置一下，因为本人是腾讯云买的，就比较方便，只需要到<ahref="https://console.cloud.tencent.com/cns/domains">https://console.cloud.tencent.com/cns/domains</a><ul><li>详情参考：<ahref="https://cloud.tencent.com/document/product/400/54500">https://cloud.tencent.com/document/product/400/54500</a></li></ul></li><li>申请邮箱：请输入您的邮箱地址。</li><li>算法选择：RSA就行</li></ul><h1 id="安装ssl证书nginx">安装SSL证书（Nginx）</h1><p>以下针对于使用Nginx进行反向代理部署的服务器</p><h2 id="下载ssl文件">下载SSL文件</h2><p>等待审核通过之后，点击下载按钮并获取SSL证书 <imgsrc="/images/SSL/download_button.png" alt="click download" />依据不同云服务器商要求下载对应版本（我下的是Nginx版本） <imgsrc="/images/SSL/download_version.png"alt="choose SSL download version" /></p><p><strong>文件夹中会含有以下几个文件：</strong></p><p><strong>证书文件</strong>：xxx.crt 证书文件</p><p><strong>密钥文件</strong>：xxx.key 私钥文件</p><p><strong>CSR文件</strong>：xxx.csr 文件</p><p><strong>PEM文件</strong>: xxx.pem 文件</p><p>我们只需要<code>.crt</code>和<code>.key</code>文件即可</p><h2 id="登录远程服务器">登录远程服务器</h2><p>WinSCP/PuTTY/我喜欢用Termius</p><ol type="1"><li><p>将已获取到的 cloud.tencent.com_bundle.crt 证书文件和cloud.tencent.com.key 私钥文件从本地目录拷贝到轻量应用服务器 Nginx默认配置文件目录中</p></li><li><p>输入grep命令获取nginx配置目录（知道的略过这步）<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find / | grep nginx.conf</span><br></pre></td></tr></table></figure></p></li><li><p>然后去配置文件<code>nginx.conf</code>或者<code>site-enabled/default</code>(我是后者)配置文件增加下列行数<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">server &#123;</span><br><span class="line">    listen 443 ssl default_server;</span><br><span class="line">    listen [::]:443 ssl default_server;</span><br><span class="line">    ssl_certificate cert/tragicmaster.website_bundle.crt;</span><br><span class="line">    ssl_certificate_key cert/tragicmaster.website.key;</span><br><span class="line">    ssl_session_timeout 5m;</span><br><span class="line">    ssl_ciphers ECDHE-RSA-AES128-GCM-SHA256:ECDHE:ECDH:AES:HIGH:!NULL:!aNULL:!MD5:!ADH:!RC4;</span><br><span class="line">    ssl_protocols TLSv1 TLSv1.1 TLSv1.2;</span><br><span class="line">    ssl_prefer_server_ciphers on;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p></li><li><p>保存并使用以下命令检测nginx配置是否正确 <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nginx -t</span><br></pre></td></tr></table></figure> 如果返回<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">nginx: the configuration file /etc/nginx/nginx.conf syntax is ok</span><br><span class="line">nginx: configuration file /etc/nginx/nginx.conf test is successful</span><br></pre></td></tr></table></figure> 然后重新加载nginx (非常重要！不然换证书的时候容易检测不到)<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nginx -s reload</span><br></pre></td></tr></table></figure></p></li><li><p>登录域名https://tragicmaster.website左上角成功变锁！</p></li></ol><h1 id="reference">Reference</h1><ol type="1"><li>Nginx服务器证书安装 <ahref="https://cloud.tencent.com/document/product/1207/47027">https://cloud.tencent.com/document/product/1207/47027</a></li><li>linux下查看nginx的安装路径 <ahref="https://blog.csdn.net/sinat_22387459/article/details/115007510">https://blog.csdn.net/sinat_22387459/article/details/115007510</a></li><li>Nginx 安装 SSL 配置 HTTPS超详细完整全过程 <ahref="https://developer.aliyun.com/article/761236">https://developer.aliyun.com/article/761236</a></li></ol>]]></content>
    
    
    <summary type="html">记录一下SSL证书配置（SSL Certificate Deployment）</summary>
    
    
    
    <category term="环境配置" scheme="http://jerry20000730.github.io/categories/%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE/"/>
    
    
    <category term="SSL" scheme="http://jerry20000730.github.io/tags/SSL/"/>
    
  </entry>
  
  <entry>
    <title>最长回文子串问题的解法</title>
    <link href="http://jerry20000730.github.io/wiki/%E7%AE%97%E6%B3%95/%E7%AE%97%E6%B3%95/longest-palindrome/"/>
    <id>http://jerry20000730.github.io/wiki/%E7%AE%97%E6%B3%95/%E7%AE%97%E6%B3%95/longest-palindrome/</id>
    <published>2024-10-22T05:19:22.000Z</published>
    <updated>2024-10-22T05:19:22.000Z</updated>
    
    <content type="html"><![CDATA[<!-- toc --><ul><li><a href="#----">问题分析</a></li><li><a href="#----">判断方法</a></li><li><a href="#------">中心拓展方法</a></li><li><a href="#--------">二维动态规划方法</a></li></ul><!-- tocstop --><h2 id="问题分析">问题分析</h2><p>力扣链接：<ahref="https://leetcode.cn/problems/longest-palindromic-substring/description">https://leetcode.cn/problems/longest-palindromic-substring/description</a></p><p>给你一个字符串<code>s</code>，找到<code>s</code>种最长的回文子串 例如<code>s = "babbad"</code> 的最长回文子串是<code>abba</code>，长度为4</p><h2 id="判断方法">判断方法</h2><p>从两边向中间，或者中间向两边拓展，不断比较头尾字符是否相同即可</p><h2 id="中心拓展方法">中心拓展方法</h2><p>思路：遍历每一个字符，向两百年拓展找到一起为中心的最长回文子串，所有找到的回文子串的最大长度即所求</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">longestPalindrome</span>(<span class="params">self, s: <span class="built_in">str</span></span>) -&gt; <span class="built_in">str</span>:</span><br><span class="line">        longest = <span class="string">&quot;&quot;</span></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(s)):</span><br><span class="line">            <span class="comment"># odd</span></span><br><span class="line">            p = self.getPalindrome(s, i, i)</span><br><span class="line">            <span class="keyword">if</span> <span class="built_in">len</span>(p) &gt; <span class="built_in">len</span>(longest):</span><br><span class="line">                longest = p</span><br><span class="line">            </span><br><span class="line">            <span class="comment"># even</span></span><br><span class="line">            p = self.getPalindrome(s, i, i+<span class="number">1</span>)</span><br><span class="line">            <span class="keyword">if</span> <span class="built_in">len</span>(p) &gt; <span class="built_in">len</span>(longest):</span><br><span class="line">                longest = p</span><br><span class="line">            </span><br><span class="line">        <span class="keyword">return</span> longest</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">getPalindrome</span>(<span class="params">self, s: <span class="built_in">str</span>, left: <span class="built_in">int</span>, right: <span class="built_in">int</span></span>) -&gt; <span class="built_in">str</span>:</span><br><span class="line">        <span class="keyword">while</span> left &gt;= <span class="number">0</span> <span class="keyword">and</span> right &lt; <span class="built_in">len</span>(s) <span class="keyword">and</span> s[left] == s[right]:</span><br><span class="line">            left -= <span class="number">1</span></span><br><span class="line">            right += <span class="number">1</span></span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> s[left+<span class="number">1</span>:right]</span><br></pre></td></tr></table></figure><h2 id="二维动态规划方法">二维动态规划方法</h2><p>回文串两边加上两个相同字符，会变成一个新的回文串，建立二维数组dp，找出所有的回文子串，<code>dp[i][j]</code>记录子串i到j是否为回文串</p><ol type="1"><li>初始化dp数组，所有一个字母都是回文串，所以<code>dp[i][i] = True</code></li><li>得出递推关系：<ul><li>如果<code>s[i]</code>和<code>s[j]</code>相等，并且子串<code>dp[i+1][j-1] = True</code>，那么<code>dp[i][j]</code>也为true</li><li>不相等，直接False</li></ul></li></ol><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">longestPalindrome</span>(<span class="params">self, s: <span class="built_in">str</span></span>) -&gt; <span class="built_in">str</span>:</span><br><span class="line">        n = <span class="built_in">len</span>(s)</span><br><span class="line">        memo = [[<span class="literal">None</span>] * n <span class="keyword">for</span> _ <span class="keyword">in</span> <span class="built_in">range</span>(n)]</span><br><span class="line">        max_length = <span class="number">1</span></span><br><span class="line">        longest_start = <span class="number">0</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">def</span> <span class="title function_">dp</span>(<span class="params">i, j</span>):</span><br><span class="line">            <span class="keyword">nonlocal</span> max_length, longest_start, memo</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> i &gt;= j:</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line">            <span class="keyword">if</span> memo[i][j] <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span>:</span><br><span class="line">                <span class="keyword">return</span> memo[i][j]</span><br><span class="line">            </span><br><span class="line">            <span class="keyword">if</span> s[i] == s[j] <span class="keyword">and</span> dp(i+<span class="number">1</span>, j-<span class="number">1</span>):</span><br><span class="line">                memo[i][j] = <span class="literal">True</span></span><br><span class="line">                <span class="keyword">if</span> j-i+<span class="number">1</span> &gt; max_length:</span><br><span class="line">                    max_length = j-i+<span class="number">1</span></span><br><span class="line">                    longest_start = i</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                memo[i][j] = <span class="literal">False</span></span><br><span class="line">            <span class="keyword">return</span> memo[i][j]</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(n):</span><br><span class="line">            <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(i, n):</span><br><span class="line">                dp(i, j)</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> s[longest_start:longest_start+max_length]</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">本文记录最长回文子串问题的几种解决方法</summary>
    
    
    
    <category term="Algorithm" scheme="http://jerry20000730.github.io/categories/Algorithm/"/>
    
    
    <category term="Algorithm" scheme="http://jerry20000730.github.io/tags/Algorithm/"/>
    
  </entry>
  
  <entry>
    <title>Go Programming Languages - Goroutines</title>
    <link href="http://jerry20000730.github.io/wiki/%E7%A8%8B%E5%BA%8F%E8%AF%AD%E8%A8%80/Go/Go_goroutine/"/>
    <id>http://jerry20000730.github.io/wiki/%E7%A8%8B%E5%BA%8F%E8%AF%AD%E8%A8%80/Go/Go_goroutine/</id>
    <published>2024-09-03T13:21:01.000Z</published>
    <updated>2024-09-03T13:21:01.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="how-to-write-goroutine">How to write Goroutine</h2><p>任何函数只需加上<code>go</code>就能送给调度器运行，不需要像python,js一样区分是否为异步函数。</p><p>Very basic Goroutine usage: <figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">for</span> i:=<span class="number">0</span>; i&lt;<span class="number">1000</span>; i++ &#123;</span><br><span class="line">        <span class="keyword">go</span> <span class="function"><span class="keyword">func</span><span class="params">(i <span class="type">int</span>)</span></span> &#123;</span><br><span class="line">            <span class="keyword">for</span> &#123;</span><br><span class="line">                fmt.Printf(<span class="string">&quot;hello from goroutine %d\n&quot;</span>, i)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;(i)</span><br><span class="line">    &#125;</span><br><span class="line">    time.Sleep(time.Millisecond)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>注意 不能这么写 <figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">for</span> i:=<span class="number">0</span>; i&lt;<span class="number">1000</span>; i++ &#123;</span><br><span class="line">        <span class="keyword">go</span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;</span><br><span class="line">            <span class="keyword">for</span> &#123;</span><br><span class="line">                fmt.Printf(<span class="string">&quot;hello from goroutine %d\n&quot;</span>, i)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    time.Sleep(time.Millisecond)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure> 因为循环变量并不支持被延迟/动态计算</p><h2 id="what-is-co-routine-协程">What is Co-routine (协程)</h2><ul><li>lightweight thread (轻量级线程)</li><li>编译器/解释器/虚拟机层面的多任务</li><li>多个协程可能在一个或多个线程上运行</li><li>子程序（Subroutines）是协程的特例，协程更加广泛</li></ul><h2 id="goroutine可能得切换点">Goroutine可能得切换点</h2><ul><li>I/O, select</li><li>channel</li><li>等待锁</li><li><code>runtime.Gosched()</code></li></ul>]]></content>
    
    
    <summary type="html">A goroutine is a lightweight thread managed by Go runtime</summary>
    
    
    
    <category term="Programming Languages" scheme="http://jerry20000730.github.io/categories/Programming-Languages/"/>
    
    
    <category term="Go" scheme="http://jerry20000730.github.io/tags/Go/"/>
    
  </entry>
  
  <entry>
    <title>Go Programming Languages - Functional Programming</title>
    <link href="http://jerry20000730.github.io/wiki/%E7%A8%8B%E5%BA%8F%E8%AF%AD%E8%A8%80/Go/Go_lambda/"/>
    <id>http://jerry20000730.github.io/wiki/%E7%A8%8B%E5%BA%8F%E8%AF%AD%E8%A8%80/Go/Go_lambda/</id>
    <published>2024-09-03T12:46:13.000Z</published>
    <updated>2024-09-03T12:46:13.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="functional-programming-in-go-closure-闭包">FunctionalProgramming in GO: Closure (闭包)</h2><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">adder</span><span class="params">()</span></span> <span class="function"><span class="keyword">func</span><span class="params">(<span class="type">int</span>)</span></span> <span class="type">int</span> &#123;</span><br><span class="line">    sum := <span class="number">0</span></span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">func</span><span class="params">(v <span class="type">int</span>)</span></span> <span class="type">int</span> &#123;</span><br><span class="line">        sum += v</span><br><span class="line">        <span class="keyword">return</span> sum</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    a := adder()</span><br><span class="line">    <span class="keyword">for</span> i:=<span class="number">0</span>; i&lt;<span class="number">10</span>; i++ &#123;</span><br><span class="line">        fmt.Printf(<span class="string">&quot;0 + 1 + ... + %d = %d\n&quot;</span>, i, a(i))</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>闭包与Python类似，里面有函数体，函数体里有局部变量和自由变量（e.g.,<code>sum</code>）。</p><p>对应的Python闭包方式 <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">adder</span>():</span><br><span class="line">    <span class="built_in">sum</span> = <span class="number">0</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">f</span>(<span class="params">value</span>):</span><br><span class="line">        <span class="keyword">nonlocal</span> <span class="built_in">sum</span></span><br><span class="line">        <span class="built_in">sum</span> += value</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">sum</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> f</span><br></pre></td></tr></table></figure>其中<code>nonlocal</code>就是标准，表示该变量不是局部变量</p><h2 id="缺点">缺点</h2><p>但是 Go中的函数式编程因为不像Python一样不用限制类型（泛型的缺失，ducktyping），就会导致后续代码会很难维护</p><p>比如 <figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">var</span> list = []<span class="type">string</span>&#123;<span class="string">&quot;Orange&quot;</span>, <span class="string">&quot;Apple&quot;</span>, <span class="string">&quot;Banana&quot;</span>, <span class="string">&quot;Grape&quot;</span>&#125;</span><br><span class="line">    <span class="comment">// we are passing the array and a function as arguments to mapForEach method.</span></span><br><span class="line">    <span class="keyword">var</span> out = mapForEach(list, <span class="function"><span class="keyword">func</span><span class="params">(it <span class="type">string</span>)</span></span> <span class="type">int</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">len</span>(it)</span><br><span class="line">    &#125;)</span><br><span class="line">    fmt.Println(out) <span class="comment">// [6, 5, 6, 5]</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// The higher-order-function takes an array and a function as arguments</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">mapForEach</span><span class="params">(arr []<span class="type">string</span>, fn <span class="keyword">func</span>(it <span class="type">string</span>)</span></span> <span class="type">int</span>) []<span class="type">int</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> newArray = []<span class="type">int</span>&#123;&#125;</span><br><span class="line">    <span class="keyword">for</span> _, it := <span class="keyword">range</span> arr &#123;</span><br><span class="line">    <span class="comment">// We are executing the method passed</span></span><br><span class="line">    newArray = <span class="built_in">append</span>(newArray, fn(it))</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> newArray</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>如果想包装一下，给别人用，那就得用泛型了，不然别人要是想用<code>map[int]</code>，那不就得开发一个<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">mapInt64ForEach</span><span class="params">(arr []<span class="type">int64</span>, fn <span class="keyword">func</span>(it <span class="type">int64</span>)</span></span> <span class="type">int</span>) []<span class="type">int</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> newArray = []<span class="type">int</span>&#123;&#125;</span><br><span class="line">    <span class="keyword">for</span> _, it := <span class="keyword">range</span> arr &#123;</span><br><span class="line">    <span class="comment">// We are executing the method passed</span></span><br><span class="line">    newArray = <span class="built_in">append</span>(newArray, fn(it))</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> newArray</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h2 id="采用高阶函数的递归">采用高阶函数的递归</h2><p>借用 fibonacci 的实现我们简单地示例返回一个函数的方式来实现递归：<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">fibonacci</span><span class="params">()</span></span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span> <span class="type">int</span> &#123;</span><br><span class="line">    a, b := <span class="number">0</span>, <span class="number">1</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span> <span class="type">int</span> &#123;</span><br><span class="line">        a, b = b, a+b</span><br><span class="line">        <span class="keyword">return</span> a</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    f := fibonacci()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="number">10</span>; i++ &#123;</span><br><span class="line">        fmt.Println(f())</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 依次输出：1 1 2 3 5 8 13 21 34 55</span></span><br></pre></td></tr></table></figure></p><h2 id="延迟计算-delayed-calculating">延迟计算 Delayed Calculating</h2><p>使用高阶/匿名函数的一个重要用途是捕俘变量和延迟计算，也即所谓的惰性计算（Lazyevaluations）</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">doSth</span><span class="params">()</span></span>&#123;</span><br><span class="line">  <span class="keyword">var</span> err <span class="type">error</span></span><br><span class="line">  <span class="keyword">defer</span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">      <span class="built_in">println</span>(err.Error())</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;()</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">  err = io.EOF</span><br><span class="line">  <span class="keyword">return</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">doSth() <span class="comment">// printed: EOF</span></span><br></pre></td></tr></table></figure><p>在 <code>defer</code> 的高阶函数中，捕俘了外部作用域中的<code>err</code> 变量，doSth 的整个运行周期中对 <code>err</code>的设定，最终能够在 <code>defer</code>函数体中被正确计算得到。如果没有捕俘和延迟计算机制的话，高阶函数体中对<code>err</code> 的访问就只会得到 <code>nil</code> 值，因为这是捕俘时刻<code>err</code>的具体值。换句话说，在高阶函数中对外部作用域的访问是动态地延迟地计算的。</p>]]></content>
    
    
    <summary type="html">Golang Functional Programming in brief</summary>
    
    
    
    <category term="Programming Languages" scheme="http://jerry20000730.github.io/categories/Programming-Languages/"/>
    
    
    <category term="Go" scheme="http://jerry20000730.github.io/tags/Go/"/>
    
  </entry>
  
  <entry>
    <title>【C++】C++11 互斥量解决多线程数据共享问题</title>
    <link href="http://jerry20000730.github.io/wiki/%E7%A8%8B%E5%BA%8F%E8%AF%AD%E8%A8%80/C++/multi-threading2/"/>
    <id>http://jerry20000730.github.io/wiki/%E7%A8%8B%E5%BA%8F%E8%AF%AD%E8%A8%80/C++/multi-threading2/</id>
    <published>2024-09-02T15:18:56.000Z</published>
    <updated>2024-09-02T15:18:56.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="数据共享问题分析">数据共享问题分析</h2><p>在多个线程中共享数据时，需要注意线程安全问题。如果多个线程同时访问同一个变量，并且其中至少有一个线程对该变量进行了写操作，那么就会出现数据竞争问题。数据竞争可能会导致程序崩溃、产生未定义的结果，或者得到错误的结果。</p><p><em>为了避免数据竞争问题，需要使用同步机制来确保多个线程之间对共享数据的访问是安全的</em>。</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;thread&gt;</span></span></span><br><span class="line"><span class="type">int</span> shared_data = <span class="number">0</span>;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">func</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">100000</span>; ++i) &#123;</span><br><span class="line">        shared_data++;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="function">std::thread <span class="title">t1</span><span class="params">(func)</span></span>;</span><br><span class="line">    <span class="function">std::thread <span class="title">t2</span><span class="params">(func)</span></span>;</span><br><span class="line">    t1.<span class="built_in">join</span>();</span><br><span class="line">    t2.<span class="built_in">join</span>();</span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;shared_data = &quot;</span> &lt;&lt; shared_data &lt;&lt; std::endl;    </span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>上述代码中，由于 shared_data变量是全局变量，因此在两个线程中共享。对于这种共享的情况，需要使用互斥量等同步机制来确保多个线程之间对共享数据的访问是安全的。如果不使用同步机制，就会出现数据竞争问题，导致得到错误的结果。</p><p>常见的同步机制包括 1. 互斥锁 2. 条件变量 3. 原子操作</p><h3 id="互斥锁">互斥锁</h3><p>互斥量（mutex）是一种用于实现多线程同步的机制，用于确保多个线程之间对共享资源的访问互斥。互斥量通常用于保护共享数据的访问，以避免多个线程同时访问同一个变量或者数据结构而导致的数据竞争问题。</p><p>互斥量提供了两个基本操作： - <code>lock()</code> -<code>unlock()</code></p><p>当一个线程调用 <code>lock()</code>函数时，如果互斥量当前没有被其他线程占用，则该线程获得该互斥量的所有权，可以对共享资源进行访问。如果互斥量当前已经被其他线程占用，则调用<code>lock()</code> 函数的线程会被阻塞，直到该互斥量被释放为止。</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;thread&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;mutex&gt;</span></span></span><br><span class="line"><span class="type">int</span> shared_data = <span class="number">0</span>;</span><br><span class="line">std::mutex mtx;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">func</span><span class="params">(<span class="type">int</span> n)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">100000</span>; ++i) &#123;</span><br><span class="line">        mtx.<span class="built_in">lock</span>();</span><br><span class="line">        shared_data++;        </span><br><span class="line">        std::cout &lt;&lt; <span class="string">&quot;Thread &quot;</span> &lt;&lt; n </span><br><span class="line">        &lt;&lt; <span class="string">&quot; increment shared_data to &quot;</span> &lt;&lt; shared_data &lt;&lt; std::endl;</span><br><span class="line">        mtx.<span class="built_in">unlock</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="function">std::thread <span class="title">t1</span><span class="params">(func, <span class="number">1</span>)</span></span>;</span><br><span class="line">    <span class="function">std::thread <span class="title">t2</span><span class="params">(func, <span class="number">2</span>)</span></span>;</span><br><span class="line"></span><br><span class="line">    t1.<span class="built_in">join</span>();</span><br><span class="line">    t2.<span class="built_in">join</span>();    </span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;Final shared_data = &quot;</span> &lt;&lt; shared_data &lt;&lt; std::endl;    </span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="lock_guard-和-stdunique_lock"><code>lock_guard</code> 和<code>std::unique_lock</code></h3><p><code>std::lock_guard</code> 是 C++标准库中的一种互斥量封装类，用于保护共享数据，防止多个线程同时访问同一资源而导致的数据竞争问题。</p><p>std::lock_guard 的特点如下： -当构造函数被调用时，该互斥量会被自动锁定。 -当析构函数被调用时，该互斥量会被自动解锁。 -<code>std::lock_guard</code>对象不能复制或移动，因此它只能在局部作用域中使用。</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;thread&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;mutex&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> shared_data = <span class="number">0</span>;</span><br><span class="line">std::mutex mtx;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">func</span><span class="params">(<span class="type">int</span> n)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">100000</span>; ++i) &#123;</span><br><span class="line">        <span class="function">std::lock_guard&lt;std::mutex&gt; <span class="title">lock</span><span class="params">(mtx)</span></span>; <span class="comment">// 使用 lock_guard 自动管理锁</span></span><br><span class="line">        shared_data++;        </span><br><span class="line">        std::cout &lt;&lt; <span class="string">&quot;Thread &quot;</span> &lt;&lt; n </span><br><span class="line">                  &lt;&lt; <span class="string">&quot; increment shared_data to &quot;</span> &lt;&lt; shared_data &lt;&lt; std::endl;</span><br><span class="line">        <span class="comment">// lock_guard 在作用域结束时自动解锁</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="function">std::thread <span class="title">t1</span><span class="params">(func, <span class="number">1</span>)</span></span>;</span><br><span class="line">    <span class="function">std::thread <span class="title">t2</span><span class="params">(func, <span class="number">2</span>)</span></span>;</span><br><span class="line"></span><br><span class="line">    t1.<span class="built_in">join</span>();</span><br><span class="line">    t2.<span class="built_in">join</span>();    </span><br><span class="line"></span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;Final shared_data = &quot;</span> &lt;&lt; shared_data &lt;&lt; std::endl;    </span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><code>std::unique_lock</code> 是 C++标准库中提供的一个互斥量封装类，用于在多线程程序中对互斥量进行加锁和解锁操作。它的主要特点是可以对互斥量进行更加灵活的管理，包括延迟加锁、条件变量、超时等。</p><p><code>std::unique_lock</code> 提供了以下几个成员函数： -<code>lock()</code>：尝试对互斥量进行加锁操作，如果当前互斥量已经被其他线程持有，则当前线程会被阻塞，直到互斥量被成功加锁。-<code>try_lock()</code>：尝试对互斥量进行加锁操作，如果当前互斥量已经被其他线程持有，则函数立即返回false，否则返回 true。 -<code>try_lock_for(const std::chrono::duration&lt;Rep, Period&gt;&amp; rel_time)</code>：尝试对互斥量进行加锁操作，如果当前互斥量已经被其他线程持有，则当前线程会被阻塞，直到互斥量被成功加锁，或者超过了指定的时间。-<code>try_lock_until(const std::chrono::time_point&lt;Clock, Duration&gt;&amp; abs_time)</code>：尝试对互斥量进行加锁操作，如果当前互斥量已经被其他线程持有，则当前线程会被阻塞，直到互斥量被成功加锁，或者超过了指定的时间点。- <code>unlock()</code>：对互斥量进行解锁操作。</p>]]></content>
    
    
    <summary type="html">在多个线程中共享数据时，需要注意线程安全问题。如果多个线程同时访问同一个变量，并且其中至少有一个线程对该变量进行了写操作，那么就会出现数据竞争问题</summary>
    
    
    
    <category term="Programming Languages" scheme="http://jerry20000730.github.io/categories/Programming-Languages/"/>
    
    
    <category term="C++ Multithreading" scheme="http://jerry20000730.github.io/tags/C-Multithreading/"/>
    
  </entry>
  
  <entry>
    <title>【C++】C++11 Thread线程库的基本使用</title>
    <link href="http://jerry20000730.github.io/wiki/%E7%A8%8B%E5%BA%8F%E8%AF%AD%E8%A8%80/C++/multi-threading1/"/>
    <id>http://jerry20000730.github.io/wiki/%E7%A8%8B%E5%BA%8F%E8%AF%AD%E8%A8%80/C++/multi-threading1/</id>
    <published>2024-09-02T15:10:31.000Z</published>
    <updated>2024-09-02T15:10:31.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="创建线程">创建线程</h1><p>C++11中，我们可以使用函数指针、函数对象或lambda表达式来实现。创建线程的基本语法如下：</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;thread&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function">std::thread <span class="title">t</span><span class="params">(function_name, args...)</span></span>;</span><br></pre></td></tr></table></figure><ul><li><p><code>function_name</code>是线程入口点的函数或可调用对象</p></li><li><p><code>args...</code> 是传递给函数的参数</p></li></ul><p>创建线程后，我们可以使用<code>t.join()</code>等待线程完成，或者使用<code>t.detach()</code>分离线程，让它在后台运行。</p><p>Example: <figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;thread&gt;</span></span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">print_message</span><span class="params">()</span> </span>&#123;    </span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;Hello, world!&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="function">std::thread <span class="title">t</span><span class="params">(print_message)</span></span>;    </span><br><span class="line">    t.<span class="built_in">join</span>();    </span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h1 id="传递参数">传递参数</h1><p>使用函数参数、全局变量、引用都可以向线程传递参数 <figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;thread&gt;</span></span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">print_message</span><span class="params">(<span class="type">const</span> std::string&amp; message)</span> </span>&#123;</span><br><span class="line">    std::cout &lt;&lt; message &lt;&lt; std::endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">increment</span><span class="params">(<span class="type">int</span>&amp; x)</span> </span>&#123;</span><br><span class="line">    ++x;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    std::string message = <span class="string">&quot;Hello, world!&quot;</span>;    </span><br><span class="line">    <span class="function">std::thread <span class="title">t</span><span class="params">(print_message, message)</span></span>;    </span><br><span class="line">    t.<span class="built_in">join</span>();    </span><br><span class="line">    </span><br><span class="line">    <span class="type">int</span> x = <span class="number">0</span>;    </span><br><span class="line">    <span class="function">std::thread <span class="title">t2</span><span class="params">(increment, std::ref(x))</span></span>;    </span><br><span class="line">    t2.<span class="built_in">join</span>();    </span><br><span class="line">    std::cout &lt;&lt; x &lt;&lt; std::endl;    </span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>需要注意的是，当我们使用引用传递参数时，我们需要使用<code>std::ref</code> 来包装引用，否则编译器会报错。</p><p>在 C++ 中，<code>std::thread</code>构造函数模板接受可调用对象和参数时，会复制传递给它们的参数，防止因多个线程同时修改同一数据而可能引起的访问冲突或数据竞争。然而，在某些情况下，你实际上希望线程直接作用于原始变量或对象，而不是副本，这里的<code>increment</code> 函数设计为修改传递给它的原始整数</p><h1 id="等待线程完成">等待线程完成</h1><p>使用<code>t.join()</code>方法来等待线程完成</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;thread&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">print_message</span><span class="params">(<span class="type">const</span> std::string&amp; message)</span> </span>&#123;    </span><br><span class="line">    std::cout &lt;&lt; message &lt;&lt; std::endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;    </span><br><span class="line">    <span class="function">std::thread <span class="title">t1</span><span class="params">(print_message, <span class="string">&quot;Thread 1&quot;</span>)</span></span>;    </span><br><span class="line">    <span class="function">std::thread <span class="title">t2</span><span class="params">(print_message, <span class="string">&quot;Thread 2&quot;</span>)</span></span>;    </span><br><span class="line">    t1.<span class="built_in">join</span>();    </span><br><span class="line">    t2.<span class="built_in">join</span>();    </span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;All threads joined&quot;</span> &lt;&lt; std::endl;    </span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="分离线程">分离线程</h1><p>与 <code>join</code>不同，我们可能不需要等待线程完成，而是希望它在后台运行</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;thread&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">print_message</span><span class="params">(<span class="type">const</span> std::string&amp; message)</span> </span>&#123;    </span><br><span class="line">    std::cout &lt;&lt; message &lt;&lt; std::endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;    </span><br><span class="line">    <span class="function">std::thread <span class="title">t</span><span class="params">(print_message, <span class="string">&quot;Thread 1&quot;</span>)</span></span>;    </span><br><span class="line">    t.<span class="built_in">detach</span>();    </span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;Thread detached&quot;</span> &lt;&lt; std::endl;    </span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="joinable"><code>joinable()</code></h1><p>joinable()方法返回一个布尔值，如果线程可以被join()或detach()，则返回true，否则返回false。如果我们试图对一个不可加入的线程调用join()或detach()，则会抛出一个std::system_error异常。</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;thread&gt;</span></span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">foo</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;Thread started&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="function">std::thread <span class="title">t</span><span class="params">(foo)</span></span>;</span><br><span class="line">    <span class="keyword">if</span> (t.<span class="built_in">joinable</span>()) &#123;</span><br><span class="line">        t.<span class="built_in">join</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;Thread joined&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="线程函数中的数据未定义错误">线程函数中的数据未定义错误</h1><h2 id="传递临时变量">传递临时变量</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;thread&gt;</span></span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">foo</span><span class="params">(<span class="type">int</span>&amp; x)</span> </span>&#123;</span><br><span class="line">    x += <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="function">std::thread <span class="title">t</span><span class="params">(foo, <span class="number">1</span>)</span></span>; <span class="comment">// 传递临时变量</span></span><br><span class="line">    t.<span class="built_in">join</span>();</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>我们创建了一个名为<code>t</code>的线程，将<code>foo</code>函数以及一个临时变量<code>1</code>作为参数传递给（int引用）。这样会导致在线程函数执行时，临时变量<code>1</code>被销毁，从而导致未定义行为。</p><h2id="传递指向局部变量的指针或引用">传递指向局部变量的指针或引用：</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;thread&gt;</span></span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">foo</span><span class="params">(<span class="type">int</span>* ptr)</span> </span>&#123;</span><br><span class="line">    std::cout &lt;&lt; *ptr &lt;&lt; std::endl; <span class="comment">// 访问已经被销毁的指针</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="type">int</span> x = <span class="number">1</span>;</span><br><span class="line">    <span class="function">std::thread <span class="title">t</span><span class="params">(foo, &amp;x)</span></span>; <span class="comment">// 传递指向局部变量的指针</span></span><br><span class="line">    t.<span class="built_in">join</span>();</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="section"></h2><h1 id="reference">Reference</h1><ol type="1"><li><a href="http://www.seestudy.cn/?list_9/31.html">C++11Thread线程库的基本使用</a></li></ol>]]></content>
    
    
    <summary type="html">C++11 Thead线程库的基本使用，包括如何创建线程、启动线程、等待线程完成以及如何分离线程。</summary>
    
    
    
    <category term="Programming Languages" scheme="http://jerry20000730.github.io/categories/Programming-Languages/"/>
    
    
    <category term="C++ Multithreading" scheme="http://jerry20000730.github.io/tags/C-Multithreading/"/>
    
  </entry>
  
  <entry>
    <title>【C++】如何在C++中实现单例模式</title>
    <link href="http://jerry20000730.github.io/wiki/%E7%A8%8B%E5%BA%8F%E8%AF%AD%E8%A8%80/C++/singleton/"/>
    <id>http://jerry20000730.github.io/wiki/%E7%A8%8B%E5%BA%8F%E8%AF%AD%E8%A8%80/C++/singleton/</id>
    <published>2024-09-02T15:02:49.000Z</published>
    <updated>2024-09-02T15:02:49.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="懒汉式单例模式lazy-singleton">1. 懒汉式单例模式（LazySingleton）</h2><p>懒汉式单例牧师只有在第一次使用的时候才创建实例</p><h3 id="实现代码">1.1 实现代码</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;mutex&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Singleton</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="comment">// 获取唯一实例的静态方法</span></span><br><span class="line">    <span class="function"><span class="type">static</span> Singleton* <span class="title">getInstance</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    </span><br><span class="line">        std::<span class="built_in">call_once</span>(initFlag, []() &#123;</span><br><span class="line">            instance = <span class="keyword">new</span> <span class="built_in">Singleton</span>();</span><br><span class="line">        &#125;);</span><br><span class="line">        <span class="keyword">return</span> instance;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 删除复制构造函数和赋值操作符，防止复制实例</span></span><br><span class="line">    <span class="built_in">Singleton</span>(<span class="type">const</span> Singleton&amp;) = <span class="keyword">delete</span>;</span><br><span class="line">    Singleton&amp; <span class="keyword">operator</span>=(<span class="type">const</span> Singleton&amp;) = <span class="keyword">delete</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 一个测试方法</span></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">showMessage</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        std::cout &lt;&lt; <span class="string">&quot;Hello from Singleton!&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="comment">// 私有构造函数，防止外部实例化</span></span><br><span class="line">    <span class="built_in">Singleton</span>() &#123;&#125;</span><br><span class="line">    <span class="comment">// 静态成员变量保存唯一实例</span></span><br><span class="line">    <span class="type">static</span> Singleton* instance;</span><br><span class="line">    <span class="comment">// std::call_once需要的标志，用于初始化一次性操作</span></span><br><span class="line">    <span class="type">static</span> std::once_flag initFlag;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 静态成员变量初始化</span></span><br><span class="line">Singleton* Singleton::instance = <span class="literal">nullptr</span>;</span><br><span class="line">std::once_flag Singleton::initFlag;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    Singleton* singleton = Singleton::<span class="built_in">getInstance</span>();</span><br><span class="line">    singleton-&gt;<span class="built_in">showMessage</span>();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>其中，<code>getInstance</code>方法：使用<code>std::call_once</code>来确保<code>instance</code>只被初始化一次，即使在多线程环境下也是安全的。</p><h2 id="饿汉式单例模式">2. 饿汉式单例模式</h2><p>饿汉式单例模式在类加载的时候就创建好一个静态实例，不管之后是否会用到这个实例。在多线程下是线程安全的。</p><h3 id="实现代码-1">2.1 实现代码</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Singleton</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="comment">// 获取唯一实例的静态方法</span></span><br><span class="line">    <span class="function"><span class="type">static</span> Singleton* <span class="title">getInstance</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> instance;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 删除复制构造函数和赋值操作符，防止复制实例</span></span><br><span class="line">    <span class="built_in">Singleton</span>(<span class="type">const</span> Singleton&amp;) = <span class="keyword">delete</span>;</span><br><span class="line">    Singleton&amp; <span class="keyword">operator</span>=(<span class="type">const</span> Singleton&amp;) = <span class="keyword">delete</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 一个测试方法</span></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">showMessage</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        std::cout &lt;&lt; <span class="string">&quot;Hello from Singleton!&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="comment">// 私有构造函数，防止外部实例化</span></span><br><span class="line">    <span class="built_in">Singleton</span>() &#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 静态成员变量保存唯一实例</span></span><br><span class="line">    <span class="type">static</span> Singleton* instance;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 静态成员变量初始化</span></span><br><span class="line">Singleton* Singleton::instance = <span class="keyword">new</span> <span class="built_in">Singleton</span>();</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    Singleton* singleton = Singleton::<span class="built_in">getInstance</span>();</span><br><span class="line">    singleton-&gt;<span class="built_in">showMessage</span>();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="reference">Reference</h2><ol type="1"><li>【字节跳动】如何在C++中实现单例模式？<span class="citation"data-cites="Lynn77-QAQ">@Lynn77-QAQ</span> <ahref="https://www.bilibili.com/video/BV1NWs4ezEn5/?spm_id_from=333.1007.top_right_bar_window_history.content.click&amp;vd_source=243ce9423fb82c395b4e9e6bf321ae0c">https://www.bilibili.com/video/BV1NWs4ezEn5/?spm_id_from=333.1007.top_right_bar_window_history.content.click&amp;vd_source=243ce9423fb82c395b4e9e6bf321ae0c</a></li></ol>]]></content>
    
    
    <summary type="html">C++实现单例模式为常考题。</summary>
    
    
    
    <category term="Programming Languages" scheme="http://jerry20000730.github.io/categories/Programming-Languages/"/>
    
    
    <category term="C++ singleton" scheme="http://jerry20000730.github.io/tags/C-singleton/"/>
    
  </entry>
  
  <entry>
    <title>Hexo搭建网站</title>
    <link href="http://jerry20000730.github.io/wiki/%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE/HexoBuild/"/>
    <id>http://jerry20000730.github.io/wiki/%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE/HexoBuild/</id>
    <published>2024-08-04T08:32:28.000Z</published>
    <updated>2024-08-04T08:32:28.000Z</updated>
    
    <content type="html"><![CDATA[<div class="hbe hbe-container" id="hexo-blog-encrypt" data-wpm="Oh, this is an invalid password. Check and try again, please." data-whm="OOPS, these decrypted content may changed, but you can still have a look.">  <script id="hbeData" type="hbeData" data-hmacdigest="f91e8c33f6e6061d07ccef4442c95595755cc577b0c7fe9a46e3cb1a57405c21">15e5c101571594c61d414e3197635cc0622471a91d8994a1300b7d2a2602c0e6b82dccfea0989838d80c65950f37ebf770b253a3b437888c617b7daadb52a66cbb90bf2843a79edd62d78e30f76f4a884f43c4859c4a4b57443b96b0d46bfd5ce2dc68663dc78ae07f9c55bd7ca7219ea449f070c767dbe3d3c3d7d6648d01d2c56634696e203c15bf1de732a965fafd65c5494ca90788913e48538deee68b17465b6ad3e3303cfdebd253ccb26adc14e4e11b557eebdb447d91748d85f0716504653b04f118cf9b9df6737efd9a49cba0ee6f92531c318a6d0d878cd2c09e74e57510224215e4f96db31aa2ee7ed7bd1590118fbfb19102358b8a817d36d7f8fb7f85f894489ba5ee950a1e492204eb281ded59ea748193e889ad9b6182d224f766a670acb344733c781e77a66cbcef79327005ec563f18f98e80dabfbeb69a0c9eff58a534b971206b848876ed92a4ba774b755f770a207dd4af50ad466c6c86b2a8566efa56fe2d84ae040dd39f6e991b508e93cc1e56f215433125975cc6058de64209c901fe25a6c1d46c75924c611782f82bbb86c6bff3ee299fde10ca6dde5d726e72825708b5c3c97ebd04edbb2dc93848bc42fe72d1312c1895aa86150e5a394888919e759dcbfa2b6525d834fdfb9f15aa7c31b2ba1c02273689cb73c265e70d23f05182d133ca164d71ce0af0007efebffa8656829bf71333dc7c68e5ad822fbbd3372ed09a04b6763878e126b7b259e14c0862806df717205c92678bc70ed00ab7caedc60d544e81afe8c4bf728bb5f702f2bff7d0df0bad51f69c2396ef073caff2a0a52cac3cdfe8ca1f4872fd11adb577c722559f208d6651d35cc3e62edd4e20ba9c1e4bfce08d488005e050831ce9cce90f1c7ccdab4ec07bde8d1ea19c50874a2cb3b40750ee9eb54b12b5f08d9f02aae9c1a77f1f712f543edc6cf4fe81835db4af37591f39d742d4ec70544229a4c9e857ffd71924a2f7fde04e638323fb8006a805d959cf36bc3215e5847d66044a2ef3a8b62490a9dc630c3d510708b68cf1acc967856af2a8da295192cf07f7369ce191b8ec14094d4a7b5a907d58975fb1e2c943297dbdb7f01fad962cb31398a327b1669f2fac124737814a63e04273b6217ed6f8229d51ec39fa8f0e908d2a8263d01bd6d9cc569505838151752145ec61caa3bced370248c03e501032fddae4c5b8dab41232808e7e7d290514173b251f9008a379cfc2bb326c14c8f4169ef2b05403f2a4736ea4ba44c4bfe28dbae5bef8f166e0e3bee662dadc30487b0992e0b41c546129d6926aaaa1e8c510fe64109816dc10006e5f4424deb22eceda613877db8210d9c4a3e1eabe148b6e8e0680a78b7524458c7d9b8a8174729a105268207e71c908ef268e2a814cdba73811501771b7128d298b642496f4c178732d1d86587d78214b1f5ec503279f88b7d615b7b02d396816f58efe12f3402d83817f1c19a3d41ad0665d3caad2544b9ed32fde094892e01d07714aa6f58a9382367abf7f16d85efbe28f4f91bb8783a528a8c713f76aa5836d2dc6d0b1ef8f8356f947ff847a19c77b1c6540ded17548c9e59b580ca80d07aa31fa4dcb226ed1d09a3b39b97f976833d44ccc32b1303fc09111eb6363b00698fd5c17366bbc52c15839db66c1b2ee23614434144a954a56249294490882954acc721ca05a975dd5822a992e7e82cf615b9981a8277049879c8fa4ee013fdcebed29f8220c5cf1fbaec8703d6578a8abe22417a00daa282b11c95403476a287ef6f5d64e8a49b479eadea71bfe60b2e6e3277454427014fab6e5c4f1c4afcb69d47953582125e6029c0dfeb7b82536c13af8a85f741df7d34baa482ad538573b965023becbe760238f6272da32d45cab0307f28b93fd63f873d047d0452c6cef36d44a5dd1c7235708aa81e4cc4b5cfa4c230813fa49b7ae3486e3696751ff8db59db7b9bb12720b59238552e8ee5a8d4a13e773a9d18770030a23086002de711c2b003b20b28f28e1d141ca7c5295ff6818dc418917ea9beab90b3bc82e442f55bda78afea73689e74d11ec939165b33d584b34a1bf04518dda286767b0286c857895450305b587c8f6e0a0419d9d9aa7f59ef716d1aa9fe71f184d03f7ab2ed323ff8f099908eff4047a0fcf0004f5627ad21f420f5e29edf4fcbfaadfd569f2da22bbb599dc3f7c7b5762eb36599894416a27ad19f174d956cb3f767ff46a0d150757ceeba53c3432d2fd7ce3b05fead3147741881517296a85b84a88f57f1f8b662d98f9602186c05fed46d3d49a59f1c6b75ba2cfb073190244d295ac5c92e864bc9d91d8eaa4a14b57aae1ea98c8f2f484d001be8bcce2ee5401ee75113a94e0f9a0a3f345e3979dffe9a926474ae848019704a287177cce393dad7a39702a63c02ad34bc47ee0488cf7e274579709ff989fe21fa512b5deb18a780fcf1666b549a69900fe41bf682095581531a5a3662ad55c12d80223c523f986d15a8f5a49c03b92875be621468c8b0b44ec50456745a757e3397aea3d191d054fe5e9803d6fbb5c409419849077c9fc15c6324c4dd71da1bf8a8e28ebf9b6ac67e83160b77773fe94a2770901c1e8f1e233d4286207812dd38fb1e286ad0b87b9db80909890593e8308e0d1a0a83b2a55a2599556817332ba9ee5cff8eaa3437e003055a3a07264fa528480f9daa1722e25ca5d5227b84b127ebe251bfdf1c91f32083a578e4eb9b8dad2e0fa2f257a3efb41779d1f0a000fd4a262c6f6c68539509fdafc2c6c0f07a99eda409ab87b0f2670c479179be725cf7cf8513c5a2c91913508453e1e64d5253741853997fea6094ba174d5488a849456120de415a9edbb1096eeabf97042ba68a58213e6396d00fb70f1573781805e03ce4127205a9f69e1f7d493035cfdac8dd9cabcec21ae575c9f8d685a632826deaba6278af87ee81421a457f145a930a333891d478e31c4585630ade6a26c6052eef5331d0e8b21a32ada3f57911e08d3256581c85a9b558551355238babfafb1501f353a38bfc917a860b346dedbec03349deeb4fc0a323167b5bd924572b1142e766c41e1afbd79f35ecd95fa609e0961155b56fcc996cae2a4566c6d5bb33562ab2f03edac9f7cd415df4ca6538ed67cf00f04bc774acc96a50b9eaef9d2abe7dcfa53ad079e509ff897112c80954333bdf27d2179f097a700cb8772bc6bd88aae935673d2afb578c2edebc375e97d0b08eff1bcc81bc385b21e27019476a9537836d6ea09d876bc49c602cecc632acbe945eb68b86f405359f756b7f28928c398fec1b44f7c77e1ade0dfc515bdb69dc8cc558bde1b9b88d70ac8ecdf4d95fde98985bd064c1a6c975876d38d5d8246c1541c380ff4c5ffeaea65fa9a6079e22e5c8f2d87bf2fd612154bbe861e5f8e01a533e861fefc1d5049f3acbf135222e48e8a10d81dfb7877c720b5e41583a0619be105328b395405c08510a6af061ff4aa67d4bf784a2507aa25d4d9f6e7f1abd3e516444983cd13ebe86d3a74c68f513d512e406520913c9a497244ccf4e0dcb488598e687bbcc6faac4d238d40e07b1cb614cfdcbe8fe98ef1701aa906912cc0cef3e2533526565ad980b43179f9271252427bf5df98f75ddd718caa14cd190d86cbc56d133f0cf31e06e2f4a5015effc6ff2b0bf8e6f573d67d97c9f37a630c9a393e7feaa2ff0bfe87b59831a29825a55e4e38615c0a96c9b9e61e9d1d5e01e99e01cda8d8e83ae7f317b64d509179e2740d48dd3db6ef5cbd635705e892031c548c79562246959fd1659253b00d9d6b82192e0bcfff5da494875e11462c1b753cc2de8f8ee55651dd9f90cb2b48538ee94dc013822dd6f8ac9baab0944196dffa232d88511e9e4fe1f25fcb809f4f155ee3db8833ad73b8adef09ca100990a64ee47156039a312177678d6bde7d7581db8ad6b151b260cd3ce1afb9771426f77d65a75cdceaab097f878a66f899213915a34617b394d3bbfbde4e638252399a41d3f2fc88d716a0aed6ff00115575bda0392e2afe17e4e456110d17266613ca156966d418d7f9a5a2c09aacffd8f9f2038931cd9b4cf3f8d279e33f7010a506bb18d07272de013a07bacac7d088064633c6c4817d9295fb00bd60361ad12e15b929878a6b5046f8da7dbe8291ab807a2f7ca4f7a87263401918d9556be7ba24d02ba86bdd8a2d0fae300c538d7411fca28ff22f6f9d1b2f35f07d108ae69d4bfbd5886cad29ef22ef515490b45360eb5fdbe75e8c18b14516a5fa8608ba11c827458559c08a4bfa4285cb9721a74582b661a0b0497f2e89d5119d15fad44a65f8c83a3aedef255cfed266d9506974b7bc073ca46e945cbc5b1a4ade4812226668e1b10b98a34559f40c48436ea0c4655b7b5fdc2740176bb519fce2cd6445a641a0e6a8c019b238c86a4b5c586d2614a5720847bdff6dfa7b21f230fb2f4a37e6544ec51dfa38f9353e29bc68ee3bad535f49c9a1e570d20f2dbcf37b2c571675021e67f22fa93b1f4c8ec3702b57ff296f25e7a8e1914cdbdb4b29c774b57f3473819b7bb3cab75ed8c85ac2a38a21f1c64361a2c8036e27031132fca139a111c43424025711ed1f39854d57a07aca6e758c084f8619263e887c8030a55d60521cc43a6310d8fa789aa4b90d85465a56ae95675ebb0dd77a460930ad7cedfd7eb81cccfda0d3579c566b652a2cac29dcd3be9c08f89f7e8fa5a5dd0e6c60ef52049a281f01dea5f92e6027e994eb52949c12e4947d77d862dabc0a902f2a1b8bd0e378e87bd1f08c3f36fcc054be5cfe55b9fce3bd899dd8c954b9e204efa81e2062de5227f2975951b110140c82a194e975d15dd43bb722bf4f6cbacfe3433bf5d6413e930e8865babbc6aceed35f8a1a721292ea18087a3bdb2cfb70347991bd0679e4864d3ce28673a89ab3aca8109b133b32b1a7ee12c45c7d02e41eb00ac22e12bec8fc96f9823e71dba7eeb443c211db247e55318932d5a253d11a800f4ea661194bbc0c86b75b7753ce5a6f57960af6687d7b5cbbb07ec037ebadd71756c78ea1454d67250ff0fe0c41d9c6767062154562c4a3ad940e584559c422175b95363fdfae59e4249866dd2bbc5a3ad4cee6e9c517d6b6bc806d1aec9795775b4c7bf15f4396d5d90313f60ead456342835693b4ca0b83b056e28d036b20a0757ead275a94468aae6ceabcc56305a45c4bc5ab454dfe9e9f975622e5c8f428bc5e434098b2c312885a93ddc40c25c0994af800b8e29c9d84d26ab35020cd2a5b9d6fd8c2c17fdfdd22f4f94d0debbae71b45ac6dc1b63996d54bd1e17c7a3fec39d2714a089d40677c3f450b52f9a5850d1ecb577aa7e469f75db734ccfd177b60dd723456259f60120e97e5dc540e6adfa164e237257705f7a7e0caf3bd2c2f7e4a7059bff043df0ee202e89e3a5d8a144602964a9b4426b561a5fd74811ab8d57fd528eea208751c3a15511eecdd65c2bb2aea0e520cd490797f93a09711df0577221d4beb7a105523e36ad3e7878c336fb50675a14bf90a8b15b7489f1475284396b6be255353fcf541a85e013158df63bce16362cc36306a85b7413f856a4081b9a4a184830e67b165beaf8b01ec641fabd80fb7cc343ba29e586e96c948a6a626e4d6b89e3c823be73a1c3a9d43768baa39b6120d3f4768912d873ad3a659cb8d43dd546ce9fcd57c3276620c4907b47df5236dae96d250f4126a448790d06b3acd1f6a7c501a535dcac1062ae99790a41af4f2016ab87f3e3083efeb559f5c2f422d611cca9124589915def527146b88670f0c2976a0978eba351c7d51fce610c847474ef2579c95032db5610c1e2a8b7a6e6d63662bdb0e8646ad63dd26bfa13035d4e95df127d57e1f33b8af54268e7fb49560fd4e71c5bd8ae2de77853ac4cff9f9de3d6a5efc8ce3e0b4fcf9bed4232dce252e462e4190d7c5fdec44d05cd649f32abd1b756923ac04b9700ed0d7ac816de8c7a598a2724efc20453bcab597e545de69ea3dd4e86cfeb169a7d58878a11037fd29e817cd1a3eae3e7558c486dc4bc7e38aec33ab8702509782a0f40f294f2cfe008e4d4140109f0c4efa557e1d9cdf05346800f28478bd8b5676e8331af90b64be3b682fb1659e5216a45a0289d21624f0622e6356b8486c12bf843595a16fa15783c0b1f0bddee4b2bb21c1d18443ab1a728e963b837f18d381e922a08fe74e64787a37c9f3b769de1f89d58151da09b1a67d6ded6ce0aaac936fb1553dcc06781f200abb7001cc26d4cd5b5c7e5fc4ab37ec0f5106616141ef8463bd80d329e3a6abeb3caf2a75f73aaf35af7cbce92f257d66f2dfa61058d936f8dddbc0077ee2c7769dcd507233412ef3e7710a3fa3571b4706f5508a671a569ab087f6820b7538baf98572aa7770667cb67012e3dafefecab3eace8982aea09b6e9bbac271d6ef87d74b9143aa24c46c2fa8620a1ea5c0de01614453be4f8f503e874ed723e610d740f56db203edfce620600d4a045894f4de989cdcc0f5a95a04b5292df059a6db5abe666dd5520fcd2beda7ca976999e7dba651e2b1eb1c4f215f14950ac3cfed9e4ebc59c6e0a51c324506029803f7cbc8616a824afe991d815b6fd919b4e73f2e28cc2a09bd26c58ad3cd5c3ada26b66b4b21d0f05eb743dbaf22e85e4acc4260e267abb6d1803e7ec9edc7eddfea1757d754b5bb38e65b8dadad6c53b260f939f643d7065f3748c7078531e5bf3202cfb40ab33bdd3e46546ab66ab08eac84995b8099325396007fe2038a2b2957dc16bbe31318bccd632a206bc23e6d4959a9fb18badc6c5faaf7c825af15ee018bb70f537fec832b033c9f7af79180761f546ca6b3bfed66ed7b9bb11c08c3b61cffc4d7c4d5bc3c9d2c0a03c3fc22d83e9631a81565a503a9328ad842f488deeeacbb5ea0cc60250177a9289c86372d0f2945cd62dbb8eaa753e5ff85f8a2ca04afee85ca423675173f85cf0ca48dcbd7771e1ceac8634bc356911121f7cc92592fc0eed95051ad1dad9036a2c3b49a8d379756f36b83c7cd30184a8d4ff1735bc5aec862df784fe7b4ef5bf56fc65d9fb81ffdd26c56759e35411bfa6f17141ce6a6fd7af37e60441a4c056b5d42d0a5da97f40897fc99ce7567fe7f32787fd905ec7695c5dffd2f111079fe1d8d7ea92169a656699929b5eb6a564312dc33623ab3ee945bc21f43785826a93075f5cc917d49271d77b3b321cdb1a01e50a8f731b2db1c70435a260330186b67e9fe2e31cb6b1508bdd3ec94a9ec79e3bad9fc8cf848dc56b3b546924ad49234bb0690a2166507e9c786bbd19186d9ed18e16be6365880a00d21d7f4d992094a46d48fef9c60eabcbe1014a1fc1df8265dcbf2b7cc114614645c04ba63f3df77c84dafe0ebe7eed7380993dbea4c0cfdd12b4ef26046cb2b77d1d3a8a70b3acc3404e6d34550f2bddeb00bc9efb0a348a1d30d7fd3363ee9f202ccf0c34e3ac75ad97e0c4c848cebeac6cdc1ac6a3338451d4a3ccc34a406eb43babd5d786e7b9beae46cf537a5b0b3f2731894b3dd0eef34e63e5318caa1f6e3e0a00d81efe68df3c86c622b18dce562bce015cebec18a6ca7a1a17e5824179f6dd84e675b21630da5b8a7a212dfcd1b195de3c1d86f7e6e397b3d30283cfdd5e7da1b0d612de0f5c4f834fb9fec74c9381d3f3ac88057b2a37fb75a65d48516ba9ee79deb4706e2bc1453c590b637f876aec0a8517ef5137252a1306315b436a31730e8ff8d9fa66a20849ad66b9d1a27c97360a0547034eeb615dbd3a9983066ba37e1333029bcf7268bdfbec1d38fed6931fc9d2be88c9214c3f6100fab4768a4761d1ee508d29299468d7d2239899ef4d1992c5e681529ac634b0ad3906ff516594168f2fd60be317a60706f9ffa56843cc213a95049dd03050a82a67a0535a507c25c1b67a06590c83b287026ff61b06acc2e3e813eef720134c053dbc740266cfe609bddb32881a7c9d6ef7e500081913b94c1ca6f447361426c819684d24c9efb0d877f0a4aa5c9cfd5ffff4cd53526c7d9e1c3b499db37e813b5da32faa9348dd0a299004288644bc23e007685904149465f2980033f181395e4415a609df8956c504cf842f330de8fac7a46981358f7c8176175a3bbe1fb42536409b4c060837402a9a1d423a3f3128388f1dc664b8436f6abd1aa4079d275caa136d80b4d2d32e2722d56c0ad169ea3619ae0b52981da43e498b050f49c7dd56c4560a36e9674088da46dd5800c6a94d3cf040a840919e0d9aa6c71972c3d64657f36d8e199e0fbdc5a6d0bb19305ee93292b3b283fa33848c1714b313be05cf37af553655549fff22263fb81077a0eba94e43ff7c0f293c8c78bb420bb887e1f36585bf9a8491de7736a299410c614df5b415140715c2d87e7d24a5964d8c55b6370223490056071a070754898f428f316ebe0523361eea615c1a265d77ec39b355c54af0247d63f1edbe11ee83d36ec14715a7c53f84d611240315a0f626128e67d844c0c263b4d6d427fbbb5fa9b877c309aa9f3079ad26db6df148397e7c60cd56d619ccb5a1f0baec58283ec6005c725eb75461b595e7d8350e0a9080ae25e0bf4be756dbb4bbdd866cfdde3282ceebb2ab24c21f14f6d09aee611935b0dc52009a77403ed98ab4700b16f9de386bbd168d05ad5d2c1fe6bf1cbfc0d598bb7cd1c5de405daca1df19317fae2c96c2a2dd28569d2a51e6c74c371c66c8ebdb9ce1cb29a2ba5fb31321c6f0e747cd8350a8e01caef5d735d33e973c003e02567b76461e0726d858a1265e5d6ebf84f52e97c7d15518cdb6c14810afc3923228230f79a45272e963f871731eac4a574ec4cd0150bc268c25347c149ec3a99e3b54c9ace6ef19d8df1cc131a1e64d26df5edfcb54a710b44dda04d389c66287d8250cc15a7af4229a111948e15b614738a9d12e8af261d19917f9ff6a5dda08ab617cd25cc56f22e289c4bc5ffcd84ddb970c2b5c8d05ddb38b4a4e1a593b4c91b31df295d6eec5960b8de786c7a7480f71a588820a11c80569422d6c0f558444130ff867046f92e97faf491d4a371cff7e3f9a47833d652f6a4f806e3118efb5c1878d41590d39045593b9165cea9be38f7f1734c3b2d49fe3c701f00dc1bb358776ee3851c0c753f75d267bc005460ce9833ffcae141c59464370c9b102117a9b199a8eb6a420ccf4f093fff055d0369180f696365ff19462e0f52b1dca7be818dd3bd74d77ad50de7cd5d6a775e3bdcefb44b0b62e108ba4cd935a3acd8dd0525012fc87b567c33da77782161133796e8b630c3c3d7db3d06eeeb74a3cbb5286313758892462caccd5554f5e80b3e11f813b49f391bd6bf83d78a42788b8d12d96486b811cab8facd0def6497f5060d8c3664a5aded3444d3ae74bb740ebaa766247b6d402944bd0f116659215df4957cbcfa23b848d22db8cfa9ebaf3dc9ce2fe737832f7b613952cd5abcb5928b23fac93ebaeeb734511c680e3769fb3901f347c454c181a222e9ac2f583b09ce2fe1467852e97f9ef1ffa0cf40cc0f16eb8497c19bfa7cf71c79f5f4f3f944d47c4aa5c3690d48f942fdc2d3542c3d98f28117b189cba5ba3c13dac989861bc43ac067754cc5ef33b904ce782276b18bc1620d0c92e835c78cab0de84d365158c0258c6e79f65985b3e44b7dd50a02fe22b8a13d1ddadd26557f32b5c2bbbf211155e43667e76a08e07f664c7b7f332044d6582d6b93de17dd2e0ff270ec3850738e2e85f5ddec7fa9c9cef91e4380b7868770c80e9a39075e7f2a614da6b6df7c36de5cbb1c42d061e17b53b8aadf62fb667b97bace32430a2cd4cb76d335976e07ee596a70d8a8fe2c50ca8fe27937ace7f557597d8274fc34f9d4cc7d11eb230411b0f61d6e954ab26275b93a490949b3e7ba7337309de293b793ed075e5b104906fa016a78e52a5ff92b4a7b76c1a133dc259aa4ef9d37d66dd1cddf7c16bb8f0191d512729f307e82fcd8653df53c9bf3f1b1d7365243438af9244088e3b765c49cb7e55f30f00fe62dcd179312da98d2ab086738609f8dd86d88978cd1d31c4d8c12b28545438625db94dea42d6a89ed9983226f163acbb7863299612b63a57a61771a45995e21e63b2fd533aebea457bb88d0abfb835978fcbe1d974f8d2c2d715c250a3eaddd0ddaf11b5af1bb4e48f80d3d872b54df83d44d6bfdd006564de17fdbab22ac0a2f53fffb140ce840dbaf9bab97047708d5cf4c064c5bae99add450120362edb34cfe24c43c4c7928d453e82dee3a6d2d5c017a6fd2396d734ae8bb02bb05d55084f06239d0cc9606eb9250b6a75ec5b23a7dc8be76f21fcd9f05edd5da9dea28b996bca03e9262ad7ccb736b99d727f0892698934d279411425c449c479748106745fd0ce4e0079cefd182d4273c937b50a2982f6aeadc2880d25214365894c77383ba9cab9d2977438a7b00487687d3838b4aa82c8bb571f2553931a25fb518b8a5e91a1808d51818c4f8622f9eae6fe6367e1c793ed00cb36b4177c77a3d22e57b062d78b58409928b1fbbf8c534ec4e29389a60922f6fbb6338dbb5fd9d495372a380e49def37a6476964b99bacb8280f4aed4cde12a7728567f01ea63e59d0fdd6201fc066f77156d3d653a171e2cc6150327c44a94e616c22ffd2e11d09ac7338544225b7f84bf369dd5b164fc4ce0af89cbdea1cd5d08d37db5db6e5c5d19362313fcea9611abe3c5bb7661081cf57f96b3c1e6dac37d615cd8b336f8dad72d0d934ba8ba55dcd6eae6e471b328d54c69542c40569ce01e79dd283bd4e2cf96c50ff25e52b1b26fbf5c11ae5a82e7878b0f110904f3cd76c77ff8ca773069a23f6255d34900a0978c6eaf5c3076e48a5d8efb365a04ee0f38f2a1591837c89d7a9a1444fe058c7ea824b1313ad4ccd683b2d50e6c1260ff8975702863e097f01e060537febc1cada91076b9c15772a45876aa5252c9933cfcd59d2f0225693b9e0e7d5630c914e54f58ee8c36757877b2272558df476cee1a27aabfe2065ab7442b8dfb30de2d2c409bd4934f9044919305e7f41b7948eb9838c36355bc7270d0110be32873b98f7e1359eced4a3f70fd292cdd61a4ebacea35c5e6492ca672f342d20942ceeec324797f2be745e3725492b6e7cc0421c79601403469e30a51bd93c9d80a38096f2f1f1fe67d7a8bba69aaccae733340335c4d0455897067ed1ae680cb5371d23675113fd85475a7ee0151b8975b56626f999720daf172d52c1701b978549585dc1e8e05b391457daaedbae006a286c504103e1723ac2729b5e659b949d0faf7e4a33aef39ef15ba94a96e30b75341543d811aabdf19ce7ec87f62cca547fa10ef7db0711d049ed29cf2388afd3a3326e4038ba80366d6787367786a29f33c5fd8ab87b2bc10ef25a760131e6387ef4b6586a30beea36d6d697909a12338fc86dcda4a483dcab109c6d5f8a819f5f33ca82d156ccb6d8e2cb46c3ec2140492ccf6a762f4253253d06985ecadcfcee9b94e41b3c01161026f3032c1da3576cfd8274e227c2de36b185764fe90ba099f7f9df687a83723b6a9a52ac0b53672306bf63247e61ea9cc3cab7dd2b2262884828225446d48b68fce31f59fbe897a6a46173cfc678012729f968c8d69fca5b90b041cdaf95d8abf9732a25b85a41edb359c6de5b3cd4f719b2da69a1b5cc598edbf21a0998791fbe55eb2f86b3b7562881f869a754aceeaeae280b46dc70f3419dff7680fa300bf11f41a76d4afa4b4962a57b396a7e4907d7701c7b2ce052fc509ba5259e915b65886b8e9feec4d175649faff61464406fd069c255ad3eac67f5b817bf951314d55a7a194c8353423a67d50f03973a723f0319252dc7fd0dac4a73add4d040884abe9c42011304e5a832ea3dbc2e7d52bb57547bd45678c5e1a671890cf768f013827676672d2120c949826bc1f0b96c4056f581be8903b7a8e87d9df5a8877a969c6077fe46a30d09303724f4a28f74667b79ae07b64b55f0a1b6f1fe44671ad7eb9d4761ff3c5ef831e08125dbf6a24fbfbcb19d8cd47c0af53698325a419dd1abc8e424c6e0b4854eda73b0be1b3fde2d9b689b141c7436753d735eab10c6d1335d58514ea2ea1ddd93ca0bc7cb33b6038fba5fa9c89877bfb031c08049a185315a8232c3bcc0be9622fd9563eff781c6e3565f9cb2663babd98ebc8b1aa6c6f5545e0419d9819e37a6bc34aaa09b80bbaa77793edb6857d215d04ca17ca00417abac2d541e05c845e4906d22582a4ddb3e2ba49c7a61025589a7f21e5d45b167d12157665fe206d3a8a0016c13e193eae024124fa6c566e26eaf19ca17f6f63645db7323287b29b0fd85a1ffafd44378a00220775ed8874e8967f6b97c7b2b91098c87025166a5f2d817eeb7a2c8a7cee83ba991055b0b04f6d3f4ea20ba25a788aded5a04e483dfde95221c9a50cba220dae83fb3be8aa4c9518de03fbaf6cb87e6b042dde1eaf2323db69e658ec8d33c6678ff8b7bee135db98db3bb9ea4187039761c11db609dcfb20fc11ed0900bd79651477392038a9c572b09f15d09dd9348f90c9df4b25ff3cf1c4b736fb75944210c681cec961ddadc94c365224feda270a167abf1cb388c225a22ef2c7060ada745fcff068c448b1cd021567bd3230d465fb40b85a16fb70d683046ec78bd141ba670460fbb07fd60a3fee56b1b700d37ac8be2f4811503940cf363dfbe049600d231ab87802bfafb06d1db35dbd1fe12e24a404e2ca51e1ebe208c3679e64f27a9f2b5c2189b08bb0e5cb3ba780c1a7ba8a3e76ed7cca2dd65add9ddab120a7524a534342afd192a99591c99d5c897b2e7e42795fea3b57b8c767f819608e0656b17b69a40701151f6d419a220995e0829edd5fad41a7d68b8b627063b81887565bb4525c93cd77a925f777a7f644f96e46ac4d37607d4041857ee8c58f9879042a80dde6bd2182163df0f53b7fa53a0a20371fd9c4ac820a89fe1d450b07420141ae370e64090cdcb1a6a8eea8b91f63726be23380c5640e22d1d932700dae6362b1d41c7334602abb91b3e75381e993232ff911043b7c56fb74b6cc6372173bfdbe97f6ed99b878a09df5c95ff74c654afeff8ad549e18fae79218de142e28894648f622d6e7da5803439de8e9014ee0c508a0e51e11633f16c561250471b765286674d5bc9132f08039537b0038620a95a44c26f4c23c999c7922e4a91d01681b9a3fbaf6a740838ec6325b32de8c0d86cb9646cb8585476fb77351e6977ed433c8833263972fb118005e19fd06dbbdc0714c9d9f6a6b02843d17152f3b794913cfaa9576a829d55ddc293c5d18b56e9b272cf31478bdc7a4fec7a88e2cac476cb627e0c47269cc51f4f6543bf0dc034f401ef9f97fc6640c4c46f880b6608c9eb8ffc55bbb77dd613793289c1fff789b69884aa76ee3a3d4c6b211cc919e096a1f6a423611128cb260e22b9fa3d7f5b54888f8267d4abccd3cf87bda9960dfd59f94d41c6b88f79425080e3f8efbc6fa2108d350796499ebd9fc3137400966f938d6e53aab636d7b78f0b53d069839de1eafe06f696ffb19184a4f21b18603d901a1bb3433a1c0b11f1cb119fe5504f099ba2aa15b12f8f798b4c3bfd0fe8409013fa066602e8b74a1cc8fa97aeb5bccdd7e473bf737529c309cfc74b5b0fd40e308f9d0c165da86a6f440fdb03683b45b13e373b20d0396a1adf76d2cd0b928b23cfc45ff3f78cb2cb11ec736e4247f08adf758ca4537705f2a2f24d222dbda3fd48aab94d36feff88abaf57887ada53b29260b5dbfd8f7a2ed7208d527622048f5b534e5813ca14ef3b942398c4abda455add09143c39ff73b92538975393faf28907326df0c5b7a57bd517f1bff590f7cab692eaa4d2528c6e2dd3c24ab5257cbb2903c41ef283eaf4cfa1aec8debfb92d4dbdd6a7b00ee64da0223c2276cfc75316e0b24a65a90be0c5f8c85663b52c98235fdc24f4d43c1089ca4806ddb510524b791eb3239d59686ee8c7635647972102a8e5444a14e68b9fd6a553ae3f9a831cdba18b6c349fd2b3a358ac9f92d203a0152c2dc08a561c429361b2b1d315014b806a6fafc4fb6c8168e400cade5284e621356f3c9322d5c6a335408c3db870fd7752fa595219db165cffd12bd022d11dc8ceb2cf724d796322f4e00ba647492aa29ca0c1d116712b5112e63a1bf6f8f352a5d5bd05eb89c00c28356623509f68c72990a0528f6ebdc1187332db5625e61ae5100686572e0078be39fc1892f7389dcfb4b2a5e727d3e87030071b7779e212604831ca8d3757f1ac6cca1aec502341c1334c8cea4cac92c4243efd71edf4667c69dfd16b4f49916b15d35fa2b4a5f12a71f9f662f5d8a370cb0431842cea630bebbec20f3c266965a248ee8d0d0ed092ee15399f6295004529a55cd134bb253cac42f4332d23b8a552bcd31c9e30e03e5ae33dd1802590d445e1785a8e6ae0765075b9fc564aeaa4dc46bdd1468aa4431cbc8fa4490289a237304f98edb4e931c23518490c51cf4db28984a973a34022a4bfa510d8c4f0fb4af7a83bf8ac016fc9be239a10490869d76d175f67d29e2384a7859cdf78e804f0e32a6ed0a18bc560662f9149bdbcef4a8199b599ce2f50b3f1c8de5a4bc36ce0eb6b6bd704b747667928373fe7889e8e300448558647317a1a5d59e3e00e70af5fcf4dba7664a8b7a091486fc181f103a673174e25bddfdedd6ec32b6fc616e8c9cc1f1611abfc4855bdccff386fa5f937c42ca8c72d3d845df5831a48c16a310c1e59466043f67c201672947e903d6d6432679f66e69ffdb2b795a4aa779806d5e022d9f32e582a933313a75c59bfa17ed788e74ae9775eec46fc5a28818478c257e3080e51574cd2761427f72823d00687ecbe497bbd66e5fa45353a8a76022e6656f60aa4dd0fe3ff3322a677943cb2a2aa6388395cc0ef5eb7fb88faf87114a1d0761dc195809d431da202ed2a3860c96f8321b11b47224049ea96b5c663757c82325b5f00322a463245bf8bc098bb999d03218869e42b37256415aec0ca7f27ab2e3b0c4eba05792e9a33a8d8a6fefb1dfc35cc063c44e162f896724ce5b44ce4ac5e4f8bc7dfb45f0b8a44f161fdbef91a0f244b069d336c431c16f31f30de16f0358d6e193f633ca8f64c3381a7a3b80a3e8179e89547e3d45bd569f219eea67369c6ccf94c477ae7765cefd9a0ea5628faee306d22eea6483a5722feac947a2c2201d43a3c6a8c8432fa67e10b8fde5112deb147b1186eec3e6d1a9a3dde4d8869c6a589551c7f7e075c7a0935e846e6f38dbd3e9ff3ca7bd77d0efa67350acadc8d986258bc6983d92ebd12713a1f55ba8c266bc1a387cf3f7ab59911be5c33021cd7a5f80bf33eee3f43e6c6f5d5a76797b48559ca69af6053feeeacfb4be6c69ff5637955df893545c2df6f6047f0ed3339e9d95db5deb2679b443a49ad4673d75eab79938f2380eb0c49b73879b229ca8498d7d15a2c547718d31d29116c025361a2f9fd5943ec7aa4acb9d707eb569ec060153f2de3652bec688e81c2a2259f584255b9f3713a37dfc3b80cbc879f5d35dd09c8f314200fb2c2f84b9365012e247e4961737bd4643517dfa52a069d5d8327bdb0c3c3c01eac5c8ebcb859f7945845f4d6f6fecb639e0d1310dd204c650758d8e54af50ba1d6e60074b78a7e1cf7a02310b0962e12bf730ce3a6ab64d6d673a397f2bdcbfe88df2400dc8c4166500fba19d2b7a99a36159d9e40fb9b57e52986c426f793631d27ee599f1b4cbb6812908fd4a9a5148eeaa6f94ddde8bdb12bc4cd0875961566357b13c158e9812849729880aba251bc9552726aa70ee51f52556036b49d88a71d8a273096643ae7b8a5b689c1f225c93cee23dba51ab4efcd18f49bf8b6edc0fda60eb21434a259d1b667c28ca9cc35df8ad54bb1d49864c70a0bfd67dd6aa0b825b26789ba94db2d1e473ef4489cc5fdd99df9045cbc8117da926e59447741ebf146047ef29a7c9b2c03667ab4cf644cd4544979d82d22b044123e72dbc1640e1ccd4757c5796fc5350d29c8f7e6a63164cc705e9f35ef8dc18498840c04b954c926a00215cf9df8544dd50e15b90eac8d67b08dca44469883a0712cac14dbb20a5817e56171846063406d3940ba93e1330237dcb1bb03d20e807e7ec270834a70115ea4aef7eb73d0856ea3a60cbadab6ba02ad0c7155e5fccfb72ac2bd2bd4004a0eac98382071973cd5c8ed181033d1fc0816158775a7ca03967300972f1ff5f7e4b16162dda81cb9c609a11440937f2e9a99e9c1f18ff2159486c86c848204eccec406e8810348f8dff218f329e13a4f3bea4fb6859de5401f1aaf1b1d06457a3d843a978aa20f540773288f5875381d742aa9a2f85f226b5e1afa2231a53c0c3186d61d30fe6e0d950a85b1c073069b9e4bb6256899b384cced175c510fd3c47335f7ecf3762addae07c20aed4579373f0c92a8df5fe1520e7d39b39468222dbfe75091b82f44b53702c3fab0eb3d4a653867486ac1e2fb4abdf4c2cbf2cfdfcf8dba60250b648b002beee1418b5683e0a327a49b1f2c79fe062562110f8902bda1e94f03053e463a6312e4f86cbcca393a461d13750965b14acbc76a007dd74c7fa1e105cc9d645aadb18d0beb9951f31a8befa691a4ac29cffecfdf0237a74bceda2bbec86365607c6c289984153cd6f94839bb7de9be51e0b146376e85d9f557a89fca84edfb59c964075a8945a422ee78e21ad870cff0829b0068aa7631535efd685c8ce1120a9be4c4d07fb444da91d93b3ee22a80ab2beb0c00b82a745030f1d2f6c41e7b5878d65f8bb73239ce96f756b89efc2beed169598ae3888170adbcc6263638c7cbabb535b6ca931b03770417444c0277544bd0467616e5aaddafac89862c5d1122f8aebc396297409bf793b020d9e9475599eabccc5479a1df7166b389b023c247ca40c4a080567cda638613e25de96a074fbab6d68730e6f59635a889e47b35d0d3b934694b0d1ced856b82f2f32af3db50733a62680ef3a6766b4bed2f120694aeb83fc214f728c52b8672207853afa4fc4c81526cb1326d5d66f28736cf7c1b2511deef144c8aedc3d86b2e0c2ff20835975b9f2335ff0b8e7a552ff0c929bc42959f876aa8a9f6af5bbb549f1365b2658343b51cf7530d1884b692b4c41c0f7d4194b796027f5f9c130df3bbb021814994c9e1fc39e2788b3e4227aef32e6a20ab0ce039228de4c99302f0436f828be9121d87e2543b2eb91b18b96d01f90aa5b5133d8c366e242b3043a526025af3e061d0ae00164a53daf07576694e9707247654fa4e6c3d167c71fd9323e54b53ffae0ff0b10543ca8ff11f8dc035196b69b56dc418125fef7df326c53133697fadd795fc31e608483c5475b0e3858e9dc1a06ebbea8cf752f72b613c626debf40ec4a55af6dac4125a27da5d8142d693727926a44e050129258b5b948c77a5c52d9daf46a320112a8e337b1976345f83a929a70628938fd060b32fb307ef8caf62b0e6f44943a6137f34179135f2793d2e90a7aaa43c98174eb86dc76425faed4dff4678225573117ef2a4f77e96c4bf2733bc951128c4767edbbe46a65c758ba6396670da13b275d1bdf5627e2eb00e2bcb86e8f329c4158dd9da0e294613a2ebd5fe0f18252ca21b2440bf391c4d809a7283ce06b8767d91da70a47a6f1f810b4fb08c1c24940427dc43231e20769b2a35a83f29e7f4397e3e4b0ba33ca1f5536f9efd25e2a36ac4659a1566654978361a9789c3dd3b567bcb6276c8ebb0d4297c2226ad23967264215a2b06f0d7a45ab6d77b86c48947ea7f19f19e6ba0310c86d090e4f56b4ed1851657c7e4fe79f2537ccf799d73068c4b22c8c442360934b067e07164a50e58a99b289fba5d6d691056ae6a4e7fa0910983c5a0404a8f171a278c7b11ebbfe9ed049d65caafb34c433598e9e2fefe3da5915ca99df0bb419971f4269fa0e548067aecf00e029f19c4ffcbcab747da14977b4ccd639e25bf1958351753dc3240ab781e138c153535677a18931d89ccb9367aa797813c7b587b3ac512f0d2ee6f966ecf74c6a26404a9e10bedd3be0f5b3e6ee8dddd16c9e4defc9d89a79c61672b648dc1f7ce09e4ff0105110af778b43912a2d2cb1339c15c7eb19442bec5ffcd4dda124db4fedc83d5c05052664cb2116f446c6f41644e903d81f02d8945afca082c391badf9eeee78628105fd871a747ec4868dcbe264a1380601403375709fc8f2b22b71bcfa30d4b1cbfde8a55aa76c2df13f0a1d1e9e3cbf030df5021a00a84f88b68013158de686a5626fd5e9b02433acebc773ee0cbca990a995c2cada850f02c621a85756bfc2b4960cd737d5d0963f24a4b260713f3140efaa766b4bc0b1ca91e5ecaa6bb02f9c0e73580b841c4b3da1b78985300123a7d9bc96e7072e4aaf07fef4d3e3eb8641449d35bc4a937615a7cb8e7f7c4015fb824578fb02c0b4652b491172adadaf3c688b3367df08805b42745816776af1b4f7215da7a713bb060a3efad0e77e9e04ffc6eae8e10384a4560c5b82a791e8aae5afd1765bdc8bf1a13476cc8a395fccc5298def765071c342d0c057e472b56e54ca7f27a853913436145c8247bc30d05b47cfaf16452fd3c98422a60c9b443bf47f06fb22bbfc7f100c0f51c32e88d3bd4ceca8ee2889f5bfdc37704127775e8cd807e57b3cdd44b94bff9c7cb8c417bad2fd4eb8c41aaf257f69e549bd27349fab1c2cdd6955bd2b180dd95c3593d70adcc85f967427f9dcd4ab445240e551f176ef68ab7365094fd8539381c1be9c01082a2460a325c72ed9977eb607012a02ba5790f52b029a905241606ce0aa94293d53a1d9399625f8230b40709bcab5446a906213fc9cf86685da47b785a</script>  <div class="hbe hbe-content">    <div class="hbe hbe-input hbe-input-default">      <input class="hbe hbe-input-field hbe-input-field-default" type="password" id="hbePass">      <label class="hbe hbe-input-label hbe-input-label-default" for="hbePass">        <span class="hbe hbe-input-label-content hbe-input-label-content-default">请输入密码以访问内容 Please input the password to view the content</span>      </label>    </div>  </div></div><script data-pjax src="/lib/hbe.js"></script><link href="/css/hbe.style.css" rel="stylesheet" type="text/css">]]></content>
    
    
    <summary type="html">The reason why this passage has been encrypted might be due to the fact that the blog contains (1) personal information, (2) private configuration (e.g., mac address, ip addresses), or (3) other reasons.</summary>
    
    
    
    <category term="环境配置" scheme="http://jerry20000730.github.io/categories/%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE/"/>
    
    
    <category term="Hexo" scheme="http://jerry20000730.github.io/tags/Hexo/"/>
    
  </entry>
  
  <entry>
    <title>Go Programming Languages - OOP</title>
    <link href="http://jerry20000730.github.io/wiki/%E7%A8%8B%E5%BA%8F%E8%AF%AD%E8%A8%80/Go/Go_object/"/>
    <id>http://jerry20000730.github.io/wiki/%E7%A8%8B%E5%BA%8F%E8%AF%AD%E8%A8%80/Go/Go_object/</id>
    <published>2024-06-01T16:49:48.000Z</published>
    <updated>2024-06-01T16:49:48.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="gos-support-about-oop">Go's support about OOP</h1><p>Go only supports <strong>encapsulation</strong>, does not support<strong>inheritance</strong> and <strong>polymorphism</strong>. Go onlyhas struct, does not has class (like C programming language)</p><h2 id="struct-how-to-create-an-instance">struct: how to create aninstance</h2><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> treeNode <span class="keyword">struct</span> &#123;</span><br><span class="line">    value <span class="type">int</span></span><br><span class="line">    left, right *treeNode</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">var</span> root treeNode</span><br><span class="line"></span><br><span class="line">    root := treeNode&#123;value: <span class="number">3</span>&#125;</span><br><span class="line">    root.left = &amp;treeNode&#123;&#125;</span><br><span class="line">    root.right = &amp;treeNode&#123;<span class="number">5</span>, <span class="literal">nil</span>, <span class="literal">nil</span>&#125;</span><br><span class="line">    <span class="comment">// unlike C++, we do not need `-&gt;`</span></span><br><span class="line">    root.right.left = <span class="built_in">new</span>(treeNode)</span><br><span class="line"></span><br><span class="line">    nodes = []treeNode &#123;</span><br><span class="line">        &#123;&#125;,</span><br><span class="line">        &#123;<span class="number">5</span>, <span class="literal">nil</span>, <span class="literal">nil</span>&#125;,</span><br><span class="line">        &#123;<span class="number">6</span>, <span class="literal">nil</span>, &amp;root&#125;,</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="factory-function-a-difference-between-go-and-c">factory function(a difference between Go and C++)</h2><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// we do not need to care</span></span><br><span class="line"><span class="comment">// if treeNode here is a temporary variable</span></span><br><span class="line"><span class="comment">// or variable on the stack</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">createNode</span><span class="params">(value <span class="type">int</span>)</span></span> *treeNode &#123;</span><br><span class="line">    <span class="keyword">return</span> &amp;treeNode&#123;value: value&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    root.left.right = createNode(<span class="number">3</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Question: was the variable created on stack or heap (a question thatis important in C++ languages) Answer: not important! The compiler willdecide if it is allocated on stack or heap</p><h2 id="define-methods-for-struct">Define methods for struct</h2><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// the parenthesis after func is called `receiver`</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(node treeNode)</span></span> <span class="built_in">print</span>() &#123;</span><br><span class="line">    fmt.Print(node.value)</span><br><span class="line">&#125; </span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(node *treeNode)</span></span> setValue(value <span class="type">int</span>) &#123;</span><br><span class="line">    node.value = value</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// if we want to use</span></span><br><span class="line">node.<span class="built_in">print</span>()</span><br><span class="line">node.setValue()</span><br></pre></td></tr></table></figure><p>The difference is, no matther what you decide: treeNode or treeNode*, both of them can be used in struct methods as needed. For example,even if you input an address of treenode:</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(node treeNode)</span></span> <span class="built_in">print</span>() &#123;</span><br><span class="line">    fmt.Print(node.value)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">pnode := &amp;root</span><br><span class="line">pnode.<span class="built_in">print</span>()</span><br></pre></td></tr></table></figure><p>This will also print root value because even if we pass an address,it will convert to a copy of the tree and then print it. The compiler isvery smart and can convert according to the definition of thefunction.</p><p>The difference between <code>treeNode</code> and<code>treeNode *</code> is that the <code>treeNode</code> does not allowchanging the object (it creates a copy), while <code>treeNode *</code>can change the value of the object.</p>]]></content>
    
    
    <summary type="html">Go supports OOP (object oriented programming)</summary>
    
    
    
    <category term="Programming Languages" scheme="http://jerry20000730.github.io/categories/Programming-Languages/"/>
    
    
    <category term="Go" scheme="http://jerry20000730.github.io/tags/Go/"/>
    
  </entry>
  
  <entry>
    <title>Go Programming Languages - Fundamentals</title>
    <link href="http://jerry20000730.github.io/wiki/%E7%A8%8B%E5%BA%8F%E8%AF%AD%E8%A8%80/Go/Go_fundamentals/"/>
    <id>http://jerry20000730.github.io/wiki/%E7%A8%8B%E5%BA%8F%E8%AF%AD%E8%A8%80/Go/Go_fundamentals/</id>
    <published>2024-04-27T20:56:47.000Z</published>
    <updated>2024-04-27T20:56:47.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="table-of-contents">Table of Contents</h2><!-- toc --><ul><li><a href="#overview">Overview</a></li><li><a href="#environment-variable">Environment Variable</a></li><li><a href="#basic-command">Basic Command</a></li><li><a href="#go-fundamentals">Go Fundamentals</a><ul><li><a href="#hello-world">Hello World</a></li><li><a href="#input-from-stdin">Input from stdin</a></li><li><a href="#variable">Variable</a><ul><li><a href="#initialization">Initialization</a></li><li><a href="#explicit-conversion---------">Explicit conversion(强制类型转换)</a></li></ul></li><li><a href="#type">Type</a><ul><li><a href="#basic-types">Basic Types</a></li></ul></li><li><a href="#constant">Constant</a><ul><li><a href="#initialization">Initialization</a></li><li><a href="#enum--no-enum-explicitly-in-go-">Enum (No enum explicitlyin Go)</a></li></ul></li><li><a href="#condition-statement">Condition Statement</a><ul><li><a href="#for-loop">For loop</a></li></ul></li><li><a href="#if-else">If/else</a></li><li><a href="#switch">Switch</a></li><li><a href="#array">Array</a><ul><li><a href="#initialzation">Initialzation</a></li><li><a href="#iterate-over-array">iterate over array</a></li><li><dl><dt><a href="#slices">Slices</a></dt><dd><a href="#difference-between-slice-and-array">Difference between sliceand array</a></dd><dd><a href="#iterating-over-slice">Iterating over slice</a></dd></dl></li></ul></li><li><a href="#map">Map</a><ul><li><a href="#create-a-map">Create a map</a></li><li><a href="#traversing-the-map--using-range-">Traversing the map(using range)</a></li><li><a href="#get-element">Get Element</a></li><li><a href="#delete-element">Delete Element</a></li><li><a href="#map-s-key">Map's Key</a></li></ul></li><li><a href="#functions-in-go">Functions in Go</a><ul><li><a href="#typical-function">Typical Function</a></li><li><a href="#multiple-returns">Multiple Returns</a></li><li><a href="#named-returns">Named Returns</a></li><li><a href="#variadic-functions">Variadic Functions</a></li><li><a href="#defer-keyword">Defer Keyword</a></li><li><a href="#type-function-and-returning-functions">Type Function andReturning Functions</a></li><li><a href="#receiver">Receiver</a></li></ul></li><li><a href="#pointers">Pointers</a></li><li><a href="#pass-by-value---pass-by-reference">Pass by value &amp;Pass by reference</a></li><li><a href="#reference">Reference</a></li></ul></li></ul><!-- tocstop --><!-- - [Overview](#overview)- [Environment Variable](#environment-variable)- [Basic Command](#basic-command)- [Go Fundamentals](#go-fundamentals)  - [Hello World](#hello-world)  - [Input from stdin](#input-from-stdin)  - [Variable](#variable)    - [Initialization](#initialization)  - [Type](#type)      - [Basic Types](#basic-types)  - [Constant](#constant)    - [Initialization](#initialization-1)  - [Condition Statement](#condition-statement)    - [For loop](#for-loop)  - [If/else](#ifelse)  - [Switch](#switch)  - [Array](#array)    - [Initialzation](#initialzation)    - [Slices](#slices)      - [Difference between slice and array:](#difference-between-slice-and-array)      - [Iterating over slice:](#iterating-over-slice)  - [Functions in Go](#functions-in-go)    - [Typical Function](#typical-function)    - [Multiple Returns](#multiple-returns)    - [Named Returns](#named-returns)    - [Variadic Functions](#variadic-functions)    - [Defer Keyword](#defer-keyword)    - [Type Function and Returning Functions](#type-function-and-returning-functions)    - [Receiver](#receiver)  - [Pointers](#pointers)  - [Pass by value & Pass by reference](#pass-by-value--pass-by-reference) --><h1 id="overview">Overview</h1><p>The go programming language has the features in C, Java and Python.Go programming language is a grammar-sensitive language, meaning thatthe language attached great importance on grammar. Go supports gabbagecollection. Go does not support inheritance and overloading, butsupports interface. Go supports concurrency. Go does not supportcasting. Go does not support <em>assert (third-party packagesavailable)</em>, Go does not support static variable.</p><h1 id="environment-variable">Environment Variable</h1><ol type="1"><li><code>GOROOT</code>: the place where you install the Go</li><li><code>GOPATH</code>: the place where you store the source code<ol type="1"><li>src: source code</li><li>pkg: dependent package</li></ol></li><li>国内用户建议设置goproxy: export GOPROXY=https://goproxy.cn</li></ol><h1 id="basic-command">Basic Command</h1><table><colgroup><col style="width: 50%" /><col style="width: 50%" /></colgroup><thead><tr><th><strong><em>command</em></strong></th><th><strong><em>content</em></strong></th></tr></thead><tbody><tr><td>bug</td><td>start a bug report</td></tr><tr><td>build</td><td>compile packages and dependencies</td></tr><tr><td>clean</td><td>remove object files and cached files</td></tr><tr><td>doc</td><td>show documentation for package or symbol</td></tr><tr><td>env</td><td>print Go environment information</td></tr><tr><td>fix</td><td>update packages to use new APIs</td></tr><tr><td>fmt</td><td>gofmt (reformat) package sources</td></tr><tr><td>generate</td><td>generate Go files by processing source</td></tr><tr><td>get</td><td>add dependencies to current module and install them</td></tr><tr><td>install</td><td>compile and install packages and dependencies</td></tr><tr><td>list</td><td>list packages or modules</td></tr><tr><td>mod</td><td>module maintenance</td></tr><tr><td>run</td><td>compile and run Go program</td></tr><tr><td>test</td><td>test packages (go test will scan for all files ending with*_test.go, so put test and src files together)</td></tr><tr><td>tool</td><td>run specified go tool</td></tr><tr><td>version</td><td>print Go version</td></tr><tr><td>vet</td><td>report likely mistakes in packages</td></tr></tbody></table><h1 id="go-fundamentals">Go Fundamentals</h1><h2 id="hello-world">Hello World</h2><p>The first and foremost thing for a programming language is tounderstand the basic hello_world.go <figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    fmt.Println(<span class="string">&quot;hello world&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure> Three things tonotice:</p><ul><li><code>package main</code>indicates where the package is in, this isthe entry point for go programs<ul><li>There is only one main function in one package</li></ul></li><li><code>import "fmt"</code>indicates importing a package</li><li><code>func main</code> like many other languages, the main function<ul><li>However, the main does not need input arguments - like Python</li><li>uses <code>os.Args</code>to obtain arguments</li></ul></li></ul><h2 id="input-from-stdin">Input from stdin</h2><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//take input like scanf in C</span></span><br><span class="line">_, err = fmt.Scanf(<span class="string">&quot;%d %s&quot;</span>, &amp;x, &amp;y)</span><br><span class="line">fmt.Println(<span class="string">&quot;You Entered x:&quot;</span>, x, <span class="string">&quot; and y: &quot;</span>, y, <span class="string">&quot; Error: &quot;</span>, err)</span><br><span class="line"></span><br><span class="line"><span class="comment">//take input like cin &gt;&gt; in c++</span></span><br><span class="line"><span class="keyword">var</span> x <span class="type">int</span> = <span class="number">1337</span></span><br><span class="line"><span class="keyword">var</span> y <span class="type">string</span> = <span class="string">&quot;string value&quot;</span></span><br><span class="line"></span><br><span class="line">_, err := fmt.Scan(&amp;x, &amp;y)</span><br><span class="line">fmt.Println(<span class="string">&quot;You Entered x:&quot;</span>, x, <span class="string">&quot; and y: &quot;</span>, y, <span class="string">&quot; Error: &quot;</span>, err)</span><br><span class="line"></span><br><span class="line"><span class="comment">//take input with white spaces</span></span><br><span class="line"><span class="keyword">var</span> z <span class="type">string</span> = <span class="string">&quot;string&quot;</span></span><br><span class="line"></span><br><span class="line">scanner := bufio.NewScanner(os.Stdin)</span><br><span class="line">scanner.Scan()</span><br><span class="line">z = scanner.Text()</span><br><span class="line">fmt.Println(<span class="string">&quot;You Entered z:&quot;</span>, z)</span><br></pre></td></tr></table></figure><h2 id="variable">Variable</h2><h3 id="initialization">Initialization</h3><p>There are two ways to define a variable</p><ul><li><p>Implicitly initialize <figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a <span class="type">int</span></span><br><span class="line"><span class="comment">// equivalent to var a int = 0</span></span><br></pre></td></tr></table></figure></p></li><li><p>Define initial value but without stating the variable type<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="number">1</span></span><br></pre></td></tr></table></figure></p></li><li><p>Define initial value plus variable type <figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a <span class="type">int</span> = <span class="number">1</span></span><br></pre></td></tr></table></figure></p></li><li><p>(new) convenient way without var <figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">a := <span class="number">1</span></span><br><span class="line"><span class="comment">// equivalent to var a := 1</span></span><br></pre></td></tr></table></figure></p></li><li><p>使用<code>var()</code>集中定义变量 <figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> (</span><br><span class="line">    a <span class="type">int</span></span><br><span class="line">    b <span class="type">string</span></span><br><span class="line">    c []<span class="type">float32</span></span><br><span class="line">    d <span class="function"><span class="keyword">func</span><span class="params">()</span></span> <span class="type">bool</span></span><br><span class="line">    e <span class="keyword">struct</span> &#123;</span><br><span class="line">        x <span class="type">int</span></span><br><span class="line">    &#125;</span><br><span class="line">)</span><br></pre></td></tr></table></figure></p></li><li><p>编译器智能决定变量 <figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// only can be used in a function</span></span><br><span class="line"><span class="keyword">var</span> a, b, i, s1, s2 = <span class="literal">true</span>, <span class="literal">false</span>, <span class="number">3</span>, <span class="string">&quot;Hello&quot;</span>, <span class="string">&quot;World&quot;</span></span><br></pre></td></tr></table></figure></p></li></ul><h3 id="explicit-conversion-强制类型转换">Explicit conversion(强制类型转换)</h3><ul><li>Go中，类型转换是强制的（没有隐式转换） <figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a, b <span class="type">int</span> = <span class="number">3</span>, <span class="number">4</span></span><br><span class="line"><span class="comment">// wrong, math.Sqrt returns float64</span></span><br><span class="line"><span class="comment">// also, a * a + b * b is int, not float64</span></span><br><span class="line"><span class="keyword">var</span> c <span class="type">int</span> = math.Sqrt(a * a + b * b)</span><br><span class="line"><span class="comment">// correct, must explicitly convert</span></span><br><span class="line"><span class="keyword">var</span> c <span class="type">int</span> = <span class="type">int</span>(math.Sqrt(<span class="type">float64</span>(a*a + b*b)))</span><br></pre></td></tr></table></figure></li></ul><h2 id="type">Type</h2><h3 id="basic-types">Basic Types</h3><ol type="1"><li><code>bool</code></li><li><code>string</code></li><li><code>int</code>,<code>int8</code>,<code>int16</code>,<code>int32</code>,<code>int64</code>,<code>uint</code>,<code>uint8</code>,<code>uint16</code>,<code>uint32</code>,<code>uint64</code></li><li><code>byte</code> // alias for <code>uint8</code></li><li><code>rune</code> // char in java, alias for <code>int32</code><ul><li>official：rune is an alias for int32 and is equivalent to int32 inall ways. It is used, by convention, to distinguish character valuesfrom integer values.</li></ul></li><li><code>float32</code>, <code>float64</code></li><li><code>complex64</code>, <code>complex128</code></li></ol><h2 id="constant">Constant</h2><h3 id="initialization-1">Initialization</h3><ol type="1"><li><p>Full version <figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> a <span class="type">int</span> = <span class="number">1</span></span><br></pre></td></tr></table></figure></p></li><li><p>Without stating the type <figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> a = <span class="number">1</span></span><br></pre></td></tr></table></figure> In Go programminglanguage, the initialization cannot be like the following:<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> a <span class="type">int</span> <span class="comment">// not legal</span></span><br><span class="line">a = <span class="number">1</span> <span class="comment">// not legal</span></span><br></pre></td></tr></table></figure></p></li></ol><h3 id="enum-no-enum-explicitly-in-go">Enum (No enum explicitly inGo)</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> (</span><br><span class="line">  cpp = <span class="number">1</span></span><br><span class="line">  java = <span class="number">2</span></span><br><span class="line">  python = <span class="number">3</span></span><br><span class="line">  golang = <span class="number">4</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure><p>For simplicity, we can use <code>iota</code> keyword for autoincrement <figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> (</span><br><span class="line">  cpp = <span class="literal">iota</span></span><br><span class="line">  java</span><br><span class="line">  python</span><br><span class="line">  golang</span><br><span class="line">)</span><br></pre></td></tr></table></figure></p><p>For more advanced usage: <figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// e.g., we want to create b, kb, mb, gb, tb, pb...</span></span><br><span class="line"><span class="keyword">const</span> (</span><br><span class="line">  b = <span class="number">1</span> &lt;&lt; (<span class="number">10</span> * <span class="literal">iota</span>)</span><br><span class="line">  kb</span><br><span class="line">  mb</span><br><span class="line">  gb</span><br><span class="line">  tb</span><br><span class="line">  pb</span><br><span class="line">)</span><br></pre></td></tr></table></figure></p><h2 id="condition-statement">Condition Statement</h2><h3 id="for-loop">For loop</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span> j:=<span class="number">1</span> ; j&lt;<span class="number">10</span> ; j++ &#123;</span><br><span class="line">        fmt.Println(<span class="string">&quot;j&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>here <code>j:=1</code>is the alias for <code>var int j = 1</code> Injava, the type can be written in the for loop condition <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">0</span>; i&lt;<span class="number">10</span>; i++) &#123;</span><br><span class="line"><span class="comment">// statement here</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>For go, it does not allow type to be written in the condition, but youcan use more stupid way of declaring the variable <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">var</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">1</span></span><br><span class="line"><span class="keyword">for</span> j=<span class="number">1</span>; j&lt;<span class="number">10</span>; j++ &#123;</span><br><span class="line">    <span class="comment">// statement here</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure> Also,for go, <strong>there is no <code>**while**</code> statement</strong>,meaning that if you want to do while statement, the way to do that is tolimit the condition to just one: <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">var</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">1</span></span><br><span class="line"><span class="keyword">for</span> j &lt; <span class="number">10</span> &#123;</span><br><span class="line">    <span class="comment">//statement here</span></span><br><span class="line">j = j + <span class="number">1</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure> Others:<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">var</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">1</span></span><br><span class="line"><span class="comment">// infinite loop</span></span><br><span class="line"><span class="keyword">for</span> &#123;</span><br><span class="line">    <span class="comment">//statement here</span></span><br><span class="line">j = j + <span class="number">1</span></span><br><span class="line">    <span class="keyword">if</span> j &gt;= <span class="number">10</span> &#123;</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">        </span><br></pre></td></tr></table></figure></p><p>For also allowed for three ways that substitute the<code>while</code></p><ol type="1"><li><p>ignore initial state <figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">convertToBin</span><span class="params">(v <span class="type">int</span>)</span></span> <span class="type">string</span> &#123;</span><br><span class="line">  result := <span class="string">&quot;&quot;</span></span><br><span class="line">  <span class="keyword">for</span> ; v &gt; <span class="number">0</span> ; v /= <span class="number">2</span> &#123;</span><br><span class="line">    result = strconv.Itoa(v % <span class="number">2</span>) + result</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> result</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p></li><li><p>ignore initial and final state <figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> scanner.Scan() &#123;</span><br><span class="line">  fmt.Println(scanner.Text())</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p></li><li><p>ignore initial and final state, and update condition<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// equals to while (true)</span></span><br><span class="line"><span class="keyword">for</span> &#123;</span><br><span class="line">  fmt.Println(<span class="string">&quot;abc&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p></li></ol><h2 id="ifelse">If/else</h2><p>Similar to most of the language, with a few exceptions:</p><ol type="1"><li>Can exclude <code>()</code>, but cannot exclude <code>&#123;&#125;</code>, theleft bracket <code>&#123;</code> must be on the same line with<code>if</code> statement</li><li><strong>Go doesn't have Ternary Operator ( x &lt; 0 ? A : B)</strong></li></ol><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">  <span class="string">&quot;fmt&quot;</span></span><br><span class="line">  <span class="string">&quot;io/iotuil&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">  <span class="keyword">const</span> filename = <span class="string">&quot;abc.txt&quot;</span></span><br><span class="line">  <span class="comment">// normal way</span></span><br><span class="line">  contents, err := ioutil.ReadFile(filename)</span><br><span class="line">  <span class="keyword">if</span> (err != <span class="literal">nil</span>) &#123;</span><br><span class="line">    fmt.Println(err)</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    fmt.Printf(<span class="string">&quot;%s\n&quot;</span>, contents)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Another way to write this would be:</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">  <span class="string">&quot;fmt&quot;</span></span><br><span class="line">  <span class="string">&quot;io/ioutil&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">  <span class="keyword">const</span> filename = <span class="string">&quot;abc.txt&quot;</span></span><br><span class="line">  <span class="comment">// equivalent to contents, err := ioutil.ReadFile(filename)</span></span><br><span class="line">  <span class="comment">// if (err != nil) &#123;</span></span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">  <span class="keyword">if</span> contents, err := ioutil.ReadFile(filename); err != <span class="literal">nil</span> &#123;</span><br><span class="line">    fmt.Println(err)</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    fmt.Printf(<span class="string">&quot;%s\n&quot;</span>, contents)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="switch">Switch</h2><p>Switch statements in go propgramming language doesn't require break;they will break by default, fallthrough keyword used to go to NEXTstatement even if condition doesn't match, <code>fallthrough</code> islike a continue so statement that after it will also executed. however aworkaround is to use <code>labels</code> and <code>goto</code><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">switch</span> var1 &#123;</span><br><span class="line">    <span class="keyword">case</span> var1:</span><br><span class="line">    <span class="keyword">case</span> var2:</span><br><span class="line">        <span class="keyword">fallthrough</span></span><br><span class="line">    <span class="keyword">case</span> var3:</span><br><span class="line">        f()</span><br><span class="line">    <span class="keyword">default</span>:</span><br><span class="line">        ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure> Example: <figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">eval</span><span class="params">(a, b <span class="type">int</span>, op <span class="type">string</span>)</span></span> &#123;</span><br><span class="line">  <span class="keyword">var</span> result <span class="type">int</span></span><br><span class="line">  <span class="keyword">switch</span> op &#123;</span><br><span class="line">  <span class="keyword">case</span> <span class="string">&quot;+&quot;</span>:</span><br><span class="line">    result = a + b</span><br><span class="line">  <span class="keyword">case</span> <span class="string">&quot;-&quot;</span>:</span><br><span class="line">    result = a - b</span><br><span class="line">  <span class="keyword">case</span> <span class="string">&quot;*&quot;</span>:</span><br><span class="line">    result = a * b</span><br><span class="line">  <span class="keyword">case</span> <span class="string">&quot;/&quot;</span>:</span><br><span class="line">    result = a / b</span><br><span class="line">  <span class="keyword">default</span>:</span><br><span class="line">    <span class="built_in">panic</span>(<span class="string">&quot;unsupported operator:&quot;</span> + op)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> result</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>Note:</p><ol type="1"><li><p>Switch will automatically "break" (we do not need to writebreak)</p></li><li><p><code>fallthrough</code> = continue running the following codewithout breaking</p></li></ol><h2 id="array">Array</h2><h3 id="initialzation">Initialzation</h3><p>ways of declaring initialization <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// first one</span></span><br><span class="line"><span class="keyword">var</span> a [<span class="number">3</span>] <span class="type">int</span></span><br><span class="line"><span class="keyword">var</span> balance [<span class="number">10</span>] float32</span><br><span class="line">arr2 := [<span class="number">3</span>]<span class="type">int</span>&#123;<span class="number">1</span>, <span class="number">3</span>, <span class="number">5</span>&#125;</span><br><span class="line">arr3 := [...]<span class="type">int</span>&#123;<span class="number">2</span>, <span class="number">4</span>, <span class="number">6</span>, <span class="number">8</span>, <span class="number">10</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// two-dimension</span></span><br><span class="line"><span class="keyword">var</span> x [<span class="number">3</span>][<span class="number">2</span>] <span class="type">int</span></span><br></pre></td></tr></table></figure></p><h3 id="iterate-over-array">iterate over array</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// first method</span></span><br><span class="line"><span class="keyword">for</span> i := <span class="number">0</span>; i&lt;<span class="built_in">len</span>(arr3); i++ &#123;</span><br><span class="line">  fmt.Println(arr3[i])</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// second method: using range</span></span><br><span class="line"><span class="keyword">for</span> i := <span class="keyword">range</span> arr3 &#123;</span><br><span class="line">  fmt.Println(arr3[i])</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// if we want to directly access the value</span></span><br><span class="line"><span class="keyword">for</span> i, v := <span class="keyword">range</span> arr3 &#123;</span><br><span class="line">  fmt.Println(i, v)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="slices">Slices</h3><p>Slices are of dynamic size <figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">letters := []<span class="type">string</span>&#123;<span class="string">&quot;a&quot;</span>, <span class="string">&quot;b&quot;</span>, <span class="string">&quot;c&quot;</span>, <span class="string">&quot;d&quot;</span>&#125;</span><br><span class="line">    </span><br><span class="line"><span class="comment">/*  using make -&gt; make([]T, len, cap) */</span></span><br><span class="line"><span class="keyword">var</span> s []<span class="type">byte</span></span><br><span class="line">s = <span class="built_in">make</span>([]<span class="type">byte</span>, <span class="number">5</span>, <span class="number">5</span>)</span><br><span class="line"><span class="comment">//OR</span></span><br><span class="line">s := <span class="built_in">make</span>([]<span class="type">byte</span>, <span class="number">5</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// both equiavlent to: s == []byte&#123;0, 0, 0, 0, 0&#125;</span></span><br></pre></td></tr></table></figure></p><ul><li>左开右闭</li><li>A slice does not store any data, it just describes a section of anunderlying array. Changing the elements of a slice modifies thecorresponding elements of its underlying array. <strong>Other slicesthat share the same underlying array will see thosechanges</strong>.</li><li>Slicing a slice changes pointers of the underlying array, so it isas efficient as manipulating array indices, size and capacity of the newslice are changed too.</li><li>Example usage: <figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">names := [<span class="number">4</span>]<span class="type">string</span>&#123;<span class="string">&quot;John&quot;</span>,<span class="string">&quot;Paul&quot;</span>,<span class="string">&quot;George&quot;</span>,<span class="string">&quot;Ringo&quot;</span>,&#125;</span><br><span class="line">fmt.Println(names)   <span class="comment">//[John Paul George Ringo]</span></span><br><span class="line">a := names[<span class="number">0</span>:<span class="number">2</span>]</span><br><span class="line">b := names[<span class="number">1</span>:<span class="number">3</span>]</span><br><span class="line">fmt.Println(a, b)    <span class="comment">//[John Paul] [Paul George]</span></span><br><span class="line">b[<span class="number">0</span>] = <span class="string">&quot;XXX&quot;</span></span><br><span class="line">fmt.Println(a, b)    <span class="comment">//[John XXX] [XXX George] </span></span><br><span class="line">fmt.Println(names)   <span class="comment">//[John XXX George Ringo]</span></span><br></pre></td></tr></table></figure></li></ul><h4 id="difference-between-slice-and-array">Difference between slice andarray</h4><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//This is an array literal:</span></span><br><span class="line">[<span class="number">3</span>]<span class="type">bool</span>&#123;<span class="literal">true</span>, <span class="literal">true</span>, <span class="literal">false</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//And this creates the same array as above, then builds a slice that references it:</span></span><br><span class="line">[]<span class="type">bool</span>&#123;<span class="literal">true</span>, <span class="literal">true</span>, <span class="literal">false</span>&#125;</span><br></pre></td></tr></table></figure><h4 id="iterating-over-slice">Iterating over slice</h4><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> i, v := <span class="keyword">range</span> arr &#123;<span class="comment">//do stuff &#125;</span></span><br><span class="line"><span class="keyword">for</span> _, v := <span class="keyword">range</span> arr &#123;<span class="comment">//do stuff &#125;</span></span><br><span class="line"><span class="keyword">for</span> i, _ := <span class="keyword">range</span> arr &#123;<span class="comment">//do stuff &#125;</span></span><br></pre></td></tr></table></figure><h2 id="map">Map</h2><p>Map format: <code>map[k]v</code></p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">m := <span class="keyword">map</span>[<span class="type">string</span>]<span class="type">string</span> &#123;</span><br><span class="line">  <span class="string">&quot;name&quot;</span>: <span class="string">&quot;ccmouse&quot;</span>,</span><br><span class="line">  <span class="string">&quot;course&quot;</span>: <span class="string">&quot;golang&quot;</span>,</span><br><span class="line">  <span class="string">&quot;site&quot;</span>, <span class="string">&quot;imooc&quot;</span>,</span><br><span class="line">  <span class="string">&quot;quality&quot;</span>: <span class="string">&quot;notbad&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="create-a-map">Create a map</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// m2 == empty map</span></span><br><span class="line">m2 := <span class="built_in">make</span>(<span class="keyword">map</span>[<span class="type">string</span>]<span class="type">int</span>)</span><br><span class="line"><span class="comment">// initialize the space</span></span><br><span class="line">m2 := <span class="built_in">make</span>(<span class="keyword">map</span>[<span class="type">string</span>]<span class="type">int</span>, <span class="number">5</span>)</span><br></pre></td></tr></table></figure><h3 id="traversing-the-map-using-range">Traversing the map (usingrange)</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> k, v := <span class="keyword">range</span> m &#123;</span><br><span class="line">  fmt.Println(k, v)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="get-element">Get Element</h3><p>Unlike Python when accessing non-exist key, it will pop exceptions,Go will not, and it will return two values on accessing the valuethrough keys, 1) the value itself, and 2) a bool of whether the elementexists <figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ok will be whether the key exists</span></span><br><span class="line">courseName, ok := m1[<span class="string">&quot;course&quot;</span>]</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> courseName, ok := m1[<span class="string">&quot;course&quot;</span>]; ok &#123;</span><br><span class="line">  fmt.Println(<span class="string">&quot;causeName&quot;</span>)</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">  fmt.Println(<span class="string">&quot;key does not exist&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h3 id="delete-element">Delete Element</h3><p>The delete() function is a direct and effective way to eliminate akey−value pair from a map. By specifying the key to delete, you canpromptly remove the corresponding data from the map. <figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//  delete(mapName, key)</span></span><br><span class="line">name, ok := m[<span class="string">&quot;name&quot;</span>]</span><br><span class="line"><span class="built_in">delete</span>(m, <span class="string">&quot;name&quot;</span>)</span><br></pre></td></tr></table></figure></p><h3 id="maps-key">Map's Key</h3><ul><li>Map uses hashmap as its data structure, so other than<strong>slice</strong>, <strong>map</strong>, <strong>function</strong>,other type can be used as keys.</li><li>Sturct data without <strong>slice</strong>, <strong>map</strong> and<strong>function</strong> can also be the key</li></ul><h2 id="functions-in-go">Functions in Go</h2><h3 id="typical-function">Typical Function</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// return void</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">add</span><span class="params">(x <span class="type">int</span>, y <span class="type">int</span>)</span></span>  &#123;</span><br><span class="line">  fmt.Println(<span class="string">&quot;Hello, World!&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//-------arguments-----return------</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">add</span><span class="params">(x <span class="type">int</span>, y <span class="type">int</span>)</span></span>  <span class="type">int</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> x + y</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//-----same type arguments-----------</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">add</span><span class="params">(x, y <span class="type">int</span>)</span></span>  <span class="type">int</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> x + y</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="multiple-returns">Multiple Returns</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">swap</span><span class="params">(x, y <span class="type">string</span>)</span></span> (<span class="type">string</span>, <span class="type">string</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> y, x</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//in main</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">a, b := swap(<span class="string">&quot;hello&quot;</span>, <span class="string">&quot;world&quot;</span>)</span><br><span class="line">fmt.Println(a, b) <span class="comment">//prints &quot;world hello&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="named-returns">Named Returns</h3><p>You can declare return variables and name them at the beginning, theyare returned in the end. <figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//Returns x,y at the end.</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">split</span><span class="params">(sum <span class="type">int</span>)</span></span> (x, y <span class="type">int</span>) &#123;</span><br><span class="line">    x = sum * <span class="number">4</span> / <span class="number">9</span></span><br><span class="line">    y = sum - x</span><br><span class="line">    <span class="comment">// by default, it returns x and y</span></span><br><span class="line">    <span class="keyword">return</span></span><br><span class="line">    <span class="comment">//return a,b  &lt;- u can override default return of x,y.</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h3 id="variadic-functions">Variadic Functions</h3><p>The rightmost argument can be a list of variable size(<em>slice</em>) of data. <code>...</code> three dots means you arepassing a variable size of data <figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">average</span><span class="params">(x <span class="type">int</span>, values ...<span class="type">int</span>)</span></span> <span class="type">float64</span> &#123;</span><br><span class="line">    <span class="comment">//print values</span></span><br><span class="line">    fmt.Println(<span class="string">&quot;Single argument value: &quot;</span>, x)</span><br><span class="line">    fmt.Println(<span class="string">&quot;Variable argument values: &quot;</span>, values)</span><br><span class="line"></span><br><span class="line">    <span class="comment">//calculate average</span></span><br><span class="line">    total := <span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> _, value := <span class="keyword">range</span> values &#123;</span><br><span class="line">      total += value</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="type">float64</span>(total) / <span class="type">float64</span>(<span class="built_in">len</span>(values))</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    avg := average(<span class="number">10</span>,<span class="number">20</span>,<span class="number">30</span>,<span class="number">40</span>,<span class="number">50</span>)</span><br><span class="line">    <span class="built_in">println</span>(<span class="string">&quot;Average:&quot;</span>, avg)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h3 id="defer-keyword">Defer Keyword</h3><p><code>Defer</code> used before a functions executes the function atthe end of the scope of it.</p><ul><li>usually used to close opened files/buffers so you open the file andcloses it using defer in the next line to keep things clean.</li><li>they're executed as a <strong>stack</strong>. <figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">fmt.Println(<span class="string">&quot;One&quot;</span>)</span><br><span class="line"><span class="keyword">defer</span> fmt.Println(<span class="string">&quot;Four&quot;</span>)</span><br><span class="line"><span class="keyword">defer</span> fmt.Println(<span class="string">&quot;Three&quot;</span>)</span><br><span class="line">fmt.Println(<span class="string">&quot;Two&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">//Prints One Two Three Four</span></span><br></pre></td></tr></table></figure></li></ul><h3 id="type-function-and-returning-functions">Type Function andReturning Functions</h3><ol type="1"><li>Functions can be assigned to variables<code>func0 := func() int &#123;x++; return x&#125;</code></li><li>Functions that are returned from another functions has its own scopeper returned function <figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">incrementGlobalX</span><span class="params">()</span></span> <span class="type">int</span>  &#123;</span><br><span class="line">  x++</span><br><span class="line">  <span class="keyword">return</span> x</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">wrapper</span><span class="params">()</span></span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span> <span class="type">int</span> &#123;</span><br><span class="line">  x := <span class="number">0</span></span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span> <span class="type">int</span> &#123;</span><br><span class="line">    x++</span><br><span class="line">    <span class="keyword">return</span> x</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    fn := wrapper()</span><br><span class="line">fmt.Print(wrapper())</span><br><span class="line">    fmt.Print(wrapper())</span><br><span class="line">    <span class="comment">// print 12</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure> <figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> x = <span class="number">0</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">  <span class="comment">//local x</span></span><br><span class="line">  x := <span class="number">0</span></span><br><span class="line"></span><br><span class="line">  func0 := <span class="function"><span class="keyword">func</span><span class="params">()</span></span> <span class="type">int</span> &#123;x++; <span class="keyword">return</span> x&#125;</span><br><span class="line">  func1 := incrementGlobalX <span class="comment">//without ()</span></span><br><span class="line">  func2 := wrapper()</span><br><span class="line">  func3 := wrapper()</span><br><span class="line"></span><br><span class="line">  <span class="built_in">println</span>(func0(), <span class="string">&quot; : func0 (local x)&quot;</span>)</span><br><span class="line">  <span class="built_in">println</span>(func1(), <span class="string">&quot; : func1 (global x)&quot;</span>)</span><br><span class="line">  <span class="built_in">println</span>(func2(), <span class="string">&quot; : func2 (per func scope x1)&quot;</span>)</span><br><span class="line">  <span class="built_in">println</span>(func3(), <span class="string">&quot; : func3 (per func scope x2)&quot;</span>)</span><br><span class="line">  <span class="built_in">println</span>(<span class="string">&quot;Second Increment&quot;</span>)</span><br><span class="line">  <span class="built_in">println</span>(func0(), <span class="string">&quot; : func0 (local x)&quot;</span>)</span><br><span class="line">  <span class="built_in">println</span>(func1(), <span class="string">&quot; : func1 (global x)&quot;</span>)</span><br><span class="line">  <span class="built_in">println</span>(func2(), <span class="string">&quot; : func2 (per func scope x1)&quot;</span>)</span><br><span class="line">  <span class="built_in">println</span>(func3(), <span class="string">&quot; : func3 (per func scope x2)&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">incrementGlobalX</span><span class="params">()</span></span> <span class="type">int</span>  &#123;</span><br><span class="line">  x++</span><br><span class="line">  <span class="keyword">return</span> x</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">wrapper</span><span class="params">()</span></span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span> <span class="type">int</span> &#123;</span><br><span class="line">  x := <span class="number">0</span></span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span> <span class="type">int</span> &#123;</span><br><span class="line">    x++</span><br><span class="line">    <span class="keyword">return</span> x</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol><h3 id="receiver">Receiver</h3><p>Receiver is the way you create a method for a specific type/struct<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> rect <span class="keyword">struct</span> &#123;</span><br><span class="line">    width, height <span class="type">int</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// (r *rect) is called rceiver</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(r *rect)</span></span> area() <span class="type">int</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> r.width * r.height</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">r := rect&#123;<span class="number">2</span>,<span class="number">3</span>&#125;</span><br><span class="line">areaX := r.area()</span><br><span class="line">fmt.Println(areaX)</span><br></pre></td></tr></table></figure></p><h2 id="pointers">Pointers</h2><p>Similar to C/C++ <figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> value <span class="type">int</span> = <span class="number">1000</span></span><br><span class="line"><span class="keyword">var</span> pointer *<span class="type">int</span> = &amp;value</span><br><span class="line"><span class="built_in">println</span>(value)                <span class="comment">//1000</span></span><br><span class="line"><span class="built_in">println</span>(pointer)              <span class="comment">//0xfffffffff</span></span><br><span class="line"><span class="built_in">println</span>(*pointer)             <span class="comment">//1000</span></span><br><span class="line">(*pointer)++  <span class="comment">//1001</span></span><br><span class="line">*pointer = *pointer + <span class="number">10</span>    <span class="comment">//1011</span></span><br><span class="line"><span class="built_in">println</span>(*pointer)<span class="comment">//1011</span></span><br><span class="line"><span class="built_in">println</span>(*pointer + *pointer)  <span class="comment">//1011 + 1011 = 2022</span></span><br></pre></td></tr></table></figure></p><p>Difference?</p><ol type="1"><li>Pointer cannot do arithmetic calculation: you can change whatpointer points to, but you cannot change the pointer itself</li></ol><h2 id="pass-by-value-pass-by-reference">Pass by value &amp; Pass byreference</h2><ol type="1"><li>Every thing is passed by value except <strong>arrays, slices, mapsand channels</strong> which some calls r<strong>eference types</strong>,these types are passed by reference ( they internally have pointers, sono copying of the actual data happens when passing them) .</li><li>Unlike C, where the address of a local variable will be recollectedafter the function returns, it's perfectly OK to return the address of alocal variable (like Java); the storage associated with the variablesurvives after the function returns.</li></ol><h2 id="reference">Reference</h2><ol type="1"><li>https://github.com/sherifabdlnaby/Golang-study-notes</li><li>Coursera - Functions, Methods, and Interfaces in Go, University ofCalifornia, Irvine.</li><li>慕课网 Google资深工程师深度讲解Go语言 由浅入深掌握Go语言</li></ol>]]></content>
    
    
    <summary type="html">Go programming language is a grammar-sensitive language, meaning that the language attached great importance on grammar. Go supports gabbage collection. Go does not support inheritance and overloading, but supports interface. Go supports concurrency. Go does not support casting. Go does not support _assert (third-party packages available)_, Go does not support static variable.</summary>
    
    
    
    <category term="Programming Languages" scheme="http://jerry20000730.github.io/categories/Programming-Languages/"/>
    
    
    <category term="Go" scheme="http://jerry20000730.github.io/tags/Go/"/>
    
  </entry>
  
  <entry>
    <title>COMP3052 Computer Security 5 -- Firewall</title>
    <link href="http://jerry20000730.github.io/wiki/Lecture%20Note/COMP3052%20Computer%20Security/CS7/"/>
    <id>http://jerry20000730.github.io/wiki/Lecture%20Note/COMP3052%20Computer%20Security/CS7/</id>
    <published>2024-03-31T20:54:51.000Z</published>
    <updated>2024-03-31T20:54:51.000Z</updated>
    
    <content type="html"><![CDATA[<!-- toc --><ul><li><a href="#osi-seven-layer-model--for-reference-">OSI Seven LayerModel (for reference)</a></li><li><a href="#firewall-brief">Firewall brief</a><ul><li><a href="#firewall-basic-function">Firewall Basic Function</a></li><li><a href="#disadvantage-of-firewall">Disadvantage ofFirewall</a></li><li><a href="#types-of-firewall">Types of Firewall</a><ul><li><a href="#packet-filters">Packet Filters</a></li><li><a href="#stateful--dynamic--packet-filters">Stateful (dynamic)Packet Filters</a></li><li><a href="#proxy-servers">Proxy Servers</a></li><li><a href="#nat--network-address-translation-">NAT (Network AddressTranslation)</a></li><li><ahref="#why-we-need-host-based-firewall-if-we-already-have-network-based-firewall-">Whywe need host-based firewall if we already have network-basedfirewall?</a></li></ul></li><li><a href="#iptables--configures-firewall-in-linux-">IPTABLES(configures firewall in Linux)</a><ul><li><a href="#example-rules-for-iptables">Example rules forIPTABLES</a></li></ul></li><li><a href="#packet-filtering-policies--classification-">PacketFiltering Policies (classification)</a></li><li><a href="#stateful-packet-filtering-policies">Stateful PacketFiltering Policies</a><ul><li><ahref="#-font-color---ffa500----understand----font--new--established--related-in-iptables"><font color="#FFA500">[UNDERSTAND]</font>NEW, ESTABLISHED, RELATED in IPTABLES</a></li></ul></li><li><a href="#packet-filter-issues---drawbacks">Packet Filter Issues&amp; Drawbacks</a></li></ul></li></ul><!-- tocstop --><h1 id="osi-seven-layer-model-for-reference">OSI Seven Layer Model (forreference)</h1><p><img src="/images/CS/Part5/1.png" /></p><h1 id="firewall-brief">Firewall brief</h1><ol type="1"><li><p><strong>Usage</strong>: prevents unauthorised access of packetsfrom one network to another.</p></li><li><p><strong>Functions</strong>:</p></li></ol><ul><li>Implements 'single point' security measures</li><li>Security event monitoring through packet analysis and logging</li><li>Network-based access control through implementation of a ruleset.</li></ul><ol start="3" type="1"><li><strong>Location</strong>:</li></ol><ul><li>Network Firewalls: placed between a subnet and the internet</li><li>Host-based Firewalls: placed on individual machines</li></ul><ol start="4" type="1"><li>extended concept: <strong>DMZ</strong> (demilitarized zone)</li></ol><ul><li>A demilitarized zone is a small subnet that separates externallyfacing services from the internal network</li><li>Firewall is an implementation of DMZ</li></ul><h2 id="firewall-basic-function">Firewall Basic Function</h2><ol type="1"><li>Firewall defends a protected network against parties services thatshould only be available internally (公司内网)</li><li>Firewalls restrict access from inside to outside services</li><li>Firewalls can perform Network Address Translation (NAT)</li></ol><h2 id="disadvantage-of-firewall">Disadvantage of Firewall</h2><ol type="1"><li>Cannot protect against attacks that bypass the firewall(tunneling)</li><li>Cannot protect against internal threats or insiders</li><li>Cannot protect against the transfer of virus-infected programs orfiles</li></ol><h2 id="types-of-firewall">Types of Firewall</h2><h3 id="packet-filters">Packet Filters</h3><ul><li><p>Location: layer3 (network layer) and layer4 (transportlayer)</p></li><li><p>Goal: specify which packets are allowed or dropped, based on:</p><ul><li>Src / Dst IP</li><li>TCP/UDP port number</li></ul></li></ul><p>The packet filter will be used for both inbound and outbound traffic,and achieved by examining the packet header.</p><p>Example implementation of Packet Fileter in Linux:<strong><em>IPTABLES</em></strong></p><h3 id="stateful-dynamic-packet-filters">Stateful (dynamic) PacketFilters</h3><ul><li>Stateful packet filters understand requests and replies<ul><li>E.g. TCP open sequence (SYN, SYN-ACK, ACK) pattern</li></ul></li><li>Stateful packet filters can support policies for a wide range ofprotocols: TCP, FTP, IRC etc</li></ul><h3 id="proxy-servers">Proxy Servers</h3><p>Using a proxy server to represent you to send request to the server.So that it can prevent unwanted connection or malicious behaviours tothe actual web server.</p><p><img src="/images/CS/Part5/proxy.png" /></p><p><strong>Issues:</strong></p><ol type="1"><li><p>large overhead (send packet to the proxy server first, and thenthe target web server)</p></li><li><p>more expensive than packet filtering (need a seperate proxyserver)</p></li><li><p>Configuration is complex</p></li></ol><h3 id="nat-network-address-translation">NAT (Network AddressTranslation)</h3><ul><li>background: shortage of IP address</li><li>Advantage:<ol type="1"><li>machine is totally hidden from the internet</li><li>only established connections are forwarded to your internalmachine</li><li>prevent unsolicited attacks on random ports</li></ol></li></ul><h3id="why-we-need-host-based-firewall-if-we-already-have-network-based-firewall">Whywe need host-based firewall if we already have network-basedfirewall?</h3><ul><li>Background:<ul><li>host-based firewall: firewall installed on endpoint devices: laptop,mobile devices, etc.,</li><li>Network-based firewall: A network-based firewall is a firewallsoftware installed at the network perimeter, typically <strong>betweenan organization's internal network and the Internet</strong>.</li></ul></li><li>Why?<ul><li>Subnet is not secure. Attack may come from internal, notexternal</li></ul></li></ul><h2 id="iptables-configures-firewall-in-linux">IPTABLES (configuresfirewall in Linux)</h2><p><strong>Brief:</strong> - First rule to match is applied - Rules areorganized in chains - Uses tables to store chains, matches result in ajump, else we check next rule - Multiple chains can exist in onetable</p><p><img src="/images/CS/Part5/iptables.png" /></p><h3 id="example-rules-for-iptables">Example rules for IPTABLES</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">iptables -A INPUT -i eth0 -p tcp --dport 80 -j DROP</span><br></pre></td></tr></table></figure><p>where:</p><table><colgroup><col style="width: 13%" /><col style="width: 86%" /></colgroup><thead><tr><th>Parameter</th><th>Meaning</th></tr></thead><tbody><tr><td><code>-A</code></td><td>Appending to specific chains</td></tr><tr><td><code>INPUT</code></td><td>Rule in INPUT chain</td></tr><tr><td><code>-i</code></td><td>Checking incoming service request</td></tr><tr><td><code>eth0</code></td><td>Through network adapter 1</td></tr><tr><td><code>tcp</code></td><td>Rule applies to TCP protocol instead of UDP</td></tr><tr><td><code>--dport</code></td><td>Destination port (the listening port on this machine)</td></tr><tr><td><code>-j</code></td><td>Jump</td></tr><tr><td><code>DROP</code></td><td>Jump target is DROP, which means to drop all incoming request</td></tr></tbody></table><h2 id="packet-filtering-policies-classification">Packet FilteringPolicies (classification)</h2><ol type="1"><li><p>Permissive (Black listing) - allow everything except dangerousservice: easy to make mistakes <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># allow all input/forward/output</span></span><br><span class="line">iptables -P INPUT/FORWARD/OUTPUT ACCEPT</span><br><span class="line"><span class="comment"># but restrict incoming connection to the machine ssh services</span></span><br><span class="line">iptables -A INPUT -p tcp --dport ssh -j DROP</span><br></pre></td></tr></table></figure></p></li><li><p>Restrictive (White listing) - block everything except designateduseful services: secure, but easy to DoS yourself <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># drop all input/forward/output</span></span><br><span class="line">iptables -P INPUT/FORWARD/OUTPUT DROP</span><br><span class="line"><span class="comment"># allow outgoing SSH traffic </span></span><br><span class="line">iptables -A OUTPUT -p tcp --dport ssh -j ACCEPT</span><br></pre></td></tr></table></figure></p></li></ol><h2 id="stateful-packet-filtering-policies">Stateful Packet FilteringPolicies</h2><p>IPTABLES has modules for stateful packet filtering</p><ul><li>Allow incoming / outgoing SSH connections <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">iptables -A INPUT -i eth0 -p tcp --dport 22 -m state --state NEW, ESTABLISHED -j ACCEPT</span><br><span class="line">iptables -A OUTPUT -o eth0 -p tcp --sport 22 -m state --state NEW, ESTABLISHED -j ACCEPT</span><br></pre></td></tr></table></figure></li></ul><h3id="understand-new-established-related-in-iptables"><font color="#FFA500">[UNDERSTAND]</font>NEW, ESTABLISHED, RELATED in IPTABLES</h3><ul><li><strong>NEW</strong> — A packet requesting a new connection, such asan HTTP request.</li><li><strong>ESTABLISHED</strong> — A packet that is part of an existingconnection.</li><li><strong>RELATED</strong> — A packet that is requesting a newconnection but is part of an existing connection.</li></ul><h2 id="packet-filter-issues-drawbacks">Packet Filter Issues &amp;Drawbacks</h2><ol type="1"><li>Cannot prevent attacks that exploit application-specificvulnerabilities</li><li>Cannot support higher-level authentication schemes</li><li>Easy to accidentally allow or deny packets incorrectly</li></ol>]]></content>
    
    
    <summary type="html">A firewall is a network security device that monitors incoming and outgoing network traffic and decides whether to allow or block specific traffic based on a defined set of security rules</summary>
    
    
    
    <category term="COMP3052 Computer Security" scheme="http://jerry20000730.github.io/categories/COMP3052-Computer-Security/"/>
    
    
    <category term="COMP3052 Computer Security" scheme="http://jerry20000730.github.io/tags/COMP3052-Computer-Security/"/>
    
  </entry>
  
  <entry>
    <title>腾讯2024暑期实习笔试</title>
    <link href="http://jerry20000730.github.io/wiki/%E7%AE%97%E6%B3%95/%E7%AE%97%E6%B3%95%E7%AC%94%E8%AF%95/tencent/"/>
    <id>http://jerry20000730.github.io/wiki/%E7%AE%97%E6%B3%95/%E7%AE%97%E6%B3%95%E7%AC%94%E8%AF%95/tencent/</id>
    <published>2024-03-31T19:56:54.000Z</published>
    <updated>2024-03-31T19:56:54.000Z</updated>
    
    <content type="html"><![CDATA[<!-- toc --><ul><li><a href="#q1--------">Q1 小红的图上染色</a><ul><li><a href="#----">题目描述</a></li><li><a href="#----">输入描述</a></li><li><a href="#----">输出描述</a></li><li><a href="#--1">示例1</a></li><li><a href="#----">解题思路</a></li></ul></li><li><a href="#q2--------">Q2 小红的链表破裂</a><ul><li><a href="#----">题目描述</a></li><li><a href="#--1">示例1</a></li><li><a href="#----">解题思路</a></li></ul></li><li><a href="#q3-------">Q3 小红的连通图</a><ul><li><a href="#----">题目描述</a></li><li><a href="#----">输入描述</a></li><li><a href="#----">输出描述</a></li><li><a href="#----">解题思路</a></li></ul></li><li><a href="#q4--------">Q4 小红的数组分割</a><ul><li><a href="#----">题目内容</a></li><li><a href="#----">输入描述</a></li><li><a href="#----">输出描述</a></li><li><a href="#--1">示例1</a></li><li><a href="#-----">解题思路：</a></li></ul></li><li><a href="#q5----tencent--">Q5 小红的tencent矩阵</a><ul><li><a href="#----">题目描述</a></li><li><a href="#----">输入描述</a></li><li><a href="#----">输出描述</a></li><li><a href="#--1">示例1</a></li><li><a href="#----">解题思路</a></li></ul></li></ul><!-- tocstop --><h1 id="q1-小红的图上染色">Q1 小红的图上染色</h1><h2 id="题目描述">题目描述</h2><p>小红拿到了一个无向图，其中一些边被染成了红色，小红定义一个点为”好点“，当且仅当这个点的所有邻边都是红边。现在请你求出这个无向图”好点“的数量</p><p>注意：如果一个节点没有任何邻边，那么它也是好点</p><h2 id="输入描述">输入描述</h2><p>第一行输入两个正整数<span class="math inline">\(m\)</span>,<spanclass="math inline">\(n\)</span>，代表节点的数量和边的数量。</p><p>接下来的m行，每行输入两个正整数<spanclass="math inline">\(u\)</span>, <spanclass="math inline">\(v\)</span>和一个字符chr，代表节点u和v有一条边连接，如果chr为'R'，代表这条边被染红；'W'代表未被染色</p><p><span class="math inline">\(1 &lt;= n, m &lt;= 10^5\)</span></p><p><span class="math inline">\(1 &lt;= u, v &lt;= n\)</span></p><h2 id="输出描述">输出描述</h2><p>一个整数，代表“好点”的数量</p><h2 id="示例1">示例1</h2><p>输入 <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">4 4</span><br><span class="line">1 2 R</span><br><span class="line">2 3 W</span><br><span class="line">3 4 W</span><br><span class="line">1 4 R</span><br></pre></td></tr></table></figure></p><p>输出 <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1</span><br></pre></td></tr></table></figure></p><p>说明： 只有1号节点是好点</p><h2 id="解题思路">解题思路</h2><p>无向图使用邻接表构建出邻接表，再构建一个node的hashmap储存红边数量，最后判断邻接表长度是否等于红边数量。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># edge: [[&quot;1&quot;, &quot;2&quot;, &quot;R&quot;], [&quot;2&quot;, &quot;3&quot;, &quot;W&quot;], [&quot;3&quot;, &quot;4&quot;, &quot;W&quot;], [&quot;1&quot;, &quot;4&quot;, &quot;R&quot;]]</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">build_graph_and_red_edges</span>(<span class="params">edges: <span class="type">List</span>[<span class="type">List</span>[<span class="built_in">str</span>]]</span>):</span><br><span class="line">    <span class="comment"># 用于储存图</span></span><br><span class="line">    graph = defaultdict(<span class="built_in">list</span>)</span><br><span class="line">    <span class="comment"># 用于储存一个node的红边数量</span></span><br><span class="line">    red = defaultdict(<span class="built_in">int</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> u, v, color <span class="keyword">in</span> edges:</span><br><span class="line">        graph[<span class="built_in">int</span>(u)].append(v)</span><br><span class="line">        graph[<span class="built_in">int</span>(v)].append(u)</span><br><span class="line">        <span class="keyword">if</span> color == <span class="string">&quot;R&quot;</span>:</span><br><span class="line">            red[<span class="built_in">int</span>(u)] += <span class="number">1</span></span><br><span class="line">            red[<span class="built_in">int</span>(v)] += <span class="number">1</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> graph, red</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">count_good_nodes</span>(<span class="params">graph, red, n</span>):</span><br><span class="line">    res = <span class="number">0</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> node <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>, n+<span class="number">1</span>):</span><br><span class="line">        <span class="keyword">if</span> <span class="built_in">len</span>(graph[node]) == red[node]:</span><br><span class="line">            res += <span class="number">1</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> res</span><br></pre></td></tr></table></figure><h1 id="q2-小红的链表破裂">Q2 小红的链表破裂</h1><h2 id="题目描述-1">题目描述</h2><p>小红拿到了一个链表。她准备将这个链表断裂成两个链表，再拼接到一起，使得链表从头节点到尾部升序。你能帮小红判断是否达成目的吗？</p><p>给定的为一个链表数组，你需要对于数组中每个链表进行一次“是”或“否”的回答，并返回布尔数组。</p><p>每个链表的长度不小于2，且每个链表中不包含两个相等的元素。所有链表的长度之和保证不超过<spanclass="math inline">\(10^5\)</span></p><h2 id="示例1-1">示例1</h2><p>输入： <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[&#123;1, 2, 3&#125;, &#123;2, 3, 1&#125;, &#123;3, 2, 1&#125;]</span><br></pre></td></tr></table></figure></p><p>输出： <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[true, false, true]</span><br></pre></td></tr></table></figure></p><p>说明：</p><p>第三个链表无论怎么操作都不满足条件</p><h2 id="解题思路-1">解题思路</h2><p>只有三种情况：</p><ol type="1"><li>升序</li><li>先升序后降序</li><li>先降序后升序</li></ol><p>才能满足断裂后拼接在一起时满足升序的</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">check_sorted_linked_lists</span>(<span class="params">arr</span>):</span><br><span class="line">    results = []</span><br><span class="line">    <span class="comment"># 由于我不知道原题的输入长什么样</span></span><br><span class="line">    <span class="comment"># 暂且按照数组来进行代码处理</span></span><br><span class="line">    <span class="keyword">for</span> lst <span class="keyword">in</span> arr:</span><br><span class="line">        </span><br><span class="line">        <span class="comment"># 找到链表(数组)中的最大值和最小值的位置</span></span><br><span class="line">        min_index = lst.index(<span class="built_in">min</span>(lst))</span><br><span class="line">        max_index = lst.index(<span class="built_in">max</span>(lst))</span><br><span class="line">        <span class="comment"># 判断三种情况</span></span><br><span class="line">        <span class="comment"># 1. 升序</span></span><br><span class="line">        <span class="comment"># 2. 先升序后降序</span></span><br><span class="line">        <span class="comment"># 3. 先降序后升序</span></span><br><span class="line">        <span class="keyword">if</span> <span class="built_in">sorted</span>(lst[:min_index+<span class="number">1</span>]) == lst[:min_index+<span class="number">1</span>] <span class="keyword">and</span> <span class="built_in">sorted</span>(lst[max_index:]) == lst[max_index:]:</span><br><span class="line">            results.append(<span class="literal">True</span>)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            results.append(<span class="literal">False</span>)</span><br><span class="line">    <span class="keyword">return</span> results</span><br></pre></td></tr></table></figure><h1 id="q3-小红的连通图">Q3 小红的连通图</h1><h2 id="题目描述-2">题目描述</h2><p>小红拿到了一个有n个节点的无向图，这个图初始并不是连通图。</p><p>现在小红想知道，添加恰好一条边使得这个图连通，有多少种不同的加边方案？</p><h2 id="输入描述-1">输入描述</h2><p>第一行输入两个正整数<span class="math inline">\(n\)</span>, <spanclass="math inline">\(m\)</span>，用空格隔开。</p><p>接下来的m行，每行输入两个正整数<spanclass="math inline">\(u\)</span>, <spanclass="math inline">\(v\)</span>，代表节点u和节点v之间有一条边连接。</p><p><span class="math inline">\(1 &lt;= n, m &lt;= 10^5\)</span> <spanclass="math inline">\(1 &lt;= u, v &lt;= n\)</span></p><p>保证给出的图示不连通的。</p><h2 id="输出描述-1">输出描述</h2><p>一个整数，代表加边的方案数</p><h2 id="解题思路-2">解题思路</h2><p>我不会，让我想想...</p><h1 id="q4-小红的数组分割">Q4 小红的数组分割</h1><h2 id="题目内容">题目内容</h2><p>小红拿到了一个数组，她准备将数组分成k段，使得每段内部按位异或之后，再全部求和，小红希望最终这个和尽可能大，你能帮帮她吗（不能）</p><h2 id="输入描述-2">输入描述</h2><p>输入包含两行，第一行两个正整数<span class="math inline">\(n\)</span>,<span class="math inline">\(k\)</span>，<span class="math inline">\(1&lt;= k &lt;= n &lt;= 400\)</span>，分别表示数组的长度和要分的段数。</p><p>第二行<span class="math inline">\(n\)</span>个整数<spanclass="math inline">\(a_i\)</span> (<span class="math inline">\(0 &lt;=a_i &lt;= 10^9\)</span>)，表示数组a的元素。</p><h2 id="输出描述-2">输出描述</h2><p>输出一个正整数，表示最终的最大和</p><h2 id="示例1-2">示例1</h2><p>输入： <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">6 2</span><br><span class="line">1 1 1 2 3 4</span><br></pre></td></tr></table></figure> 输出： <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">10</span><br></pre></td></tr></table></figure> 解释说明：</p><p>小红将数组分为了[1, 4], [5, 6]两个区间，得分分别为：<spanclass="math inline">\(1 \oplus 1 \oplus 1 \oplus 2 = 3\)</span> 和 <spanclass="math inline">\(3 \oplus 4 =7\)</span>，总得分为10。可以证明不存在比10更优的分割方案。</p><h2 id="解题思路-3">解题思路：</h2><ol type="1"><li>采用动态规划的方法，用dptable记录当前位置将数组分成若干段的最大异或和，我们尝试所有可能的分段方法，更新dptable以找到最大的异或和。</li><li>利用异或运算的逆运算是其本身，可以使用异或前缀和的方法快速计算任何一段异或和</li></ol><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> typing <span class="keyword">import</span> <span class="type">List</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">max_xor</span>(<span class="params">nums: <span class="type">List</span>[<span class="built_in">int</span>], k: <span class="built_in">int</span></span>):</span><br><span class="line">    <span class="comment"># acquire the length of the array</span></span><br><span class="line">    n = <span class="built_in">len</span>(nums)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># calculate pre-sum of xor</span></span><br><span class="line">    pre_sum_xor = [<span class="number">0</span>] * n</span><br><span class="line">    pre_sum_xor[<span class="number">0</span>] = nums[<span class="number">0</span>]</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>, n):</span><br><span class="line">        pre_sum_xor[i] = pre_sum_xor[i-<span class="number">1</span>] ^ nums[i]</span><br><span class="line"></span><br><span class="line">    dp = [[<span class="number">0</span>] * (k+<span class="number">1</span>) <span class="keyword">for</span> _ <span class="keyword">in</span> <span class="built_in">range</span>(n)]</span><br><span class="line"></span><br><span class="line">    <span class="comment"># dp[i][j] 表示index为i的元素分成j段的最大异或和</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(n):</span><br><span class="line">        <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>, k+<span class="number">1</span>):</span><br><span class="line">            <span class="comment"># 只有一段的时候，直接计算从头到当前位置的异或和</span></span><br><span class="line">            <span class="keyword">if</span> j == <span class="number">1</span>:</span><br><span class="line">                dp[i][j] = pre_sum_xor[i]</span><br><span class="line">            <span class="comment"># 多于一段的时候</span></span><br><span class="line">            <span class="comment"># 最大值 = ”前段异或和 + 前面部分“ 与 ”当前“ 最大值</span></span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                <span class="comment"># 尝试不同的分段点</span></span><br><span class="line">                <span class="keyword">for</span> m <span class="keyword">in</span> <span class="built_in">range</span>(j, i):</span><br><span class="line">                    dp[i][j] = <span class="built_in">max</span>(dp[i][j], dp[m][j-<span class="number">1</span>] + (pre_sum_xor[i] ^ pre_sum_xor[m]))</span><br><span class="line">            </span><br><span class="line">    <span class="keyword">return</span> dp[n-<span class="number">1</span>][k];</span><br></pre></td></tr></table></figure><h1 id="q5-小红的tencent矩阵">Q5 小红的tencent矩阵</h1><h2 id="题目描述-3">题目描述</h2><p>小红拿到了一个字符矩阵，她可以从任意一个地点除法，希望走6步之后恰好形成“tencent”字符串，小红想知道，共有多少种不同的行走方案？</p><p>注意：每一步可以选择上，下，左，右任意一种方向行走，不可行走到矩阵外部。</p><h2 id="输入描述-3">输入描述</h2><p>第一行输入两个正整数<span class="math inline">\(n\)</span>, <spanclass="math inline">\(m\)</span>，代表矩阵的行数和列数。</p><p>接下来的n行，每行输入一个长度为m，仅由小写字母组成的字符串，代表小红拿到的矩阵。</p><h2 id="输出描述-3">输出描述</h2><p>一个整数，代表最终合法的方案数</p><h2 id="示例1-3">示例1</h2><p>输入： <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">3 3</span><br><span class="line">ten</span><br><span class="line">nec</span><br><span class="line">ten</span><br></pre></td></tr></table></figure></p><p>输出： <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">4</span><br></pre></td></tr></table></figure></p><p>说明：</p><ol type="1"><li>从左上角出发，右右下左左上</li><li>从左上角出发，右右下左左下</li><li>从左下角出发，右右上左左下</li><li>从左下角出发，右右上左左上</li></ol><h2 id="解题思路-4">解题思路</h2><p>dfs + 剪枝，符合加1，不符合直接返回</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">count_matrix</span>(<span class="params">matrix: <span class="type">List</span>[<span class="type">List</span>[<span class="built_in">str</span>]]</span>):</span><br><span class="line">    n, m = <span class="built_in">len</span>(matrix), <span class="built_in">len</span>(matrix[<span class="number">0</span>])</span><br><span class="line">    expect = [<span class="string">&quot;t&quot;</span>, <span class="string">&quot;e&quot;</span>, <span class="string">&quot;n&quot;</span>, <span class="string">&quot;c&quot;</span>, <span class="string">&quot;e&quot;</span>, <span class="string">&quot;n&quot;</span>, <span class="string">&quot;t&quot;</span>]</span><br><span class="line">    res = <span class="number">0</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">dfs</span>(<span class="params">i: <span class="built_in">int</span>, j: <span class="built_in">int</span>, count: <span class="built_in">int</span></span>):</span><br><span class="line">        <span class="keyword">if</span> i &lt; <span class="number">0</span> <span class="keyword">or</span> j &lt; <span class="number">0</span> <span class="keyword">or</span> i &gt;= n <span class="keyword">or</span> j &gt;= m:</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span> count &gt;= <span class="built_in">len</span>(expect) <span class="keyword">or</span> matrix[i][j] != expect[count]:</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span> count == <span class="built_in">len</span>(expect)-<span class="number">1</span>:</span><br><span class="line">            <span class="keyword">nonlocal</span> res</span><br><span class="line">            res += <span class="number">1</span></span><br><span class="line">        </span><br><span class="line">        dfs(i+<span class="number">1</span>, j, count+<span class="number">1</span>)</span><br><span class="line">        dfs(i-<span class="number">1</span>, j, count+<span class="number">1</span>)</span><br><span class="line">        dfs(i, j+<span class="number">1</span>, count+<span class="number">1</span>)</span><br><span class="line">        dfs(i, j-<span class="number">1</span>, count+<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(n):</span><br><span class="line">        <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(m):</span><br><span class="line">            dfs(i, j, <span class="number">0</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> res</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">2024年3月31日20:00-22:00实习生在线笔试</summary>
    
    
    
    <category term="OA" scheme="http://jerry20000730.github.io/categories/OA/"/>
    
    
    <category term="Tencent" scheme="http://jerry20000730.github.io/tags/Tencent/"/>
    
  </entry>
  
  <entry>
    <title>Git: How to do pre-commit</title>
    <link href="http://jerry20000730.github.io/wiki/Git/git_tip1/"/>
    <id>http://jerry20000730.github.io/wiki/Git/git_tip1/</id>
    <published>2024-02-14T22:47:40.000Z</published>
    <updated>2024-02-14T22:47:40.000Z</updated>
    
    <content type="html"><![CDATA[<!-- toc --><ul><li><a href="#step1--find-git-hooks">STEP1: Find .git/hooks</a></li><li><a href="#step2--create--pre-commit--file">STEP2: Create<code>pre-commit</code> file</a></li><li><a href="#step3--edit--pre-commit--file">STEP3: edit<code>pre-commit</code> file</a></li></ul><!-- tocstop --><h2 id="step1-find-.githooks">STEP1: Find .git/hooks</h2><p>Find the hooks folder in the (hidden) .git configuration folder<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cd .git/hooks</span><br></pre></td></tr></table></figure></p><h2 id="step2-create-pre-commit-file">STEP2: Create<code>pre-commit</code> file</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">touch pre-commit</span><br></pre></td></tr></table></figure><h2 id="step3-edit-pre-commit-file">STEP3: edit <code>pre-commit</code>file</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vi pre-commit</span><br></pre></td></tr></table></figure><p>and add something like this:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">!/bin/bash</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">store the top level git repository path</span></span><br><span class="line">root_directory=$(git rev-parse --show-toplevel)</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">list all subdirectories</span></span><br><span class="line">subdirectories=(&quot;HW1&quot;, &quot;HW2&quot;, &quot;HW3&quot;)</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">iterate over each subdirectory</span></span><br><span class="line">for subdir in &quot;$(subdirectories[@])&quot;;</span><br><span class="line">do</span><br><span class="line">    (cd &quot;$root_directory/$subdir&quot; &amp;&amp; make clean)</span><br><span class="line">done</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Continue with the commit</span></span><br><span class="line">exit 0</span><br></pre></td></tr></table></figure><p>Now whenever you commit, it will automatically clean the subdirectoryand will not commit any executable files. Note, if the operating systemchanges, the script will also need to change.</p>]]></content>
    
    
    <summary type="html">Whenever I want to commit, I always commit the object file created by C++ to the github server. This cannot be simply specified by the .gitignore file, a better way is to specify this in the pre-commit file</summary>
    
    
    
    <category term="Git" scheme="http://jerry20000730.github.io/categories/Git/"/>
    
    
    <category term="git" scheme="http://jerry20000730.github.io/tags/git/"/>
    
  </entry>
  
  <entry>
    <title>COMP3052 Computer Security 4 -- Access Control</title>
    <link href="http://jerry20000730.github.io/wiki/Lecture%20Note/COMP3052%20Computer%20Security/CS6/"/>
    <id>http://jerry20000730.github.io/wiki/Lecture%20Note/COMP3052%20Computer%20Security/CS6/</id>
    <published>2024-02-13T02:00:39.000Z</published>
    <updated>2024-02-13T02:00:39.000Z</updated>
    
    <content type="html"><![CDATA[<!-- toc --><ul><li><ahref="#-font-color---ff0000----important----font--background"><font color="#FF0000">[IMPORTANT]</font>Background</a></li><li><ahref="#difference-between-authentication-and-access-control-">Differencebetween authentication and access control:</a></li><li><ahref="#access-control-has-two-steps---authentication---authorisation">Accesscontrol has two steps - Authentication &amp; Authorisation</a></li><li><a href="#principal-vs-subject-vs-object">Principal vs Subject vsObject</a></li><li><a href="#access-operations">Access Operations</a><ul><li><ahref="#-font-color---ff0000----important----font--access-control-structures"><font color="#FF0000">[IMPORTANT]</font>Access Control Structures</a></li></ul></li><li><a href="#intermediate-controls">Intermediate Controls</a><ul><li><a href="#groups">Groups</a></li><li><a href="#negative-permission">Negative Permission</a></li><li><a href="#privileges">Privileges</a></li><li><a href="#robe-based-access-control--rbac-">Robe-based AccessControl (RBAC)</a></li><li><a href="#protection-rings">Protection Rings</a></li></ul></li><li><a href="#comparing-security-attributes">Comparing SecurityAttributes</a><ul><li><a href="#partial-ordering">Partial Ordering</a></li><li><a href="#multi-level-security">Multi-Level Security</a></li><li><a href="#lattice">Lattice</a></li><li><a href="#others">Others</a></li></ul></li></ul><!-- tocstop --><h2 id="important-background"><font color="#FF0000">[IMPORTANT]</font>Background</h2><p>To discuss access control, we first have to develop a suitableterminology. The very nature of 'access' suggests that:</p><ul><li>There is an active entity - a <em><strong>subject</strong></em> or<em><strong>principal</strong></em></li><li>Accessing a passive <em><strong>object</strong></em> with somespecific <em><strong>access operation</strong></em></li><li>While a <em><strong>reference monitor</strong></em> grants or deniesaccess</li></ul><figure><img src="/images/CS/Part4/authen_author.png"alt="Fundamental Model of Access Control" /><figcaption aria-hidden="true">Fundamental Model of AccessControl</figcaption></figure><h2 id="difference-between-authentication-and-access-control">Differencebetween authentication and access control:</h2><ul><li>Authentication verify identity</li><li>Access control stipulates who can or cannot access certainresources</li></ul><h2id="access-control-has-two-steps---authentication-authorisation">Accesscontrol has two steps - Authentication &amp; Authorisation</h2><ul><li>Authentication<ul><li>Decide who has access to the system</li></ul></li><li>Authorisation<ul><li>of those with access, who is authorised to do something to theresource (object)</li></ul></li></ul><h2 id="principal-vs-subject-vs-object">Principal vs Subject vsObject</h2><ul><li><strong>Principal</strong>: An entity that can be granted access toobjetcs or can make statements affecting access control decisions<ul><li>user identity in an OS, used when discussing security policies</li></ul></li><li><strong>Subject</strong>: An active entity within an IT system(active party)<ul><li>process running under a user identity, used when discussingoperational system enforcing policies.</li></ul></li><li><strong>Object</strong>: Files or resources (passive party)</li></ul><h2 id="access-operations">Access Operations</h2><ul><li>Access Mode<ul><li>Observe: look at the contents of an object</li><li>Alter: change the contents of an object</li></ul></li><li>General Model on common access on files:<ul><li>Read (concern: confidentiality)</li><li>Write (concern: integrity)</li><li>Execute</li></ul></li><li>Ownership (in charge of setting security policies)<ul><li>Owner can be defined for each resource, owner controls who getsaccess</li><li>Or the security policy is a system-wide mandatory policy</li></ul></li></ul><h3id="important-access-control-structures"><font color="#FF0000">[IMPORTANT]</font>Access Control Structures</h3><ol type="1"><li>Access Control Matrix (ACM) <img src="/images/CS/Part4/acm.png"alt="Access control matrix" /></li></ol><p>At a basic level, access rights can be defined individually for eachcombination of subject and object simply and object simply in the formof a table. The access control matrix is an <strong>abstract</strong>concept and not very suitable for direct implementation if the number ofsubjects and objects is large or if the sets of subjects and objectchange frequently.</p><ol start="2" type="1"><li>Capabilities <img src="/images/CS/Part4/capability.png"alt="Capability" /></li></ol><p>There are two fundamental options for implementing an access controlmatrix. Access rights can be kept with the subjects or with the objects.In the first case, every subject is given a <em>capability</em>, anunforgeable(不可伪造的) token that specifies this subject's accessrights. This capability corresponds to the subject's row in the accesscontrol matrix</p><p><strong>Disadvantage</strong></p><ul><li>It is difficult to get an overview of who has permission to access agiven object</li><li>It is difficult to revoke(撤销) a capability - either the operatingsystem has to be given the task or users have to keep track of all thecapabilities they have passed on</li></ul><ol start="3" type="1"><li>Access Control Lists (ACL) <img src="/images/CS/Part4/acl.png"alt="Access control list" /></li></ol><ul><li>Less memory used<ul><li>Stored with a file and quick to access</li><li>but:<ul><li>management of individual subjects is cumbersome</li><li>obtaining an overview of permissions is challenging</li><li>tedious to set this up for every subjects and objects</li></ul></li><li>UNIX simplifies the ACL structure: User/Group/others</li><li>Windows extends usual rwe with:<ul><li>take ownership</li><li>change permission</li><li>delete</li></ul></li></ul></li></ul><h2 id="intermediate-controls">Intermediate Controls</h2><p>Problems of complexity are solved by indirection. This principle canbe applied to access control. Intermediate layers between users andobjects are introduced to represent policies in a more manageablefasion.</p><h3 id="groups">Groups</h3><p><img src="/images/CS/Part4/group.png" alt="Groups" /> Users withsimilar access rights are collected in groups and groups are givenpermissions to access objects, and are thus a mean of simplifying thedefinition of access control policies.</p><h3 id="negative-permission">Negative Permission</h3><p><img src="/images/CS/Part4/negative_permission.png"alt="Negative Permission" /> an entry in an access control structurethat specifies the access operations a user is not allowed toperform.</p><p><strong>Policy Conflict</strong></p><p>In the above image, the negative permission given to<strong>u3</strong> contradicting the positive permission given to group<strong>g1</strong>, and thus an example of policy conflict.</p><ul><li>Can be resolved by reference monitor<ul><li>e.g., a simple and widely used algorithm is just process the firstentry matching in ACL(Access Control Lists) and ignore the laterentries</li></ul></li></ul><h3 id="privileges">Privileges</h3><figure><img src="/images/CS/Part4/privileges.png" alt="Privileges" /><figcaption aria-hidden="true">Privileges</figcaption></figure><p>A policy could refer to the operationss a user is allowed to execute.<em>Privilege</em> stands for the right to execute certainoperations</p><ul><li>Usually associating with operating system functions</li></ul><h3 id="robe-based-access-control-rbac">Robe-based Access Control(RBAC)</h3><p>Compared with ACL: Identity-based Access Control (IBAC)</p><ul><li>Access is based on a role, e.g. accountants should access certainfinancial files<ul><li>role -&gt; collection of application specific operations or resourceaccess<ul><li>Difference with group and role:<ul><li>group are collections of users</li><li>roles are collections of permissions</li></ul></li></ul></li><li>RBAC focuses on users and the jobs they perform</li><li>Easier to scale and applicable to large networks and organizations(enterprise level)</li><li>Most operating systems are user/group based, so role-based accesscan be provided using nested groups<img src="/images/CS/Part4/rbac.png"alt="rbac within groups" /></li></ul></li></ul><h3 id="protection-rings">Protection Rings</h3><figure><img src="/images/CS/Part4/protection_ring.png"alt="protection rings" /><figcaption aria-hidden="true">protection rings</figcaption></figure><p>Protection rings are a particularly simple example of an intermediatelayer of hardware-based access control for subjects and objects. Eachsubject (process) and each object is assigned a number, depending on its'importance'.</p><p>Access control decisions are made by comparing the subject's andobject's numbers</p><h2 id="comparing-security-attributes">Comparing SecurityAttributes</h2><p>When evaluating a security policy, he reference monitor compares theaccess rights granted to the subject with the access rights demanded bythe policy.</p><h3 id="partial-ordering">Partial Ordering</h3><p>A security policy might grant access to an object if the object labelis <span class="math inline">\(\le\)</span> subject label</p><p><img src="/images/CS/Part4/partial_ordering.png" /></p><p>Considering the above example, the department creates a group<em>Year_1</em> for first year students to manage access for resourcesspecifically dedicated to them. There is also a group <em>Year_2</em>for second year students, <em>Year_3</em> for third year students, etc.The group of first year students would be contained in the group of allstudents, but there is no such relation between group <em>Year_1</em>and <em>Year_2</em>. By using <strong><em>Hasse diagrams</em></strong>(a graphical representation of partially ordered sets in the aboveimage), the edges in the diagram give a seleton of the partial ordering,which is <span class="math inline">\(a \le b\)</span> if and only ifthere a path from a to be.</p><p>In this case, <span class="math inline">\(\{Year\_1\} \le \{Year\_1,Year\_2\}\)</span>, and a security policy might grant access to anobject if the object label is <span class="math inline">\(\le\)</span>subject label.</p><h3 id="multi-level-security">Multi-Level Security</h3><figure><img src="/images/CS/Part4/multi-level-security.png"alt="multi-level security" /><figcaption aria-hidden="true">multi-level security</figcaption></figure><p>Linearly ordered hierarchy of four security levels in early securityresearch in 1970s and 1980s: often in military applications.</p><h3 id="lattice">Lattice</h3><p>The linear ordering of security levels in Multi-Layer security canonly express a limited security policies, while in order to be able tostate other policies, such as people at level <em>secret</em> could haveaccess to lower categories, a <strong>lattice</strong> of securitylevels was introduced.</p><figure><img src="/images/CS/Part4/lattice.png" alt="Lattice" /><figcaption aria-hidden="true">Lattice</figcaption></figure><h3 id="others">Others</h3><ol type="1"><li>JVM: sandboxing - run code in restricted environments</li><li>Virtualization - emulates a number of other machines</li><li>Trusted computing - verifiable state of software and hardware</li></ol>]]></content>
    
    
    <summary type="html">Access control is a security technique that regulates who or what can view or use resources in a computing environment</summary>
    
    
    
    <category term="COMP3052 Computer Security" scheme="http://jerry20000730.github.io/categories/COMP3052-Computer-Security/"/>
    
    
    <category term="COMP3052 Computer Security" scheme="http://jerry20000730.github.io/tags/COMP3052-Computer-Security/"/>
    
  </entry>
  
  <entry>
    <title>Tips when defining global constant in header file</title>
    <link href="http://jerry20000730.github.io/wiki/%E7%A8%8B%E5%BA%8F%E8%AF%AD%E8%A8%80/C++/const/"/>
    <id>http://jerry20000730.github.io/wiki/%E7%A8%8B%E5%BA%8F%E8%AF%AD%E8%A8%80/C++/const/</id>
    <published>2024-02-12T06:03:33.000Z</published>
    <updated>2024-02-12T06:03:33.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="options-of-defining-global-constant-in-header-file">Options ofdefining global constant in header file</h2><ol type="1"><li><code>#define GLOBAL_CONST_VAR 0xFF</code></li><li><code>const int GLOBAL_CONST_VAR = 0xFF;</code></li><li><code>extern const int GLOBAL_CONST_VAR;</code> and in one sourcefile uses <code>cosnt int GLOBAL_CONST_VAR = 0xFF;</code></li></ol><p>According to <em>Effective C++</em>, ITEM 2:</p><blockquote><p>Prefer <code>const</code>, <code>enum</code>, and <code>inline</code>to <code>#define</code>.</p></blockquote><p>So option 1 is not preferred (which I particularly like to use). Inmy project, I have a header file that uses three constant string.</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// util.hpp</span></span><br><span class="line"><span class="type">const</span> <span class="type">char</span> * CLIENT_CONNECT_CONFIRM = <span class="string">&quot;CLIENT_CONFIRM&quot;</span>;</span><br><span class="line"><span class="type">const</span> <span class="type">char</span> * SERVER_CONNECT_CONFIRM = <span class="string">&quot;SERVER_CONFIRM&quot;</span>;</span><br><span class="line"><span class="type">const</span> <span class="type">char</span> * PLAYER_CONNECT_CONFIRM = <span class="string">&quot;PLAYER_CONFIRM&quot;</span>;</span><br></pre></td></tr></table></figure><p>However, when I run the makefile, it has the error goes like:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/usr/bin/ld: player.o:/home/fg96/ECE650/HW3/util.hpp:14: multiple definition of `CLIENT_CONNECT_CONFIRM&#x27;; util.o:/home/fg96/ECE650/HW3/util.hpp:14: first defined here</span><br></pre></td></tr></table></figure><p>Which clearly indicates that the <code>CLIENT_CONNECT_CONFIRM</code>are regarded not as the constant, but variable, but why? Reason is that<code>const char * ...</code> is not constant, because<code>const char *</code> means that the value pointer points to cannotchange, but the value of the pointer can change (very sillymistake).</p><p>The following definition will be just fine:</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// all const pointers pointing to const values</span></span><br><span class="line"><span class="type">const</span> <span class="type">char</span> * <span class="type">const</span> CLIENT_CONNECT_CONFIRM = <span class="string">&quot;CLIENT_CONFIRM&quot;</span>;</span><br><span class="line"><span class="type">const</span> <span class="type">char</span> * <span class="type">const</span> SERVER_CONNECT_CONFIRM = <span class="string">&quot;SERVER_CONFIRM&quot;</span>;</span><br><span class="line"><span class="type">const</span> <span class="type">char</span> * <span class="type">const</span> PLAYER_CONNECT_CONFIRM = <span class="string">&quot;PLAYER_CONFIRM&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// const pointers is also fine</span></span><br><span class="line"><span class="type">char</span> * <span class="type">const</span> CLIENT_CONNECT_CONFIRM = <span class="string">&quot;CLIENT_CONFIRM&quot;</span>;</span><br><span class="line"><span class="type">char</span> * <span class="type">const</span> SERVER_CONNECT_CONFIRM = <span class="string">&quot;SERVER_CONFIRM&quot;</span>;</span><br><span class="line"><span class="type">char</span> * <span class="type">const</span> PLAYER_CONNECT_CONFIRM = <span class="string">&quot;PLAYER_CONFIRM&quot;</span>;</span><br></pre></td></tr></table></figure><p>Since C++17, <code>inline</code> specifier can also be used onvariable. According to the cppreference:</p><blockquote><p>An inline function or variable(since C++17) with external linkage(e.g. not declared static) has the following additional properties:There may be <strong>more than one definition</strong> of an inlinefunction or variable(since C++17) in the program as long as eachdefinition appears in a different translation unit and (for non-staticinline functions and variables(since C++17)) all definitions areidentical. For example, an inline function or an inline variable(sinceC++17) may be defined in a header file that is <strong>included inmultiple source files</strong>.</p></blockquote><p>But we are not allowed to use c++17 so ...</p><p>Another possibility would be to use namespace <figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">namespace</span> &#123;</span><br><span class="line">    <span class="type">char</span> * CLIENT_CONNECT_CONFIRM = <span class="string">&quot;CLIENT_CINFIRM&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h2 id="reference">Reference</h2><ol type="1"><li><ahref="https://stackoverflow.com/questions/2268749/defining-global-constant-in-c">Definingglobal constant in C++</a></li><li><ahref="https://blog.csdn.net/ace_fei/article/details/8587403">头文件中定义const全局变量应注意的问题</a></li></ol>]]></content>
    
    
    <summary type="html">Defining a constant in C++ to be visible in several source files. There are several ways of doing that, but you could make mistakes if not careful enough.</summary>
    
    
    
    <category term="Programming Languages" scheme="http://jerry20000730.github.io/categories/Programming-Languages/"/>
    
    
    <category term="C++" scheme="http://jerry20000730.github.io/tags/C/"/>
    
  </entry>
  
  <entry>
    <title>About master theorem</title>
    <link href="http://jerry20000730.github.io/wiki/Algorithm/master_theorem/"/>
    <id>http://jerry20000730.github.io/wiki/Algorithm/master_theorem/</id>
    <published>2024-02-11T08:16:01.000Z</published>
    <updated>2024-02-11T08:16:01.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="background">Background</h1><p>In ECE590, a <strong>horrible</strong> professor talked so littleabout the master theorem. I was so confused about it. Two months later,one of my friends at USC reminded me of this and I certainly cannotunderstand by this point. In this blog, some points will be clarifiedwhich I do not want to repeat this over and over again in thefuture.</p><h1 id="recurrence-equation">Recurrence equation</h1><p>In the merge sort algorithm, the recurrence equation is given by:</p><p><span class="math inline">\(T(n) = T(\lceil n / 2 \rceil) + T(\lfloorn / 2 \rfloor) + O(n)\)</span></p><p>This <em>should</em> be the correct version, however, we can safelystrip out the floors and ceilings (using a technique called <em>domaintransformations</em>), giving us a simpler recurrence:</p><p><span class="math inline">\(T(n) = 2T(n/2) + O(n)\)</span></p><p>More formally, the recurrence of the form:</p><p><span class="math inline">\(T(n) = aT(n/b) + f(n)\)</span></p><p>characterizes a divide-and-conquer algorithm that creates <spanclass="math inline">\(a\)</span> subproblems, each of which is <spanclass="math inline">\(1/b\)</span> the size of the original problem, andin which the divide and combine steps together take f(n) time. So:</p><ul><li><span class="math inline">\(a\)</span>: number of subproblems</li><li><span class="math inline">\(b\)</span>: size of subproblems inregards to the original problem</li><li><span class="math inline">\(f(n)\)</span>: divide and conquer stepstogether take f(n) time</li></ul><figure><img src="/images/Algorithm/master_theorem/divide-and-conquer.png"alt="divide-and-conquer" /><figcaption aria-hidden="true">divide-and-conquer</figcaption></figure><h2 id="define-master-theorem">Define Master Theorem</h2><p>Let <span class="math inline">\(a \ge 1\)</span> and <spanclass="math inline">\(b &gt; 1\)</span> be constants, let <spanclass="math inline">\(f(n)\)</span> be a function, and let <spanclass="math inline">\(T(n)\)</span> be defined on the nonnegativeintegers by the recurrence:</p><p><span class="math inline">\(T(n) = aT(n/b) + f(n)\)</span></p><p>where we interpret n/b to mean either <spanclass="math inline">\(\lfloor n/b \rfloor\)</span> or <spanclass="math inline">\(\lceil n/b \rceil\)</span>. Then <spanclass="math inline">\(T(n)\)</span> can be bounded asymptotically asfollows:</p><ol type="1"><li>If <span class="math inline">\(f(n) = O(n^{\log_ba -\epsilon})\)</span> for some constant <spanclass="math inline">\(\epsilon &gt; 0\)</span>, then <spanclass="math inline">\(T(n) = O(n^{\log_ba - \epsilon})\)</span>.</li><li>If <span class="math inline">\(f(n) = \Theta(n^{\log_ba})\)</span>,then <span class="math inline">\(T(n) =\Theta(n^{\log_ba})\logn\)</span>.</li><li>If <span class="math inline">\(f(n) = \Omega(n^{\log_ba +\epsilon})\)</span> for some constant <spanclass="math inline">\(\epsilon &gt; 0\)</span>, and if <spanclass="math inline">\(af(n/b) \le cf(n)\)</span> for some constant <spanclass="math inline">\(c &lt; 1\)</span>, and all sufficiently large<span class="math inline">\(n\)</span>, then <spanclass="math inline">\(T(n) = \Omega(f(n))\)</span></li></ol><p>Here, there are one thing that is universal across the three cases,the is in each of the three cases, function <spanclass="math inline">\(f(n)\)</span> is compared with the function <spanclass="math inline">\(n^{\log_ba}\)</span>. Why <spanclass="math inline">\(n^{\log_ba}\)</span>? Or if the form changes to(which is taught at ECE590):</p><blockquote><p>if <span class="math inline">\(T(n) = aT(n/b) + O(n^d)\)</span> (forconstants <span class="math inline">\(a &gt; 0, b &gt; 1, d \ge0\)</span> independent of n) then: <span class="math display">\[ T(n) =\left\{\begin{aligned}&amp; O(n^d) &amp; d &gt; \log_ba \\ &amp; O(n^d\log_{}n) &amp; d = \log_ba \\ &amp; O(n^{\log_ba}) &amp; d &lt;\log_ba\end{aligned}\right.\]</span></p></blockquote><p>An answer on Reddit <ahref="https://www.reddit.com/r/algorithms/comments/14qk806/intuition_behind_critical_exponent_in_masters/">here</a>told me an intuitive way of understanding this, here the <spanclass="math inline">\(\log_ba\)</span> is also called <em>criticalexponent</em>:</p><blockquote><p>The intuition behind master theorem is that you imagine taking aspecific input to the algorithm, then you visualize all the recursivecalls it will make as one huge tree, and then you compute the totalrunning time of the algorithm by taking each level of the recursion treeseparately and summing up the work done while on that level. As you godown the recursion tree, the number of subproblems increasesexponentially while at the same time the size of each subproblem andtherefore also the work done in each subproblem decreasesexponentially.</p></blockquote><p>Then there will be two classifications:</p><ol type="1"><li>If the number of subproblems (<spanclass="math inline">\(a\)</span>) grows faster, almost all work is donein the leaves, i.e., when solving the final calls that are handled inconstant time.</li><li>If the amount of work (<span class="math inline">\(b\)</span>)decreases faster, you get the exact opposite: almost all work is done inthe root of the tree (i.e., outside of all recursive calls) and the restis negligible.</li></ol><blockquote><p>The critical exponent is exactly between those two: the subproblemcount increases at the same rate at which the amount of work decreases.Then you get the same total amount of work on each level of therecursion tree, which means that your total time complexity is (the workdone on any single level) times (the number of levels).</p></blockquote><p>But why <span class="math inline">\(\log_ba\)</span> and what is<span class="math inline">\(d\)</span>? This is because we have not givea general solution to the general form of the recurrence function: <spanclass="math inline">\(T(n) = aT(n/b) + f(n)\)</span>. The solution forthis is:</p><p><span class="math inline">\(T(n) = \displaystyle \sum^{\log_bn}_{i=0}a^if(n.b^i) + O(n^{\log_ba})\)</span></p><p>This can be seen by drawing the tree generated by the recurrence. Thetree has depth <span class="math inline">\(\log_bn\)</span>. There are<span class="math inline">\(a^i\)</span> nodes at level <spanclass="math inline">\(i\)</span>, each labeled <spanclass="math inline">\(f(n/b^i)\)</span>. The value of <spanclass="math inline">\(T(n)\)</span> is the sum of the labels of all thenodes of the tree.</p><figure><imgsrc="/images/Algorithm/master_theorem/divide-and-conquer-general-solution.png"alt="divide and conquer general solution recurrence tree" /><figcaption aria-hidden="true">divide and conquer general solutionrecurrence tree</figcaption></figure><p>The last term <span class="math inline">\(O(\log_ba)\)</span> is thesum across the leaves, which is <span class="math inline">\(a^{\log_bn}\cdot f(1) = n^{\log_ba} \cdot f(1)\)</span></p><blockquote><p>why <span class="math inline">\(a^{\log_bn} = n^{\log_ba}\)</span>?<span class="math display">\[\begin{aligned}a^{\log_bn} &amp;= (b^{\log_ba})^{\log_bn}\\&amp;= b^{\log_ba \cdot \log_bn}\\&amp;= b^{\log_bn \cdot \log_ba}\\&amp;= (b^{\log_bn})^{\log_ba}\\&amp;= n^{\log_ba}\end{aligned}\]</span></p></blockquote><p>So now, if we intuitively think about this theorem again:</p><ol type="1"><li>if <span class="math inline">\(d &gt; \log_ba\)</span>, then itmeans most of the job are done at the root level (considering theO(f(n)) is larger that leaves, which is <spanclass="math inline">\(O(n^{\log_ba}\)</span>)).</li><li>if <span class="math inline">\(d = \log_ba\)</span>, then it meansit is the same as the general solution and thus the time complexity is<span class="math inline">\(O(n^d\log_{}n) = O(n^{\log_ba} \log_{}n) =O(a^{\log_bn} \log_{}n)\)</span> which means the height times the bottomleaves.</li><li>if <span class="math inline">\(d &lt; \log_ba\)</span>, then most ofthe job are done at the leaves.</li></ol><h1 id="references">References</h1><ol type="1"><li><ahref="https://www.reddit.com/r/algorithms/comments/14qk806/intuition_behind_critical_exponent_in_masters/">Reddit- intuition_behind_critical_exponent_in_masters</a></li><li><ahref="https://www.cs.cornell.edu/courses/cs3110/2012sp/lectures/lec20-master/mm-proof.pdf">mastermethod proof - cornell</a></li><li><ahref="https://jeffe.cs.illinois.edu/teaching/algorithms/book/Algorithms-JeffE.pdf">Algorithms- JeffE</a></li></ol>]]></content>
    
    
    <summary type="html">In the analysis of algorithms, the master theorem for divide-and-conquer recurrences provides an asymptotic analysis for many recurrence relations that occur in the analysis of divide-and-conquer algorithms.</summary>
    
    
    
    <category term="Algorithm" scheme="http://jerry20000730.github.io/categories/Algorithm/"/>
    
    
    <category term="Algorithm" scheme="http://jerry20000730.github.io/tags/Algorithm/"/>
    
  </entry>
  
  <entry>
    <title>Multi Domain With Different Reverse Proxy</title>
    <link href="http://jerry20000730.github.io/wiki/%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE/MultiDomain/"/>
    <id>http://jerry20000730.github.io/wiki/%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE/MultiDomain/</id>
    <published>2024-02-07T04:08:31.000Z</published>
    <updated>2024-02-07T04:08:31.000Z</updated>
    
    <content type="html"><![CDATA[<!-- toc --><ul><li><a href="#multi-domain-with-different-reverse-proxy">Multi DomainWith Different Reverse Proxy</a><ul><li><a href="#scenario">Scenario</a></li><li><a href="#my-original-setup">My original setup</a></li></ul></li></ul><!-- tocstop --><h1 id="multi-domain-with-different-reverse-proxy">Multi Domain WithDifferent Reverse Proxy</h1><h2 id="scenario">Scenario</h2><p>If you have one domain name, that is fine. However, if you havemultiple domain with multiple website, but you only have one physicalmachine (also means you only have one public ip address). The way todeal with this is to do a little bit setup in nginx.conf</p><h2 id="my-original-setup">My original setup</h2><p>I have a machine that hosts my blog (which is this one) athttps://www.tragicmaster.website. So my original setting (also can seein my SSL build blog <ahref="https://tragicmaster.website/wiki/环境配置/SSLBuild/#more">here</a>.<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"># Default server configuration</span><br><span class="line">server &#123;</span><br><span class="line">        listen 80 default_server;</span><br><span class="line">        listen [::]:80 default_server;</span><br><span class="line"></span><br><span class="line">        # SSL configuration</span><br><span class="line">        listen 443 ssl default_server;</span><br><span class="line">        listen [::]:443 ssl default_server;</span><br><span class="line">        ssl_certificate cert/tragicmaster.website.crt;</span><br><span class="line">        ssl_certificate_key cert/tragicmaster.website.key;</span><br><span class="line">        ssl_session_timeout 5m;</span><br><span class="line">        ssl_ciphers ECDHE-RSA-AES128-GCM-SHA256:ECDHE:ECDH:AES:HIGH:!NULL:!aNULL:!MD5:!ADH:!RC4;</span><br><span class="line">        ssl_protocols TLSv1 TLSv1.1 TLSv1.2;</span><br><span class="line">        ssl_prefer_server_ciphers on;</span><br><span class="line"></span><br><span class="line">        server_name tragicmaster.website;</span><br><span class="line"></span><br><span class="line">        location / &#123;</span><br><span class="line">                # First attempt to serve request as file, then</span><br><span class="line">                # as directory, then fall back to displaying a 404.</span><br><span class="line">                try_files $uri $uri/ =404;</span><br><span class="line">        &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>And now I have a container running on localhost:8000, which is mysecond website that I want other people to access.</p><p>I tried several ways while this works for me: I create anothersetting so that when nginx see the domain name that I use is'https://www.duber.site', it will redirect to the localhost:8000.</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">server &#123;</span><br><span class="line">    listen 80;</span><br><span class="line">    listen [::]:80;</span><br><span class="line">    server_name www.duber.site;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    location / &#123;</span><br><span class="line">        proxy_pass http://localhost:8000;</span><br><span class="line">        proxy_set_header Host $host;</span><br><span class="line">        proxy_set_header X-Real-IP $remote_addr;</span><br><span class="line">        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;</span><br><span class="line">        proxy_set_header X-Forwarded-Proto $scheme;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    # Add any additional SSL configurations if needed</span><br><span class="line">    listen 443 ssl;</span><br><span class="line">    listen [::]:443 ssl;</span><br><span class="line">    ssl_certificate cert/duber.site.crt;</span><br><span class="line">    ssl_certificate_key cert/duber.site.key;</span><br><span class="line">    ssl_session_timeout 5m;</span><br><span class="line">    ssl_ciphers ECDHE-RSA-AES128-GCM-SHA256:ECDHE:ECDH:AES:HIGH:!NULL:!aNULL:!MD5:!ADH:!RC4;</span><br><span class="line">    ssl_protocols TLSv1 TLSv1.1 TLSv1.2;</span><br><span class="line">    ssl_prefer_server_ciphers on;</span><br><span class="line"></span><br><span class="line">    # Add any other server configurations as needed</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>This is way how one ip, multi domain and multi application runningtogether.</p>]]></content>
    
    
    <summary type="html">How to work with one server if you only have one server, one ip, but multiple website you want to deploy when you are poor student :(</summary>
    
    
    
    <category term="环境配置" scheme="http://jerry20000730.github.io/categories/%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE/"/>
    
    
    <category term="Nginx" scheme="http://jerry20000730.github.io/tags/Nginx/"/>
    
  </entry>
  
  <entry>
    <title>C# 基础 - 面向对象</title>
    <link href="http://jerry20000730.github.io/wiki/%E7%A8%8B%E5%BA%8F%E8%AF%AD%E8%A8%80/CSharp/CSharpOOP/"/>
    <id>http://jerry20000730.github.io/wiki/%E7%A8%8B%E5%BA%8F%E8%AF%AD%E8%A8%80/CSharp/CSharpOOP/</id>
    <published>2023-10-18T04:30:11.000Z</published>
    <updated>2023-10-18T04:30:11.000Z</updated>
    
    <content type="html"><![CDATA[<!-- toc --><ul><li><ahref="#-----object-oriented-programming-">面向对象（object-orientedprogramming)</a><ul><li><ahref="#-----constructor-------method-overloading-">构造方法（constructor）和方法重载（MethodOverloading）</a></li><li><ahref="#c--------fields-----properties-">C#严格界定字段（Fields）、属性（Properties）</a><ul><li><a href="#---------">属性定义的基本模式</a></li><li><a href="#-------">表达式主体定义</a></li><li><a href="#723-------">7.2.3 自动实现属性</a></li></ul></li><li><ahref="#const-readonly-writeonly">const，readonly和writeonly</a></li><li><ahref="#-----------------sddo8--">对象索引（普通索引[点击此处](#SDDo8)）</a><ul><li><a href="#----">索引重载</a></li></ul></li><li><a href="#partial-">Partial类</a><ul><li><a href="#------">分开两个文件</a></li><li><a href="#----">使用范围</a></li><li><a href="#----">注意事项</a></li></ul></li><li><a href="#-------">松耦合设计思想</a><ul><li><dl><dt><a href="#---coupling">耦合 Coupling</a></dt><dd><a href="#-------">低耦合/松耦合</a></dd></dl></li></ul></li><li><a href="#uml--------------------">UML类关系 -依赖、关联、聚合、组合、泛化</a><ul><li><a href="#---dependency-">依赖（Dependency）</a></li><li><a href="#---association-">关联（Association）</a></li><li><a href="#---aggregation-">聚合（Aggregation）</a></li><li><a href="#------composition">组合/复合 Composition</a></li><li><a href="#---aggregation-vs----composition-">聚合（Aggregation）v.s.组合（Composition）</a></li><li><a href="#----generalization-">泛化 (Generalization)</a></li></ul></li><li><a href="#--">继承</a></li><li><a href="#--">复合</a></li><li><ahref="#------protected-internal-">访问修饰符（protected与internal）</a><ul><li><a href="#protected">protected</a></li><li><a href="#internal">internal</a></li></ul></li><li><a href="#-------">构造函数的继承</a><ul><li><a href="#-base----"><code>base</code>关键词</a></li></ul></li><li><a href="#---------">向上转型和向下转型</a><ul><li><dl><dt><a href="#-----upcasting-">向上转型（upcasting）</a></dt><dd><a href="#7122------downcasting-">7.12.2 向下转型（downcasting）</a></dd></dl></li><li><a href="#-as--keyword"><code>as</code> keyword</a></li><li><a href="#-is--keyword"><code>is</code> keyword</a></li></ul></li></ul></li></ul><!-- tocstop --><h1 id="面向对象object-oriented-programming">面向对象（object-orientedprogramming)</h1><p>class高内聚、低耦和：功能相关事物应该放在同一个集合中形成一个模块，这就叫做高内聚，而这些模块又应该是相互独立的，不同的模块之间应该保持一个低耦合的状态。</p><h2id="构造方法constructor和方法重载method-overloading">构造方法（constructor）和方法重载（MethodOverloading）</h2><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">访问修饰符 <span class="keyword">class</span>名() </span><br><span class="line">&#123;</span><br><span class="line">代码逻辑，用于初始化数据等</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">Point</span>(<span class="params"><span class="built_in">int</span> x, <span class="built_in">int</span> y</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">this</span>.x = x;</span><br><span class="line">    <span class="keyword">this</span>.y = y;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">Point</span>()</span></span><br><span class="line">&#123;</span><br><span class="line">    x = <span class="number">15</span>;</span><br><span class="line">    y = <span class="number">5</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">Point</span>(<span class="params"><span class="built_in">int</span> x, <span class="built_in">int</span> y</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">this</span>.x = x;</span><br><span class="line">    <span class="keyword">this</span>.y = y;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2id="c严格界定字段fields属性properties">C#严格界定字段（Fields）、属性（Properties）</h2><p>在Java里，一般对于Private我会用Idea自带的重构自己生成getter函数和setter函数，这些函数属于成员函数，在C#里这些被定义为属性（Properties）<br />属性：<ahref="https://docs.microsoft.com/zh-cn/dotnet/csharp/programming-guide/classes-and-structs/properties">https://docs.microsoft.com/zh-cn/dotnet/csharp/programming-guide/classes-and-structs/properties</a></p><h3 id="属性定义的基本模式">属性定义的基本模式</h3><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">TimePeriod</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">double</span> _seconds;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">double</span> Hours</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">get</span> &#123; <span class="keyword">return</span> _seconds / <span class="number">3600</span>; &#125;</span><br><span class="line">        <span class="keyword">set</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span> (<span class="keyword">value</span> &lt; <span class="number">0</span> || <span class="keyword">value</span> &gt; <span class="number">24</span>)</span><br><span class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> ArgumentOutOfRangeException(<span class="keyword">nameof</span>(<span class="keyword">value</span>),</span><br><span class="line">                      <span class="string">&quot;The valid range is between 0 and 24.&quot;</span>);</span><br><span class="line"></span><br><span class="line">            _seconds = <span class="keyword">value</span> * <span class="number">3600</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>value</code>关键字用于定义由 <code>set</code> 或<code>init</code>访问器分配的值，<code>TimePeriod</code>类表示时间间隔。在内部，该类将时间间隔以秒为单位存储在名为 <code>_seconds</code>的私有字段中。 名为<code>Hours</code>的读-写属性允许客户以小时为单位指定时间间隔。<code>get</code>和 <code>set</code>访问器都会执行小时与秒之间的必要转换。此外，<code>set</code>访问器还会验证数据，如果小时数无效，则引发ArgumentOutOfRangeException<br />在C#中，定义字段会使用小写，private的话加一个下划线（如上面的<code>_seconds</code>），属性会使用大写（如上面的<code>Hours</code>）</p><h3 id="表达式主体定义">表达式主体定义</h3><p>属性访问器通常由单行语句组成，这些语句只分配或只返回表达式的结果。可以将这些属性作为 expression-bodied 成员来实现。 =&gt;符号后跟用于为属性赋值或从属性中检索值的表达式，即组成了表达式主体定义。<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">SaleItem</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="built_in">string</span> _name;</span><br><span class="line">    <span class="built_in">decimal</span> _cost;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">SaleItem</span>(<span class="params"><span class="built_in">string</span> name, <span class="built_in">decimal</span> cost</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        _name = name;</span><br><span class="line">        _cost = cost;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">string</span> Name</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">get</span> =&gt; _name;</span><br><span class="line">        <span class="keyword">set</span> =&gt; _name = <span class="keyword">value</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">decimal</span> Price</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">get</span> =&gt; _cost;</span><br><span class="line">        <span class="keyword">set</span> =&gt; _cost = <span class="keyword">value</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h3 id="自动实现属性">7.2.3 自动实现属性</h3><p>通过使用自动实现的属性，既能简化代码，还能让 C#编译器透明地提供支持字段 <figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">SaleItem</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">// 在这里编译器会自动创建一个private变量_name</span></span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">string</span> Name</span><br><span class="line">    &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">decimal</span> Price</span><br><span class="line">    &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h2 id="constreadonly和writeonly">const，readonly和writeonly</h2><p>从<code>getter</code>、<code>setter</code>的角度来说来说，<code>readonly</code>就是只有<code>getter</code>的属性，而<code>writeonly</code>就是只有<code>setter</code>的属性<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// readonly</span></span><br><span class="line"><span class="comment">// 初始化可以在构造器，也可以在下面的属性</span></span><br><span class="line"><span class="keyword">public</span> <span class="built_in">int</span> T &#123; <span class="keyword">get</span>; &#125; = <span class="number">5</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// writeonly</span></span><br><span class="line"><span class="keyword">private</span> <span class="built_in">int</span> _s;</span><br><span class="line"><span class="keyword">public</span> <span class="built_in">int</span> S &#123; <span class="keyword">set</span> &#123;_s = <span class="keyword">value</span>;&#125; &#125;</span><br></pre></td></tr></table></figure>对于变量和字段，c#还提供了两个更加底层，更加接近编译级别的语法结构，就是使用const 或者 readonly这两个声明修饰符。 <figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span>  <span class="keyword">const</span>  <span class="built_in">int</span>  a = <span class="number">99</span>;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">readonly</span> <span class="built_in">int</span> b;</span><br><span class="line"></span><br></pre></td></tr></table></figure>其中：const是常量，readonly是变量。也就是说const必须在声明同时赋值，而readonly可以在声明暂时不赋值，当class初始化的时候再进行赋值。const是在代码编译前就能定下来，所以他性能比readonly要高出不少。</p><h2 id="对象索引普通索引点击此处">对象索引（普通索引<ahref="#SDDo8">点击此处</a>）</h2><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Point</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">// 成员变量x轴，使用属性</span></span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">int</span> _x;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">SetX</span>(<span class="params"><span class="built_in">int</span> <span class="keyword">value</span></span>)</span>; ...</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">GetX</span>()</span> =&gt; <span class="keyword">this</span>.x;</span><br><span class="line">    <span class="comment">// 成员变量y轴</span></span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">int</span> y;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">SetY</span>(<span class="params"><span class="built_in">int</span> <span class="keyword">value</span></span>)</span>; ...</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">GetY</span>()</span> =&gt; <span class="keyword">this</span>.y;</span><br><span class="line">    <span class="comment">// 成员变量z轴</span></span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">int</span> Z &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">    <span class="comment">// 时间维度</span></span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">int</span> T &#123; <span class="keyword">get</span>; &#125;</span><br><span class="line">    <span class="comment">// 第五维度</span></span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">int</span> _s;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">int</span> S &#123; <span class="keyword">set</span> &#123; _s = <span class="keyword">value</span>; &#125; &#125;</span><br><span class="line">    <span class="comment">// 第六维度</span></span><br><span class="line">    <span class="keyword">const</span> <span class="built_in">int</span> a = <span class="number">99</span>;</span><br><span class="line">    <span class="comment">// 第七维度</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">readonly</span> <span class="built_in">int</span> b;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 加入第八维度数据</span></span><br><span class="line">    <span class="comment">// 第八维，字符串数组</span></span><br><span class="line"><span class="keyword">private</span> <span class="built_in">string</span>[] gamma = <span class="keyword">new</span> <span class="built_in">string</span>[]</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// index from start index from end</span></span><br><span class="line">        <span class="string">&quot;The&quot;</span>,  <span class="comment">// 0     ^9</span></span><br><span class="line">        <span class="string">&quot;quick&quot;</span>, <span class="comment">// 1     ^8</span></span><br><span class="line">        <span class="string">&quot;brown&quot;</span>, <span class="comment">// 2     ^7</span></span><br><span class="line">        <span class="string">&quot;fox&quot;</span>,  <span class="comment">// 3     ^6</span></span><br><span class="line">        <span class="string">&quot;jumped&quot;</span>, <span class="comment">// 4     ^5</span></span><br><span class="line">        <span class="string">&quot;over&quot;</span>,  <span class="comment">// 5     ^4</span></span><br><span class="line">        <span class="string">&quot;the&quot;</span>,  <span class="comment">// 6     ^3</span></span><br><span class="line">        <span class="string">&quot;lazy&quot;</span>,  <span class="comment">// 7     ^2</span></span><br><span class="line">        <span class="string">&quot;dog&quot;</span>  <span class="comment">// 8     ^1</span></span><br><span class="line">    &#125;;    <span class="comment">// 9 (or words.Length) ^0</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 对于这些数据，我们可以通过给他们建立class级别的索引进行快速访问。</span></span><br><span class="line">    <span class="comment">// 建立类级别的索引需要使用关键词this，加上他的index信息，</span></span><br><span class="line">    <span class="comment">// index信息为整数，当然也可以是string等其他类型</span></span><br><span class="line">    <span class="comment">// 因为接下来我们需要从外部访问，所以声明为public；</span></span><br><span class="line">    <span class="comment">// 而每个索引所对应的数据是字符串类型，所以索引返回类型为string。</span></span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">string</span> <span class="keyword">this</span>[<span class="built_in">int</span> index]</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">get</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">return</span> gamma[index];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">set</span></span><br><span class="line">        &#123;</span><br><span class="line">            gamma[index] = <span class="keyword">value</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Point</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">this</span>._x = <span class="number">15</span>;</span><br><span class="line">        y = <span class="number">10</span>;</span><br><span class="line">        T = <span class="number">5</span>;</span><br><span class="line">        a = <span class="number">15</span>;</span><br><span class="line">        b = <span class="number">1000</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>此时进行索引 <figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 获取point数组第一个，只是此时是成员变量</span></span><br><span class="line">Console.WriteLine(point[<span class="number">0</span>]);</span><br><span class="line"><span class="comment">// 修改point数组第一个</span></span><br><span class="line">point[<span class="number">0</span>] = <span class="string">&quot;hello&quot;</span>;</span><br></pre></td></tr></table></figure> 类索引Index的语法结构<br /><imgsrc="https://cdn.nlark.com/yuque/0/2023/png/2434979/1697550613539-7de6558a-e599-4b0d-8873-659352acd889.png#averageHue=%23fefdfd&amp;clientId=u0a656533-1d11-4&amp;from=paste&amp;height=315&amp;id=u84f94525&amp;originHeight=377&amp;originWidth=669&amp;originalType=binary&amp;ratio=1.1979166269302368&amp;rotation=0&amp;showTitle=false&amp;size=70064&amp;status=done&amp;style=none&amp;taskId=uaf2bf636-915a-4fda-8e43-7502c6951ee&amp;title=&amp;width=558.4695837425426"alt="image.png" /><br />注意点：</p><ul><li>创建索引需要使用this关键词</li><li>索引可以用于快速访问一组数据的某一项</li><li>索引的使用需要通过方括号</li><li>索引不能使用static、ref和out来修饰</li></ul><h3 id="索引重载">索引重载</h3><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="built_in">int</span> <span class="keyword">this</span>[<span class="built_in">string</span> name]</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">get</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">return</span> Array.IndexOf(_g, name);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="partial类">Partial类</h2><p>C#中有一个别致的功能叫做<code>partial</code>，它可以用来定义<code>局部类</code>或者<code>局部方法</code>。通过局部类型可以实现将一个类、结构、接口甚至是方法分成几个独立的代码片段，或者放在几个不同的.cs文件中，编译器在编译的时候，会找出这些独立的片段，并在编译的最后合并。<code>partial</code>类能让类变得更容易管理，有效降低我们单个文件的代码复杂性，让代码更容易被维护<br />参考<ahref="https://www.yuque.com/jerry-rxyaq/pxp1nr/feex8c?inner=bTeFd">上面代码</a>，这个class目前有九个成员变量，再加会显得非常的繁琐，使用partial可以解决这个问题<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">partial</span> <span class="keyword">class</span> <span class="title">Point</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">int</span> D &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">printDelta</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        Console.WriteLine(<span class="string">&quot;我是第九维&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>这样在main方法中访问point的<code>printDelta</code>这个方法了（这么神奇？）<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">point.D = <span class="number">1</span>;</span><br><span class="line">point.printDelta();</span><br></pre></td></tr></table></figure></p><h3 id="分开两个文件">分开两个文件</h3><p>局部类的好处就是能把一个类卸载两个独立的文件中，这样更加翻盖你我们对代码的管理<br />命名时，还是以class的类名称开头，但是我们会给文件中加一个中间名称，方便与主文件区分，<code>Point.Delta.cs</code></p><h3 id="使用范围">使用范围</h3><ol type="1"><li>类型特别大，不适合放在一个文件中实现</li><li>一个类型中的一部分代码为自动化工具生成的代码，不宜与我们自己编写的代码混合在一起</li><li>一个类需要多个人同时编写的时候</li></ol><h3 id="注意事项">注意事项</h3><ol type="1"><li>只适用于类、接口、结构，不支持委托和枚举（partial只有和class、struct、interface放在一起时才表示局部类型）</li><li>同一个类型的各个部分必须有修饰符partial</li><li>使用局部类型时，一个类型的各个部分必须位于相同的命名空间中</li><li>一个类型的各个部分必须同时被编译</li><li>一个类型的各部分的访问修饰符必须保证一致性</li><li>局部类型具有累加效应</li></ol><h2 id="松耦合设计思想">松耦合设计思想</h2><h3 id="耦合-coupling">耦合 Coupling</h3><p><imgsrc="https://cdn.nlark.com/yuque/0/2023/png/2434979/1697553596378-99b86590-843a-4aa7-84f3-5a0906ac7899.png#averageHue=%23fafafa&amp;clientId=u0def8650-6ca1-4&amp;from=paste&amp;id=ucd05e4b0&amp;originHeight=924&amp;originWidth=2396&amp;originalType=url&amp;ratio=1.1979166269302368&amp;rotation=0&amp;showTitle=false&amp;status=done&amp;style=none&amp;taskId=u2c769bd0-20ba-49ea-8411-40c204d7be3&amp;title=" /><br />随着系统的复杂性增加，修改最底层的classA会引发系统级别的代码调整，这种代码的处理方式就叫做高耦合。所有的class都紧密的结合在一个类，牵一发则动全身</p><h4 id="低耦合松耦合">低耦合/松耦合</h4><p>类之间存在关系，但是独立存在，两者之间为引用关系。</p><h2 id="uml类关系---依赖关联聚合组合泛化">UML类关系 -依赖、关联、聚合、组合、泛化</h2><h3 id="依赖dependency">依赖（Dependency）</h3><p>依赖关系用虚线加箭头表示，类A要完成某项功能引用了类B，则类A依赖类B。依赖在代码中主要体现为类A的某个成员函数的返回值，形参，局部变量或静态方法调用<br /><imgsrc="https://cdn.nlark.com/yuque/0/2023/png/2434979/1697554084155-7b3db16f-df2c-4eb2-a230-78b48758d105.png#averageHue=%23e6fdf0&amp;clientId=u0def8650-6ca1-4&amp;from=paste&amp;id=ucde7754a&amp;originHeight=54&amp;originWidth=290&amp;originalType=url&amp;ratio=1.1979166269302368&amp;rotation=0&amp;showTitle=true&amp;status=done&amp;style=none&amp;taskId=u466bb816-beb7-4de0-8c90-339dde40c70&amp;title=%E4%BE%9D%E8%B5%96"title="依赖" alt="依赖" /> <figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Computer</span> &#123;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">start</span>()</span>&#123;</span><br><span class="line">        Console.WirteLine(<span class="string">&quot;电脑正在启动&quot;</span>);</span><br><span class="line">&#125; </span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Student</span> &#123;</span><br><span class="line"><span class="comment">//返回值构成依赖</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> Computer <span class="title">program</span>()</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//形参构成依赖</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">program</span>(<span class="params">Computer computer</span>)</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">playGame</span>()</span> &#123;</span><br><span class="line">        <span class="comment">//局部变量构成依赖</span></span><br><span class="line">Computer computer = <span class="keyword">new</span> Computer();</span><br><span class="line">...</span><br><span class="line"><span class="comment">//静态方法调用构成依赖</span></span><br><span class="line">Computer.star();</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p><h3 id="关联association">关联（Association）</h3><p>关联关系使用实线加箭头表示，类之间的关系比依赖要强。学生与老师是关联的，学生可以不用电脑，但是学生不能没有老师。如下图所示：<br />发生关联关系的两个类，类A成为类B的属性，而属性是一种更为紧密的耦合，更为长久的持有关系。在代码中的表现如下： <figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Teacher</span> &#123;</span><br><span class="line">    ...</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Student</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> Teacher teacher;  <span class="comment">//成员变量</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">study</span>()</span>;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure> 与依赖的区别：</p><ol type="1"><li>发生依赖关系的两个类都不会增加属性。其中的一个类作为另一个类的方法的参数或者返回值，或者是某个方法的变量而已。</li><li>从关系的生命周期来看，依赖关系是仅当类的方法被调用时而产生，伴随着方法的结束而结束。关联关系当类实例化的时候产生，当类对象销毁的时候关系结束。相比依赖，关联关系的生存期更长</li></ol><p><imgsrc="https://cdn.nlark.com/yuque/0/2023/png/2434979/1697554245758-28d486b3-3561-4849-8f80-487d432576d8.png#averageHue=%23e6fdf0&amp;clientId=u0def8650-6ca1-4&amp;from=paste&amp;id=u25cc0f03&amp;originHeight=54&amp;originWidth=290&amp;originalType=url&amp;ratio=1.1979166269302368&amp;rotation=0&amp;showTitle=true&amp;status=done&amp;style=none&amp;taskId=uff453855-52f6-4c2a-831d-373aae1fc79&amp;title=%E5%8D%95%E9%A1%B9%E5%85%B3%E8%81%94"title="单项关联" alt="单项关联" /><br /><imgsrc="https://cdn.nlark.com/yuque/0/2023/png/2434979/1697554266110-51a5c7a1-59ea-4a88-a9f5-cb170068ab8e.png#averageHue=%23e6fdf0&amp;clientId=u0def8650-6ca1-4&amp;from=paste&amp;id=u71a1daa5&amp;originHeight=54&amp;originWidth=290&amp;originalType=url&amp;ratio=1.1979166269302368&amp;rotation=0&amp;showTitle=true&amp;status=done&amp;style=none&amp;taskId=uaf44972f-97ec-4e66-b407-e9c972e7011&amp;title=%E5%A4%9A%E9%A1%B9%E5%85%B3%E8%81%94"title="多项关联" alt="多项关联" /><br /><imgsrc="https://cdn.nlark.com/yuque/0/2023/png/2434979/1697554285083-9debce1a-1bc8-4e8b-8866-93eab63e8628.png#averageHue=%23fffff2&amp;clientId=u0def8650-6ca1-4&amp;from=paste&amp;id=ue2fac199&amp;originHeight=74&amp;originWidth=140&amp;originalType=url&amp;ratio=1.1979166269302368&amp;rotation=0&amp;showTitle=true&amp;status=done&amp;style=none&amp;taskId=uab126df2-de62-4b33-9b52-1c577ff636e&amp;title=%E8%87%AA%E8%BA%AB%E5%85%B3%E8%81%94"title="自身关联" alt="自身关联" /><br /><imgsrc="https://cdn.nlark.com/yuque/0/2023/png/2434979/1697554299319-991b8f78-2e2e-4303-8b78-3ad7f06590ec.png#averageHue=%23fffaef&amp;clientId=u0def8650-6ca1-4&amp;from=paste&amp;id=u5db61b16&amp;originHeight=148&amp;originWidth=328&amp;originalType=url&amp;ratio=1.1979166269302368&amp;rotation=0&amp;showTitle=true&amp;status=done&amp;style=none&amp;taskId=u418bfd36-f021-4e76-a99b-e46d2125e29&amp;title=%E5%A4%9A%E7%BB%B4%E5%85%B3%E8%81%94"title="多维关联" alt="多维关联" /></p><h3 id="聚合aggregation">聚合（Aggregation）</h3><p>聚合关系使用实线加空心菱形，用来表示集体与个体之间的关联关系。例如班级与学生之间存在聚合关系，类图表示如下：<br /><imgsrc="https://cdn.nlark.com/yuque/0/2023/png/2434979/1697554643618-475d0b7c-cff0-4f54-968b-3efbfcd1454a.png#averageHue=%23d1e2f2&amp;clientId=u0def8650-6ca1-4&amp;from=paste&amp;id=uf4e72930&amp;originHeight=93&amp;originWidth=330&amp;originalType=url&amp;ratio=1.1979166269302368&amp;rotation=0&amp;showTitle=true&amp;status=done&amp;style=none&amp;taskId=u697fb082-ac40-487d-8b06-06066403fbc&amp;title=%E8%81%9A%E5%90%88"title="聚合" alt="聚合" /><br />聚合关系在代码上与关联关系表现一致。<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Student</span> &#123;</span><br><span class="line">    ...</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Class</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> Student _student;  <span class="comment">//成员变量</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Class</span>(<span class="params">Student student</span>)</span> &#123;</span><br><span class="line">        _student = student</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure> ### 组合/复合 Composition复合关系使用实线加实心菱形表示。用来表示个体与组成部分之间的关联关系。例如学生与心脏之间存在复合关系，类图表示如下：<br /><imgsrc="https://cdn.nlark.com/yuque/0/2023/png/2434979/1697554814646-75243e85-62ae-4ef2-891d-1c7bb6a46a16.png#averageHue=%23d3e4f3&amp;clientId=u0def8650-6ca1-4&amp;from=paste&amp;id=ua0e13d40&amp;originHeight=97&amp;originWidth=338&amp;originalType=url&amp;ratio=1.1979166269302368&amp;rotation=0&amp;showTitle=true&amp;status=done&amp;style=none&amp;taskId=u686acf88-1f71-46e5-9f40-e34527f9164&amp;title=%E5%A4%8D%E5%90%88"title="复合" alt="复合" /><br />组合关系在代码上与关联关系表现一致。<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Heart</span> &#123;</span><br><span class="line">    ...</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Student</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> StudeHeartnt _heart;  <span class="comment">//成员变量</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Student</span>()</span> &#123;</span><br><span class="line">        _heart = <span class="keyword">new</span> Heart（）;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure> ### 聚合（Aggregation）v.s. 组合（Composition）</p><ol type="1"><li><p>聚合关系没有组合紧密。<br />学生不会因为班级的解散而无法存在，聚合关系的类具有不同的生命周期；而学生如果没有心脏将无法存活，组合关系的类具有相同的生命周期。&gt;这个从构造函数可以看出。聚合类的构造函数中包含另一个类的实例作为参数，因为构造函数中传递另一个类的实例，因此学生可以脱离班级体独立存在。组合类的构造函数包含另一个类的实例化。因为在构造函数中进行实例化，因此两者紧密耦合在一起，同生同灭，学生不能脱离心脏而存在。</p></li><li><p>信息的封装性不同</p></li></ol><ul><li>在聚合关系中，客户端可以同时了解Classes类和Student类，因为他们是独立的。</li><li>在组合关系中，客户端只认识Student类，不知道Heart类的存在，因为心脏类被严密地封装在学生类中</li></ul><p><strong>理解聚合与复合的区别，主要在于聚合的成员可独立，复合的成员必须依赖于整体才有意义。</strong></p><h3 id="泛化-generalization">泛化 (Generalization)</h3><p>泛化指的是类与类之间的继承关系和类与接口之间的实现关系。<br /><imgsrc="https://cdn.nlark.com/yuque/0/2023/png/2434979/1697555254853-865923ff-6c08-498b-b72a-7f0b284945b2.png#averageHue=%23fefefe&amp;clientId=u0def8650-6ca1-4&amp;from=paste&amp;id=ue9dada77&amp;originHeight=189&amp;originWidth=361&amp;originalType=url&amp;ratio=1.1979166269302368&amp;rotation=0&amp;showTitle=true&amp;status=done&amp;style=none&amp;taskId=u80ed295c-dbb3-4f0b-9624-d067c1baad8&amp;title=%E7%BB%A7%E6%89%BF"title="继承" alt="继承" /><br /><imgsrc="https://cdn.nlark.com/yuque/0/2023/png/2434979/1697555277159-3faff9ba-cc6c-4416-ae4d-2a1117a1bd0f.png#averageHue=%23cfe1f1&amp;clientId=u0def8650-6ca1-4&amp;from=paste&amp;id=ua4cfc590&amp;originHeight=226&amp;originWidth=352&amp;originalType=url&amp;ratio=1.1979166269302368&amp;rotation=0&amp;showTitle=true&amp;status=done&amp;style=none&amp;taskId=u06e8fa16-e357-449f-ae59-89170abf271&amp;title=%E6%8E%A5%E5%8F%A3"title="接口" alt="接口" /></p><h2 id="继承">继承</h2><p><code>is-a</code>关系<br />C#中继承关系使用<code>:</code><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span>  <span class="keyword">class</span>  <span class="title">Text</span>: <span class="title">PresentationObject</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span>  <span class="built_in">int</span>  FontSize &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">    <span class="keyword">public</span>  <span class="built_in">string</span>  FontName &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span>  <span class="keyword">void</span>  <span class="title">AddHyperLink</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        Console.WriteLine(<span class="string">&quot;添加超链接&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h2 id="复合">复合</h2><p><code>has-a</code>关系 <figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span>  <span class="keyword">class</span>  <span class="title">Logger</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span>  <span class="keyword">void</span>  <span class="title">Log</span>(<span class="params"><span class="built_in">string</span>  message</span>)</span> </span><br><span class="line">    &#123;</span><br><span class="line">        Console.WriteLine(<span class="string">$&quot;日志 <span class="subst">&#123;DateTime.Now&#125;</span>: <span class="subst">&#123;message&#125;</span>&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure> <figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span>  <span class="keyword">class</span>  <span class="title">DbMigrator</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">private</span>  <span class="keyword">readonly</span>  Logger  _logger;</span><br><span class="line">    <span class="function"><span class="keyword">public</span>  <span class="title">DbMigrator</span>(<span class="params">Logger  logger</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        _logger = logger;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span>  <span class="keyword">void</span>  <span class="title">Migrate</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">_logger.Log(<span class="string">&quot;数据迁移开始&quot;</span>);</span><br><span class="line"><span class="comment">// <span class="doctag">TODO:</span> 处理数据迁移</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure> <figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span>  <span class="keyword">class</span>  <span class="title">Install</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">private</span>  <span class="keyword">readonly</span>  Logger  logger;</span><br><span class="line">    <span class="function"><span class="keyword">public</span>  <span class="title">Install</span>(<span class="params">Logger  logger</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">this</span>.logger = logger;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span>  <span class="keyword">void</span>  <span class="title">install</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">_logger.Log(<span class="string">&quot;安装开始&quot;</span>);</span><br><span class="line"><span class="comment">// <span class="doctag">TODO:</span> 安装过程省略</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>最后在main函数里面调用 <figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span>  logger = <span class="keyword">new</span>  Logger();</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span>  dbMigrater = <span class="keyword">new</span>  DbMigrator(logger);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span>  installer = <span class="keyword">new</span>  Installer(logger);</span><br><span class="line"></span><br><span class="line">dbMigrater.Migrate();</span><br></pre></td></tr></table></figure> ##访问修饰符（protected与internal）</p><h3 id="protected">protected</h3><p>只要是被protected声明的变量或者方法，只能被自己访问、或者被继承于自己的子类访问，其他一切外部操作都无法访问。那么接下来，我们用代码尝试一下吧。<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Car</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Accelerate</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        Console.WriteLine(<span class="string">&quot;加油&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">Stop</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        Console.WriteLine(<span class="string">&quot;制动&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">WulinHongguang</span> : <span class="title">Car</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Drift</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">this</span>.Accelerate();</span><br><span class="line">        <span class="keyword">this</span>.Stop();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure> 如果Stop时private的话就无法访问了</p><h3 id="internal">internal</h3><p>使用了 internal修饰符以后，相关的代码只能在同一个程序集或者说同一个项目中使用，任何一个外部项目都没办法从外部对它进行访问。</p><h2 id="构造函数的继承">构造函数的继承</h2><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Staff</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Staff</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        Console.WriteLine(<span class="string">&quot;员工类初始化&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Manager</span> : <span class="title">Staff</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Manager</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        Console.WriteLine(<span class="string">&quot;经理类初始化&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>命令行中，我们得到了两行输出，“xxx”。输出结果表明，当我们在创建manager对象的时候，作为派生类，他不仅了调用自己的构建方法，甚至还会在调用自己之前先调用基类、也就是staff类的构造方法。</p><h3 id="base关键词"><code>base</code>关键词</h3><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Staff</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Staff</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        Console.WriteLine(<span class="string">&quot;员工类初始化&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">int</span> Number &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Staff</span>(<span class="params"><span class="built_in">int</span> number</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        Number = number;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Manager</span> : <span class="title">Staff</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Manager</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        Console.WriteLine(<span class="string">&quot;经理类初始化&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Manager</span>(<span class="params"><span class="built_in">int</span> number</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line"> Console.WriteLine(<span class="string">&quot;&#123;number&#125;经理初始化&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>运行一下发现，manger对象的编号为0，一般来说，整数对象如果没有赋值的时候就是0。所以，这就说明构造方法根本没有对员工编号赋值。这就说明，虽然我们在初始化manager对象的时候使用了参数，但是在调用继承构造方法的时候，并不是按我们预想的那样调用staff类有参数的构造方法，而是调用了无参数的默认构造方法。实际上，如果一个class存在多个构造方法，那么他在处理类继承的时候就面临着多个构造方法选择的问题。<strong>在默认情况下，无论基类有多少个构造方法，他的衍生类在创建对象的时候都会默认使用默认无参数构造方法执行继承工作。所以，这就是为什么manager对象的赋值会失败。</strong><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Manager</span> : <span class="title">Staff</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Manager</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        Console.WriteLine(<span class="string">&quot;经理类初始化&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 加个base(number)就能指定屌用继承构造函数</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Manager</span>(<span class="params"><span class="built_in">int</span> number</span>) : <span class="title">base</span>(<span class="params">number</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line"> Console.WriteLine(<span class="string">&quot;&#123;number&#125;经理初始化&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h2 id="向上转型和向下转型">向上转型和向下转型</h2><h3 id="向上转型upcasting">向上转型（upcasting）</h3><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Shape</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">// comment</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Circle</span> : <span class="title">Shape</span> </span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">// comment</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Circle circle = <span class="keyword">new</span> Circle();</span><br><span class="line"><span class="comment">// implicit transform (upcasting)</span></span><br><span class="line">Shape shape = circle;</span><br></pre></td></tr></table></figure><h4 id="向下转型downcasting">7.12.2 向下转型（downcasting）</h4><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Shape</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">// comment</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Circle</span> : <span class="title">Shape</span> </span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">// comment</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Circle circle = <span class="keyword">new</span> Circle();</span><br><span class="line">Shape shape = circle;</span><br><span class="line"><span class="comment">// explicit transform (downcasting)</span></span><br><span class="line">Circle circle2 = (Circle)shape</span><br></pre></td></tr></table></figure><h3 id="as-keyword"><code>as</code> keyword</h3><p>为了防止这种低级错误，我们可以使用as关键词。<br />比如说，有随便一个对象，我们希望把他转化为Car。显式转化如代码所示，我们连obj原始类型都不清楚，所以这段代码大概率会报错。<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Car car = (Car) obj; <span class="comment">// 可能会抛异常</span></span><br><span class="line">Car car = obj <span class="keyword">as</span> Car; <span class="comment">// 不会抛出异常</span></span><br><span class="line"><span class="keyword">if</span> (car != <span class="literal">null</span>) &#123;</span><br><span class="line"><span class="comment">// continue</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h3 id="is-keyword"><code>is</code> keyword</h3><p>使用is关键词，我们可以检查对象的类型。通过先进行类型验证，再执行对象转换，这样可以极大的提高我们代码的安全程度。<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (obj <span class="keyword">is</span> Car) &#123;</span><br><span class="line">Car car = (Car) obj; <span class="comment">// 不会出错</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure> 如示例代码，如果obj is 是一辆car，那么，我们就可以在if语句中安全的对obj进行汽车类型的转换了。否则，我们就不会obj做任何处理。</p>]]></content>
    
    
    <summary type="html">C#面向对象概念</summary>
    
    
    
    <category term="Programming Languages" scheme="http://jerry20000730.github.io/categories/Programming-Languages/"/>
    
    
    <category term="C#" scheme="http://jerry20000730.github.io/tags/C/"/>
    
  </entry>
  
</feed>
